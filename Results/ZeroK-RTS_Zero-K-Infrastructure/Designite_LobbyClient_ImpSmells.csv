Implementation smell,Namespace,Class,File,Method,Description
Long Method,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,DispatchServerCommandOnGuiThread,The method has 166 lines of code.
Complex Method,LobbyClient,Battle,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Battle.cs,UpdateWith,Cyclomatic complexity of the method is 15
Complex Method,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,Cyclomatic complexity of the method is 19
Complex Method,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Process,Cyclomatic complexity of the method is 8
Long Parameter List,LobbyClient,Battle,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Battle.cs,Battle,The method has 7 parameters. Parameters: engineVersion' password' port' maxplayers' mapName' title' modname
Long Parameter List,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,ScriptAddBot,The method has 6 parameters. Parameters: script' aiNum' teamNum' userNum' botAI' botName
Long Parameter List,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,ScriptAddUser,The method has 5 parameters. Parameters: script' userNum' pteam' teamNum' customParameters
Long Parameter List,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ConnectGame,The method has 5 parameters. Parameters: ip' port' myName' myPassword' engine
Long Parameter List,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,HostGame,The method has 5 parameters. Parameters: startContext' host' port' myName' myPassword
Long Parameter List,LobbyClient,SpringBattleContext,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.SpringBattleContext.cs,SetForConnecting,The method has 5 parameters. Parameters: ip' port' myUser' myPassword' engineVersion
Long Parameter List,LobbyClient,SpringBattleContext,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.SpringBattleContext.cs,SetForHosting,The method has 5 parameters. Parameters: startContext' ip' port' myUser' myPassword
Long Parameter List,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Say,The method has 5 parameters. Parameters: place' channel' inputtext' isEmote' isRing
Long Parameter List,LobbyClient,BattleInfoEventArgs,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient_structures.cs,BattleInfoEventArgs,The method has 5 parameters. Parameters: battleID' spectatorCount' mapName' mapHash' isLocked
Long Parameter List,LobbyClient,TasSayEventArgs,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient_structures.cs,TasSayEventArgs,The method has 5 parameters. Parameters: place' channel' username' text' isEmote
Long Parameter List,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,TasClient,The method has 5 parameters. Parameters: guiThreadInvoker' appName' cpu' invokeUserStatusChangedOnExtensions' ipOverride
Long Parameter List,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,Say,The method has 5 parameters. Parameters: place' channel' inputtext' isEmote' linePrefix
Long Parameter List,LobbyClient.Legacy,TasSayEventArgs,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient_structures.cs,TasSayEventArgs,The method has 6 parameters. Parameters: origin' place' channel' username' text' isEmote
Long Identifier,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,TasClient,The length of the parameter invokeUserStatusChangedOnExtensions is 35.
Long Statement,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,HostGame,The length of the statement  "            if (!File.Exists(paths.GetDedicatedServerPath(startContext.EngineVersion))) throw new ApplicationException($"Dedicated server executable not found: {paths.GetDedicatedServerPath(startContext.EngineVersion)}"); " is 209.
Long Statement,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,MarkPlayerDead,The length of the statement  "            if (sp != null) sp.LoseTime = isDead ? (int)DateTime.UtcNow.Subtract(Context.IngameStartTime ?? Context.StartTime).TotalSeconds : (int?)null; " is 141.
Long Statement,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The length of the statement  "                                foreach (var ally in e.winningAllyTeams) foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == ally))) p.IsVictoryTeam = true; " is 158.
Long Statement,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The length of the statement  "                                foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.LoseTime == null))) foreach (var q in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == p.AllyNumber))) q.IsVictoryTeam = true; " is 217.
Long Statement,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,timer_Elapsed,The length of the statement  "                    else if (timeSinceStart > timeToWarn) SayGame($"Game will be force started in {Math.Max(20' timeToWait - Math.Round(timeSinceStart))} seconds"); " is 144.
Long Statement,LobbyClient,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Protocol\Messages.cs,CanUserPlanetWars,The length of the statement  "            return !string.IsNullOrEmpty(Faction) && Level >= GlobalConst.MinPlanetWarsLevel && EffectiveMmElo > GlobalConst.MinPlanetWarsElo; " is 130.
Long Statement,LobbyClient,ServerConnection,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\ServerConnection.cs,SendCommand,The length of the statement  "                    CommandSent(this' new EventArgs<KeyValuePair<string' object[]>>(new KeyValuePair<string' object[]>(command' parameters))); " is 122.
Long Statement,LobbyClient,ServerConnection,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\ServerConnection.cs,PrepareCommand,The length of the statement  "                if (!string.IsNullOrEmpty(s) && s[0] == '\t') sb.Append(s);// if parameter starts with \t it's sentence seperator and we will ommit space " is 137.
Long Statement,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,GenerateHostScript,The length of the statement  "                if (!string.IsNullOrEmpty(context.MyPassword) || !string.IsNullOrEmpty(context.MyUserName)) script.AppendFormat("  MyPasswd={0};\n"' context.MyPassword??context.MyUserName); " is 173.
Long Statement,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,ScriptAddUser,The length of the statement  "            if (customParameters != null) foreach (var kvp in customParameters) script.AppendFormat("     {0}={1};\n"' kvp.Key' kvp.Value); " is 127.
Long Statement,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,HostGame,The length of the statement  "            if (!File.Exists(paths.GetSpringExecutablePath(startContext.EngineVersion))) throw new ApplicationException($"Spring executable not found: {paths.GetSpringExecutablePath(startContext.EngineVersion)}"); " is 201.
Long Statement,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The length of the statement  "                    if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim(); " is 143.
Long Statement,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The length of the statement  "                    //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later " is 144.
Long Statement,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The length of the statement  "                    if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim(); " is 131.
Long Statement,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The length of the statement  "                    if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true; " is 127.
Long Statement,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,SendText,The length of the statement  "                var bytes = Encoding.UTF8.GetBytes(s.Substring(0' Math.Min(s.Length' 250))); // take only first 250 characters to prevent crashes " is 129.
Long Statement,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The length of the statement  "                            if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length); " is 147.
Long Statement,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The length of the statement  "                            if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length); " is 143.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,AdminSetChannelPassword,The length of the statement  "            if (string.IsNullOrEmpty(password)) Say(SayPlace.User' "ChanServ"' string.Format("!lock #{0} {1}"' channel' password)' false); " is 126.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,ChangeMyBattleStatus,The length of the statement  "                var status = new UpdateUserBattleStatus() { IsSpectator = spectate' Sync = syncStatus' AllyNumber = ally' Name = UserName }; " is 124.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,GetUserCaseInsensitive,The length of the statement  "            return ExistingUsers.Values.FirstOrDefault(u => string.Equals(u.Name' userName' StringComparison.InvariantCultureIgnoreCase)); " is 126.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,OnConnectionClosed,The length of the statement  "            ConnectionLost(this' new TasEventArgs(string.Format("Connection {0}"' wasRequested ? "closed on user request" : "disconnected"))); " is 130.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Register,The length of the statement  "            return SendCommand(new Register() { Name = username' PasswordHash = Utils.HashLobbyPassword(password)' UserID = Utils.GetMyUserID()}); " is 134.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Say,The length of the statement  "                var say = new Say() { Target = args.Channel' Place = args.SayPlace' Text = args.Text' IsEmote = args.IsEmote' Ring = isRing }; " is 126.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,SetRelation,The length of the statement  "            if (rel == Relation.Friend) if (!friends.Contains(target)) return SendCommand(new SetAccountRelation() { Relation = rel' TargetName = target }); " is 144.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,SetRelation,The length of the statement  "            if (rel == Relation.Ignore) if (!ignores.Contains(target)) return SendCommand(new SetAccountRelation() { Relation = rel' TargetName = target }); " is 144.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Process,The length of the statement  "                await Process(new ChannelUserAdded() { UserName = user.Name' ChannelName = "zk" }); // silly hacky thing to make all Users appear in #zk remove later " is 149.
Long Statement,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,Process,The length of the statement  "                    if (!string.IsNullOrEmpty(chan.Topic.Text)) ChannelTopicChanged(this' new ChangeTopic() { ChannelName = chan.Name' Topic = chan.Topic }); " is 137.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,GetUserCaseInsensitive,The length of the statement  "            return ExistingUsers.Values.FirstOrDefault(u => String.Equals(u.Name' userName' StringComparison.InvariantCultureIgnoreCase)); " is 126.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,GetMyUserID,The length of the statement  "            var nics = NetworkInterface.GetAllNetworkInterfaces().Where(x=> !String.IsNullOrWhiteSpace(x.GetPhysicalAddress().ToString()) " is 125.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,Login,The length of the statement  "            con.SendCommand("LOGIN"' userName' Utils.HashLobbyPassword(password)' cpu' localIp' appName' "\t" + GetMyUserID()' "\ta sp m cl p"); " is 132.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,DispatchServerCommandOnGuiThread,The length of the statement  "                Trace.TraceError("TASC error: Error was thrown while processing chat command {0} \"{1}\" (check if chat event trigger faulty code in application): {2}"' command' Utils.Glue(args)' e); " is 183.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnServerMsg,The length of the statement  "            InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server' TasSayEventArgs.Places.Server' ""' ""' Utils.Glue(args' 0)' false)); " is 131.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnMotd,The length of the statement  "            if (args.Length > 0) InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server' TasSayEventArgs.Places.Motd' ""' ""' Utils.Glue(args' 0)' false)); " is 150.
Long Statement,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnAddUser,The length of the statement  "                Trace.TraceError("Error was thrown while processing chat command ADDUSER (check if this event trigger faulty code in application): " + e); " is 138.
Complex Conditional,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The conditional expression  "(PlayerSaid != null) && ((e.Param == Talker.TO_EVERYONE) || (e.Param == Talker.TO_EVERYONE_LEGACY)) &&                              !string.IsNullOrEmpty(e.PlayerName)"  is complex.
Empty Catch Block,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,SayGame,The method has an empty catch block.
Empty Catch Block,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,dedicatedProcess_Exited,The method has an empty catch block.
Empty Catch Block,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,dedicatedProcess_Exited,The method has an empty catch block.
Empty Catch Block,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,springProcess_Exited,The method has an empty catch block.
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,ExitGame,The following statement contains a magic number: try              {                  if (IsRunning)                  {                      SayGame("/kill");                      process.WaitForExit(20000);                      if (!IsRunning) return;                        Trace.TraceWarning("Terminating dedicated server process due to /kill timeout");                      Context.WasKilled = true;                      process.Kill();                        process.WaitForExit(1000);                      if (!IsRunning) return;                      process.Kill();                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error quitting dedicated server: {0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,ExitGame,The following statement contains a magic number: try              {                  if (IsRunning)                  {                      SayGame("/kill");                      process.WaitForExit(20000);                      if (!IsRunning) return;                        Trace.TraceWarning("Terminating dedicated server process due to /kill timeout");                      Context.WasKilled = true;                      process.Kill();                        process.WaitForExit(1000);                      if (!IsRunning) return;                      process.Kill();                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error quitting dedicated server: {0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,dedicatedProcess_Exited,The following statement contains a magic number: try              {                  if (!process.WaitForExit(2000)) process.Kill();              }              catch { }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,dedicatedProcess_Exited,The following statement contains a magic number: Thread.Sleep(1000);
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,HandleSpecialMessages,The following statement contains a magic number: try              {                  if (string.IsNullOrEmpty(e.Text) || !e.Text.StartsWith("SPRINGIE:")) return;                    int count;                  if (!gamePrivateMessages.TryGetValue(e.Text' out count)) count = 0;                  count++;                  gamePrivateMessages[e.Text] = count;                  if (count != 2) return; // only send if count matches 2 exactly                    var text = e.Text.Substring(9);                  if (text.StartsWith("READY:"))                  {                      var name = text.Substring(6);                      var entry = Context.ActualPlayers.FirstOrDefault(x => x.Name == name);                      if (entry != null) entry.IsIngameReady = true;                  }                  if (text == "FORCE") ForceStart();                    Context.OutputExtras.Add(text);              }              catch (Exception ex)              {                  Trace.TraceError("Error while processing '{0}' :{1}"' e.Text' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,HandleSpecialMessages,The following statement contains a magic number: try              {                  if (string.IsNullOrEmpty(e.Text) || !e.Text.StartsWith("SPRINGIE:")) return;                    int count;                  if (!gamePrivateMessages.TryGetValue(e.Text' out count)) count = 0;                  count++;                  gamePrivateMessages[e.Text] = count;                  if (count != 2) return; // only send if count matches 2 exactly                    var text = e.Text.Substring(9);                  if (text.StartsWith("READY:"))                  {                      var name = text.Substring(6);                      var entry = Context.ActualPlayers.FirstOrDefault(x => x.Name == name);                      if (entry != null) entry.IsIngameReady = true;                  }                  if (text == "FORCE") ForceStart();                    Context.OutputExtras.Add(text);              }              catch (Exception ex)              {                  Trace.TraceError("Error while processing '{0}' :{1}"' e.Text' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,HandleSpecialMessages,The following statement contains a magic number: try              {                  if (string.IsNullOrEmpty(e.Text) || !e.Text.StartsWith("SPRINGIE:")) return;                    int count;                  if (!gamePrivateMessages.TryGetValue(e.Text' out count)) count = 0;                  count++;                  gamePrivateMessages[e.Text] = count;                  if (count != 2) return; // only send if count matches 2 exactly                    var text = e.Text.Substring(9);                  if (text.StartsWith("READY:"))                  {                      var name = text.Substring(6);                      var entry = Context.ActualPlayers.FirstOrDefault(x => x.Name == name);                      if (entry != null) entry.IsIngameReady = true;                  }                  if (text == "FORCE") ForceStart();                    Context.OutputExtras.Add(text);              }              catch (Exception ex)              {                  Trace.TraceError("Error while processing '{0}' :{1}"' e.Text' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The following statement contains a magic number: try              {                  switch (e.EventType)                  {                      case Talker.SpringEventType.PLAYER_JOINED:                          var entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = true;                          PlayerJoined?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.PLAYER_LEFT:                          entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = false;                            if (e.Param == 0) PlayerDisconnected?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          PlayerLeft?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.GAME_LUAMSG:                          HandleSpecialMessages(e);                          break;                        case Talker.SpringEventType.PLAYER_CHAT:                          if (e.Param == 255) HandleSpecialMessages(e);                          else AddToLogs(e);                            // only public chat                          if ((PlayerSaid != null) && ((e.Param == Talker.TO_EVERYONE) || (e.Param == Talker.TO_EVERYONE_LEGACY)) &&                              !string.IsNullOrEmpty(e.PlayerName)) PlayerSaid(this' new SpringLogEventArgs(e.PlayerName' e.Text));                          break;                        case Talker.SpringEventType.PLAYER_DEFEATED:                          MarkPlayerDead(e.PlayerName' true);                          if (PlayerLost != null) PlayerLost(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.SERVER_GAMEOVER:                          if (!Context.GameEndedOk) // server gameover runs multiple times                          {                              foreach (var p in Context.ActualPlayers)                              {                                  if (!p.IsIngame && !p.IsSpectator) MarkPlayerDead(p.Name' true);                                  p.IsIngame = false;                              }                                // set victory team for all allied with currently alive                              if (e.winningAllyTeams.Length > 0) {                                  foreach (var ally in e.winningAllyTeams) foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == ally))) p.IsVictoryTeam = true;                              } else { // Fallback' shouldn't happen                                  foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.LoseTime == null))) foreach (var q in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == p.AllyNumber))) q.IsVictoryTeam = true;                              }                                if (Context.IngameStartTime != null)                              {                                  Context.GameEndedOk = true;                                  Context.Duration = (int)DateTime.UtcNow.Subtract(Context.IngameStartTime ?? Context.StartTime).TotalSeconds;                                    GameOver?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                              }                              else Trace.TraceWarning("recieved GAMEOVER before STARTPLAYING!");                                Task.Delay(10000).ContinueWith(x => ExitGame());                          }                          break;                        case Talker.SpringEventType.PLAYER_READY:                          if (e.Param == 1)                          {                              entry = Context.GetOrAddPlayer(e.PlayerName);                              if (entry != null) entry.IsIngameReady = true;                          }                          break;                        case Talker.SpringEventType.SERVER_STARTPLAYING:                          Context.ReplayName = e.ReplayFileName;                          Context.EngineBattleID = e.GameID;                          Context.IngameStartTime = DateTime.UtcNow;                          foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator)) p.IsIngameReady = true;                            BattleStarted(this' EventArgs.Empty);                          break;                        case Talker.SpringEventType.SERVER_QUIT:                          if (LobbyStartContext != null) foreach (var p in Context.ActualPlayers) p.IsIngame = false;                          //if (GameOver != null) GameOver(this' new SpringLogEventArgs(e.PlayerName));                          break;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring message:{0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The following statement contains a magic number: try              {                  switch (e.EventType)                  {                      case Talker.SpringEventType.PLAYER_JOINED:                          var entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = true;                          PlayerJoined?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.PLAYER_LEFT:                          entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = false;                            if (e.Param == 0) PlayerDisconnected?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          PlayerLeft?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.GAME_LUAMSG:                          HandleSpecialMessages(e);                          break;                        case Talker.SpringEventType.PLAYER_CHAT:                          if (e.Param == 255) HandleSpecialMessages(e);                          else AddToLogs(e);                            // only public chat                          if ((PlayerSaid != null) && ((e.Param == Talker.TO_EVERYONE) || (e.Param == Talker.TO_EVERYONE_LEGACY)) &&                              !string.IsNullOrEmpty(e.PlayerName)) PlayerSaid(this' new SpringLogEventArgs(e.PlayerName' e.Text));                          break;                        case Talker.SpringEventType.PLAYER_DEFEATED:                          MarkPlayerDead(e.PlayerName' true);                          if (PlayerLost != null) PlayerLost(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.SERVER_GAMEOVER:                          if (!Context.GameEndedOk) // server gameover runs multiple times                          {                              foreach (var p in Context.ActualPlayers)                              {                                  if (!p.IsIngame && !p.IsSpectator) MarkPlayerDead(p.Name' true);                                  p.IsIngame = false;                              }                                // set victory team for all allied with currently alive                              if (e.winningAllyTeams.Length > 0) {                                  foreach (var ally in e.winningAllyTeams) foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == ally))) p.IsVictoryTeam = true;                              } else { // Fallback' shouldn't happen                                  foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.LoseTime == null))) foreach (var q in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == p.AllyNumber))) q.IsVictoryTeam = true;                              }                                if (Context.IngameStartTime != null)                              {                                  Context.GameEndedOk = true;                                  Context.Duration = (int)DateTime.UtcNow.Subtract(Context.IngameStartTime ?? Context.StartTime).TotalSeconds;                                    GameOver?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                              }                              else Trace.TraceWarning("recieved GAMEOVER before STARTPLAYING!");                                Task.Delay(10000).ContinueWith(x => ExitGame());                          }                          break;                        case Talker.SpringEventType.PLAYER_READY:                          if (e.Param == 1)                          {                              entry = Context.GetOrAddPlayer(e.PlayerName);                              if (entry != null) entry.IsIngameReady = true;                          }                          break;                        case Talker.SpringEventType.SERVER_STARTPLAYING:                          Context.ReplayName = e.ReplayFileName;                          Context.EngineBattleID = e.GameID;                          Context.IngameStartTime = DateTime.UtcNow;                          foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator)) p.IsIngameReady = true;                            BattleStarted(this' EventArgs.Empty);                          break;                        case Talker.SpringEventType.SERVER_QUIT:                          if (LobbyStartContext != null) foreach (var p in Context.ActualPlayers) p.IsIngame = false;                          //if (GameOver != null) GameOver(this' new SpringLogEventArgs(e.PlayerName));                          break;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring message:{0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,timer_Elapsed,The following statement contains a magic number: try              {                  var timeSinceStart = DateTime.UtcNow.Subtract(Context.StartTime).TotalSeconds;                  const int timeToWait = 180; // force start after 180s                  const int timeToWarn = 120; // warn people after 120s                     if (Context.IsHosting && IsRunning && (Context.IngameStartTime == null))                      if (timeSinceStart > timeToWait) ForceStart();                      else if (timeSinceStart > timeToWarn) SayGame($"Game will be force started in {Math.Max(20' timeToWait - Math.Round(timeSinceStart))} seconds");              }              catch (Exception ex)              {                  Trace.TraceError("Error checking start: {0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,timer_Elapsed,The following statement contains a magic number: try              {                  var timeSinceStart = DateTime.UtcNow.Subtract(Context.StartTime).TotalSeconds;                  const int timeToWait = 180; // force start after 180s                  const int timeToWarn = 120; // warn people after 120s                     if (Context.IsHosting && IsRunning && (Context.IngameStartTime == null))                      if (timeSinceStart > timeToWait) ForceStart();                      else if (timeSinceStart > timeToWarn) SayGame($"Game will be force started in {Math.Max(20' timeToWait - Math.Round(timeSinceStart))} seconds");              }              catch (Exception ex)              {                  Trace.TraceError("Error checking start: {0}"' ex);              }
Magic Number,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,timer_Elapsed,The following statement contains a magic number: try              {                  var timeSinceStart = DateTime.UtcNow.Subtract(Context.StartTime).TotalSeconds;                  const int timeToWait = 180; // force start after 180s                  const int timeToWarn = 120; // warn people after 120s                     if (Context.IsHosting && IsRunning && (Context.IngameStartTime == null))                      if (timeSinceStart > timeToWait) ForceStart();                      else if (timeSinceStart > timeToWarn) SayGame($"Game will be force started in {Math.Max(20' timeToWait - Math.Round(timeSinceStart))} seconds");              }              catch (Exception ex)              {                  Trace.TraceError("Error checking start: {0}"' ex);              }
Magic Number,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,GenerateHostScript,The following statement contains a magic number: try {                  Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;                    var script = new StringBuilder();                    script.AppendLine("[GAME]");                  script.AppendLine("{");                    script.AppendFormat("  ZkSearchTag={0};\n"' Guid.NewGuid());                  script.AppendFormat("  Mapname={0};\n"' context.LobbyStartContext.Map);                    script.AppendFormat("  StartPosType={0};\n"' context.LobbyStartContext.IsMission ? 3 : 2);                    script.AppendFormat("  GameType={0};\n"' context.LobbyStartContext.Mod);                  script.AppendFormat("  ModHash=1;\n");                  script.AppendFormat("  MapHash=1;\n");                    if (loopbackListenPort >0) script.AppendFormat("  AutohostPort={0};\n"' loopbackListenPort);                  script.AppendLine();                  script.AppendFormat("  HostIP={0};\n"' context.IpAddress);                  script.AppendFormat("  HostPort={0};\n"' context.Port);                  //script.AppendFormat("  SourcePort={0};\n"' 8300);                  script.AppendFormat("  IsHost=1;\n");                  script.AppendLine();                    if (!string.IsNullOrEmpty(context.MyUserName)) script.AppendFormat("  MyPlayerName={0};\n"' context.MyUserName);                  if (!string.IsNullOrEmpty(context.MyPassword) || !string.IsNullOrEmpty(context.MyUserName)) script.AppendFormat("  MyPasswd={0};\n"' context.MyPassword??context.MyUserName);                    GeneratePlayerSection(script' context);                    return script.ToString();              } finally {                  Thread.CurrentThread.CurrentCulture = previousCulture;              }
Magic Number,LobbyClient,ScriptGenerator,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\ScriptGenerator.cs,GenerateHostScript,The following statement contains a magic number: try {                  Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;                    var script = new StringBuilder();                    script.AppendLine("[GAME]");                  script.AppendLine("{");                    script.AppendFormat("  ZkSearchTag={0};\n"' Guid.NewGuid());                  script.AppendFormat("  Mapname={0};\n"' context.LobbyStartContext.Map);                    script.AppendFormat("  StartPosType={0};\n"' context.LobbyStartContext.IsMission ? 3 : 2);                    script.AppendFormat("  GameType={0};\n"' context.LobbyStartContext.Mod);                  script.AppendFormat("  ModHash=1;\n");                  script.AppendFormat("  MapHash=1;\n");                    if (loopbackListenPort >0) script.AppendFormat("  AutohostPort={0};\n"' loopbackListenPort);                  script.AppendLine();                  script.AppendFormat("  HostIP={0};\n"' context.IpAddress);                  script.AppendFormat("  HostPort={0};\n"' context.Port);                  //script.AppendFormat("  SourcePort={0};\n"' 8300);                  script.AppendFormat("  IsHost=1;\n");                  script.AppendLine();                    if (!string.IsNullOrEmpty(context.MyUserName)) script.AppendFormat("  MyPlayerName={0};\n"' context.MyUserName);                  if (!string.IsNullOrEmpty(context.MyPassword) || !string.IsNullOrEmpty(context.MyUserName)) script.AppendFormat("  MyPasswd={0};\n"' context.MyPassword??context.MyUserName);                    GeneratePlayerSection(script' context);                    return script.ToString();              } finally {                  Thread.CurrentThread.CurrentCulture = previousCulture;              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ExitGame,The following statement contains a magic number: try              {                  if (IsRunning)                  {                      if (!IsRunning) return;                      Trace.TraceInformation("Terminating Spring process");                      Context.WasKilled = true;                      process.Kill();                      process.WaitForExit(1000);                      if (!IsRunning) return;                      process.Kill();                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error quitting spring: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,ParseInfolog,The following statement contains a magic number: try              {                  var missionVars = "";                    foreach (var cycleline in text.Split(new[] { '\n'' '\r' }' StringSplitOptions.RemoveEmptyEntries))                  {                      var line = cycleline;                      var gameframe = 0;                      if (line.StartsWith("[DedicatedServer]")) line = line.Replace("[DedicatedServer] "' "");                        if (line.StartsWith("["))                      {                          var idx = line.IndexOf("] ");                          if (idx > 0)                          {                              int.TryParse(line.Substring(1' idx - 1)' out gameframe);                              if (idx >= 0) line = line.Substring(idx + 2);                          }                      }                        if (line.StartsWith("[AddGameSetupArchivesToVFS]")) line = line.Replace("[AddGameSetupArchivesToVFS] "' "");                        // FIXME: why are these even null in the first place?                      if (string.IsNullOrEmpty(LobbyStartContext.Map) && line.StartsWith("Using map"' true' null)) LobbyStartContext.Map = line.Substring(10).Trim();                        if (string.IsNullOrEmpty(LobbyStartContext.Mod) && line.StartsWith("Using game"' true' null))                      {                          var archiveNameIndex = line.IndexOf("(archive"' 11);                          LobbyStartContext.Mod = line.Substring(11' archiveNameIndex - 11).Trim();                          Trace.TraceInformation("Mod name: " + LobbyStartContext.Mod);                      }                        // obsolete? see above where [DedicatedServer] is pruned                      if (line.StartsWith("recording demo")) Context.ReplayName = Path.GetFileName(line.Substring(15).Trim()); // 91.0                      //else if (line.StartsWith("[DedicatedServer] recording demo")) demoFileName = Path.GetFileName(line.Substring(33).Trim());    // 95.0 and later                        if (line.StartsWith("Using demofile"' true' null)) return; // do nothing if its demo                        if (line.StartsWith("GameID: "' true' null) && (Context.EngineBattleID == null)) Context.EngineBattleID = line.Substring(8).Trim();                        if (line.StartsWith("STATS:")) Context.OutputExtras.Add(line.Substring(6));                        if (line.Contains("SCORE: "))                      {                          var match = Regex.Match(line' "SCORE: ([^ ]+)");                          if (match.Success)                          {                              // game score                              var data = match.Groups[1].Value;                              //Trace.TraceInformation("Score data (raw) : " + data);                              data = Encoding.ASCII.GetString(Convert.FromBase64String(match.Groups[1].Value));                              //Trace.TraceInformation("Score data (decoded) : " + data);                              var parts = data.Split('/');                              var score = 0;                              if (parts.Length > 1)                              {                                  score = Convert.ToInt32(parts[1]);                                  gameframe = Convert.ToInt32(parts[0]);                              }                              else score = Convert.ToInt32(data);                              Context.MissionScore = score;                              Context.MissionFrame = gameframe;                          }                      }                      if (line.Contains("MISSIONVARS:"))                      {                          var match = Regex.Match(line' "MISSIONVARS: ([^ ]+)");                          Context.MissionVars = match.Groups[1].Value.Trim();                          Trace.TraceInformation($"Mission variables: {missionVars} (original line: {line})");                      }                        if (line.StartsWith("Cheating!"' true' null) || line.StartsWith("Cheating is enabled!"' true' null)) Context.IsCheating = true;                  }              }              catch (Exception ex)              {                  Trace.TraceError("Error processing spring log: {0}"' ex);              }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,springProcess_Exited,The following statement contains a magic number: try              {                  if (!process.WaitForExit(2000)) process.Kill();              }              catch { }
Magic Number,LobbyClient,Spring,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.cs,springProcess_Exited,The following statement contains a magic number: Thread.Sleep(1000);
Magic Number,LobbyClient,SpringBattleContext,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.SpringBattleContext.cs,SetForHosting,The following statement contains a magic number: Port = port ?? 8452;
Magic Number,LobbyClient,SpringBattleContext,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Spring.SpringBattleContext.cs,SetForSelfHosting,The following statement contains a magic number: Port = 8452;
Magic Number,LobbyClient,SpringSettings,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\SpringSettings.cs,GetEngineConfigOptions,The following statement contains a magic number: p.WaitForExit(3000);
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Close,The following statement contains a magic number: thread.Join(1000);
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,SendText,The following statement contains a magic number: foreach (var s in lines) {                  var bytes = Encoding.UTF8.GetBytes(s.Substring(0' Math.Min(s.Length' 250))); // take only first 250 characters to prevent crashes                  if (springTalkPort != 0) udp.Send(bytes' bytes.Length' "127.0.0.1"' springTalkPort);              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following statement contains a magic number: while (!close) {                  var endpoint = new IPEndPoint(IPAddress.Loopback' 0);                  byte[] data = null;                  try                  {                      data = udp.Receive(ref endpoint);                  }                  catch (Exception ex)                  {                      Trace.TraceWarning("UdpListener unexpected error port {0} : {1}"' endpoint.Port' ex.Message);                  }                  springTalkPort = endpoint.Port;                  if (data?.Length > 0) {                      var sea = new SpringEventArgs();                        sea.EventType = (SpringEventType)data[0];                        int msgSize;                      switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }                      if (sea.PlayerName == null) {                          var translated = TranslateIdToPlayerName(sea.PlayerNumber);                          if (translated != null) sea.PlayerName = translated;                      }                        if (SpringEvent != null) SpringEvent(this' sea);                  }              }
Magic Number,LobbyClient,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\TasClient.cs,TasClient,The following statement contains a magic number: pingTimer = new Timer(pingInterval * 1000) { AutoReset = true };
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,TasClient,The following statement contains a magic number: pingTimer = new Timer(pingInterval*1000) { AutoReset = true };
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,DispatchServerCommandOnGuiThread,The following statement contains a magic number: try              {                  if (command.StartsWith("#"))                  {                      MessageID = int.Parse(command.Substring(1));                      command = args[0];                      args = Utils.ShiftArray(args' -1);                  }                    Input(this' new TasInputArgs(command' args));                    switch (command)                  {                      case "TASServer": // happens after connecting to server                          OnTasServer(args);                          break;                        case "ACCEPTED": // Login accepted                          OnAccepted(args);                          break;                        case "DENIED": // login denied                          OnDenied(args);                          break;                        case "JOIN": // channel joined                          OnJoin(args);                          break;                        case "JOINFAILED": // channel join failed                          ChannelJoinFailed(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "CHANNEL": // iterating channels                          OnChannel(args);                          break;                        case "ENDOFCHANNELS": // end of channel list iteration                          OnEndOfChannels();                          break;                        case "ADDUSER": // new user joined ta server                          OnAddUser(args);                          break;                        case "FORCELEAVECHANNEL":                          OnForceLeaveChannel(args);                          break;                        case "KICKUSER":                          OnKickUser(args);                          break;                        case "REMOVEUSER": // user left ta server                          OnRemoveUser(args);                          break;                        case "MOTD": // server motd                          OnMotd(args);                          break;                        case "SERVERMSG": // server message                          OnServerMsg(args);                          break;                        case "SERVERMSGBOX": // server messagebox                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.MessageBox'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "CHANNELMESSAGE": // server broadcast to channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         ""'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAID": // someone said something in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         false));                          break;                          case "SAIDEX": // someone said something with emote in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         true));                          break;                        case "SAYPRIVATE": // sent back from sever when user sends private message                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         username'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDPRIVATE": // someone said something to me                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLE": // someone said something in battle                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLEEX": // someone said in battle with emote                            InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         true));                          break;                      case "BROADCAST": // server sends urgent broadcast                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Broadcast'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "REDIRECT": // server sends backup IP                          OnRedirect(args);                          break;                        case "CLIENTSTATUS": // client's status changed                          OnClientStatus(args);                          break;                        case "CLIENTS": // client list sent after channel join                          OnClients(args);                          break;                        case "JOINED": // user joined one of my channels                          OnJoined(args);                          break;                        case "LEFT": // user left one of my channels                          OnLeft(args);                          break;                                                case "AGREEMENT":                          OnAgreement(args);                          break;                        case "PONG":                          lastPong = DateTime.UtcNow;                          break;                        case "AGREEMENTEND":                          OnAgreementEnd();                          break;                        case "REGISTRATIONDENIED":                          RegistrationDenied(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "REGISTRATIONACCEPTED":                          RegistrationAccepted(this' new TasEventArgs(args));                          break;                    }              }              catch (Exception e)              {                  //not throwing "ApplicationException" because we can explicitly say its application fault here:                  Trace.TraceError("TASC error: Error was thrown while processing chat command {0} \"{1}\" (check if chat event trigger faulty code in application): {2}"' command' Utils.Glue(args)' e);              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,DispatchServerCommandOnGuiThread,The following statement contains a magic number: try              {                  if (command.StartsWith("#"))                  {                      MessageID = int.Parse(command.Substring(1));                      command = args[0];                      args = Utils.ShiftArray(args' -1);                  }                    Input(this' new TasInputArgs(command' args));                    switch (command)                  {                      case "TASServer": // happens after connecting to server                          OnTasServer(args);                          break;                        case "ACCEPTED": // Login accepted                          OnAccepted(args);                          break;                        case "DENIED": // login denied                          OnDenied(args);                          break;                        case "JOIN": // channel joined                          OnJoin(args);                          break;                        case "JOINFAILED": // channel join failed                          ChannelJoinFailed(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "CHANNEL": // iterating channels                          OnChannel(args);                          break;                        case "ENDOFCHANNELS": // end of channel list iteration                          OnEndOfChannels();                          break;                        case "ADDUSER": // new user joined ta server                          OnAddUser(args);                          break;                        case "FORCELEAVECHANNEL":                          OnForceLeaveChannel(args);                          break;                        case "KICKUSER":                          OnKickUser(args);                          break;                        case "REMOVEUSER": // user left ta server                          OnRemoveUser(args);                          break;                        case "MOTD": // server motd                          OnMotd(args);                          break;                        case "SERVERMSG": // server message                          OnServerMsg(args);                          break;                        case "SERVERMSGBOX": // server messagebox                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.MessageBox'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "CHANNELMESSAGE": // server broadcast to channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         ""'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAID": // someone said something in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         false));                          break;                          case "SAIDEX": // someone said something with emote in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         true));                          break;                        case "SAYPRIVATE": // sent back from sever when user sends private message                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         username'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDPRIVATE": // someone said something to me                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLE": // someone said something in battle                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLEEX": // someone said in battle with emote                            InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         true));                          break;                      case "BROADCAST": // server sends urgent broadcast                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Broadcast'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "REDIRECT": // server sends backup IP                          OnRedirect(args);                          break;                        case "CLIENTSTATUS": // client's status changed                          OnClientStatus(args);                          break;                        case "CLIENTS": // client list sent after channel join                          OnClients(args);                          break;                        case "JOINED": // user joined one of my channels                          OnJoined(args);                          break;                        case "LEFT": // user left one of my channels                          OnLeft(args);                          break;                                                case "AGREEMENT":                          OnAgreement(args);                          break;                        case "PONG":                          lastPong = DateTime.UtcNow;                          break;                        case "AGREEMENTEND":                          OnAgreementEnd();                          break;                        case "REGISTRATIONDENIED":                          RegistrationDenied(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "REGISTRATIONACCEPTED":                          RegistrationAccepted(this' new TasEventArgs(args));                          break;                    }              }              catch (Exception e)              {                  //not throwing "ApplicationException" because we can explicitly say its application fault here:                  Trace.TraceError("TASC error: Error was thrown while processing chat command {0} \"{1}\" (check if chat event trigger faulty code in application): {2}"' command' Utils.Glue(args)' e);              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnLeft,The following statement contains a magic number: var reason = Utils.Glue(args' 2);
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnKickUser,The following statement contains a magic number: if (us == MyUser.Name) {                  string kicker = args[0];                  string reason = args.Length > 2 ? string.Join(" "' args' 2) : null;                  KickedFromServer(this' new KickedFromServerEventArgs(kicker' reason));              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnKickUser,The following statement contains a magic number: if (us == MyUser.Name) {                  string kicker = args[0];                  string reason = args.Length > 2 ? string.Join(" "' args' 2) : null;                  KickedFromServer(this' new KickedFromServerEventArgs(kicker' reason));              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnAddUser,The following statement contains a magic number: try {                  var u = User.Create(args[0]);                  u.Country = args[1];                  int cpu;                  int.TryParse(args[2]' out cpu);                  u.Cpu = cpu;                  u.LobbyID = Convert.ToInt32(args[3]);                  ExistingUsers.Add(u.Name' u);                  UserAdded(this' new EventArgs<User>(u));              } catch (Exception e) {                  //TraceError ensure bright red coloured message (WriteLine looked harmless):                  Trace.TraceError("Error was thrown while processing chat command ADDUSER (check if this event trigger faulty code in application): " + e);              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnAddUser,The following statement contains a magic number: try {                  var u = User.Create(args[0]);                  u.Country = args[1];                  int cpu;                  int.TryParse(args[2]' out cpu);                  u.Cpu = cpu;                  u.LobbyID = Convert.ToInt32(args[3]);                  ExistingUsers.Add(u.Name' u);                  UserAdded(this' new EventArgs<User>(u));              } catch (Exception e) {                  //TraceError ensure bright red coloured message (WriteLine looked harmless):                  Trace.TraceError("Error was thrown while processing chat command ADDUSER (check if this event trigger faulty code in application): " + e);              }
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnChannel,The following statement contains a magic number: if (args.Length >= 3) c.topic = Utils.Glue(args' 2);
Magic Number,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,OnChannel,The following statement contains a magic number: if (args.Length >= 3) c.topic = Utils.Glue(args' 2);
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,FromInt,The following statement contains a magic number: IsAway = (status & 2) > 0;
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,FromInt,The following statement contains a magic number: IsAdmin = (status & 32) > 0;
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,FromInt,The following statement contains a magic number: IsBot = (status & 64) > 0;
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,FromInt,The following statement contains a magic number: Rank = (status & 28) >> 2;
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,FromInt,The following statement contains a magic number: Rank = (status & 28) >> 2;
Magic Number,LobbyClient.Legacy,User,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\User.cs,ToInt,The following statement contains a magic number: res |= IsAway ? 2 : 0;
Missing Default,LobbyClient,DedicatedServer,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\DedicatedServer.cs,talker_SpringEvent,The following switch statement is missing a default case: switch (e.EventType)                  {                      case Talker.SpringEventType.PLAYER_JOINED:                          var entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = true;                          PlayerJoined?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.PLAYER_LEFT:                          entry = Context?.GetOrAddPlayer(e.PlayerName);                          if (entry != null) entry.IsIngame = false;                            if (e.Param == 0) PlayerDisconnected?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          PlayerLeft?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.GAME_LUAMSG:                          HandleSpecialMessages(e);                          break;                        case Talker.SpringEventType.PLAYER_CHAT:                          if (e.Param == 255) HandleSpecialMessages(e);                          else AddToLogs(e);                            // only public chat                          if ((PlayerSaid != null) && ((e.Param == Talker.TO_EVERYONE) || (e.Param == Talker.TO_EVERYONE_LEGACY)) &&                              !string.IsNullOrEmpty(e.PlayerName)) PlayerSaid(this' new SpringLogEventArgs(e.PlayerName' e.Text));                          break;                        case Talker.SpringEventType.PLAYER_DEFEATED:                          MarkPlayerDead(e.PlayerName' true);                          if (PlayerLost != null) PlayerLost(this' new SpringLogEventArgs(e.PlayerName));                          break;                        case Talker.SpringEventType.SERVER_GAMEOVER:                          if (!Context.GameEndedOk) // server gameover runs multiple times                          {                              foreach (var p in Context.ActualPlayers)                              {                                  if (!p.IsIngame && !p.IsSpectator) MarkPlayerDead(p.Name' true);                                  p.IsIngame = false;                              }                                // set victory team for all allied with currently alive                              if (e.winningAllyTeams.Length > 0) {                                  foreach (var ally in e.winningAllyTeams) foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == ally))) p.IsVictoryTeam = true;                              } else { // Fallback' shouldn't happen                                  foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.LoseTime == null))) foreach (var q in Context.ActualPlayers.Where(x => !x.IsSpectator && (x.AllyNumber == p.AllyNumber))) q.IsVictoryTeam = true;                              }                                if (Context.IngameStartTime != null)                              {                                  Context.GameEndedOk = true;                                  Context.Duration = (int)DateTime.UtcNow.Subtract(Context.IngameStartTime ?? Context.StartTime).TotalSeconds;                                    GameOver?.Invoke(this' new SpringLogEventArgs(e.PlayerName));                              }                              else Trace.TraceWarning("recieved GAMEOVER before STARTPLAYING!");                                Task.Delay(10000).ContinueWith(x => ExitGame());                          }                          break;                        case Talker.SpringEventType.PLAYER_READY:                          if (e.Param == 1)                          {                              entry = Context.GetOrAddPlayer(e.PlayerName);                              if (entry != null) entry.IsIngameReady = true;                          }                          break;                        case Talker.SpringEventType.SERVER_STARTPLAYING:                          Context.ReplayName = e.ReplayFileName;                          Context.EngineBattleID = e.GameID;                          Context.IngameStartTime = DateTime.UtcNow;                          foreach (var p in Context.ActualPlayers.Where(x => !x.IsSpectator)) p.IsIngameReady = true;                            BattleStarted(this' EventArgs.Empty);                          break;                        case Talker.SpringEventType.SERVER_QUIT:                          if (LobbyStartContext != null) foreach (var p in Context.ActualPlayers) p.IsIngame = false;                          //if (GameOver != null) GameOver(this' new SpringLogEventArgs(e.PlayerName));                          break;                  }
Missing Default,LobbyClient,Talker,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Talker.cs,Listener,The following switch statement is missing a default case: switch (sea.EventType) {                          case SpringEventType.PLAYER_JOINED:                              sea.PlayerNumber = data[1];                              sea.PlayerName = Encoding.ASCII.GetString(data' 2' data.Length - 2);                              playerIdToName[sea.PlayerNumber] = sea.PlayerName;                              break;                          case SpringEventType.PLAYER_LEFT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_READY:                              sea.PlayerNumber = data[1];                              if (data.Length <= 2) sea.EventType = SpringEventType.PLAYER_DEFEATED; // hack for spring                               else sea.Param = data[2];                              break;                            case SpringEventType.PLAYER_CHAT:                              sea.PlayerNumber = data[1];                              sea.Param = data[2];                              sea.Text = Encoding.UTF8.GetString(data' 3' data.Length - 3);                              break;                            case SpringEventType.PLAYER_DEFEATED:                              sea.PlayerNumber = data[1];                              break;                            case SpringEventType.SERVER_STARTPLAYING:                              msgSize = data[1] + (data[2]<<8) + (data[3]<<16) + (data[4]<<24);                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on STARTPLAYING"' msgSize' data.Length);                              sea.GameID = data.Skip(5).Take(16).ToArray().ToHex();                              sea.ReplayFileName = Encoding.UTF8.GetString(data' 21' data.Length - 21);                              break;                                                        case SpringEventType.SERVER_GAMEOVER:                              msgSize = data[1];                              sea.PlayerNumber = data[2];                              if (msgSize != data.Length) Trace.TraceWarning("Warning spring message size mismatch' expected {0} got {1} on GAMEOVER"' msgSize' data.Length);                              sea.winningAllyTeams = data.Skip(3).Take(msgSize - 3).ToArray();                              break;                            case SpringEventType.SERVER_MESSAGE:                                break;                            case SpringEventType.GAME_LUAMSG:                              sea.PlayerNumber = data[1];                              sea.Param = data[4];                              sea.Text = Encoding.ASCII.GetString(data' 5' data.Length - 5);                              break;                      }
Missing Default,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,Say,The following switch statement is missing a default case: switch (place)                  {                      case SayPlace.Channel:                          if (!JoinedChannels.ContainsKey(args.Channel)) JoinChannel(args.Channel);                          if (args.IsEmote) await con.SendCommand("SAYEX"' args.Channel' args.Text);                          else await con.SendCommand("SAY"' args.Channel' args.Text);                          break;                        case SayPlace.User:                          await con.SendCommand("SAYPRIVATE"' args.Channel' args.Text);                          break;                        case SayPlace.Battle:                          if (args.IsEmote) await con.SendCommand("SAYBATTLEEX"' args.Text);                          else await con.SendCommand("SAYBATTLE"' args.Text);                          break;                      case SayPlace.BattlePrivate:                          if (args.IsEmote) await con.SendCommand("SAYBATTLEPRIVATEEX"' channel' args.Text);                          else await con.SendCommand("SAYBATTLEPRIVATE"' channel' args.Text);                          break;                  }
Missing Default,LobbyClient.Legacy,TasClient,C:\repos\ZeroK-RTS_Zero-K-Infrastructure\Shared\LobbyClient\Legacy\TasClient.cs,DispatchServerCommandOnGuiThread,The following switch statement is missing a default case: switch (command)                  {                      case "TASServer": // happens after connecting to server                          OnTasServer(args);                          break;                        case "ACCEPTED": // Login accepted                          OnAccepted(args);                          break;                        case "DENIED": // login denied                          OnDenied(args);                          break;                        case "JOIN": // channel joined                          OnJoin(args);                          break;                        case "JOINFAILED": // channel join failed                          ChannelJoinFailed(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "CHANNEL": // iterating channels                          OnChannel(args);                          break;                        case "ENDOFCHANNELS": // end of channel list iteration                          OnEndOfChannels();                          break;                        case "ADDUSER": // new user joined ta server                          OnAddUser(args);                          break;                        case "FORCELEAVECHANNEL":                          OnForceLeaveChannel(args);                          break;                        case "KICKUSER":                          OnKickUser(args);                          break;                        case "REMOVEUSER": // user left ta server                          OnRemoveUser(args);                          break;                        case "MOTD": // server motd                          OnMotd(args);                          break;                        case "SERVERMSG": // server message                          OnServerMsg(args);                          break;                        case "SERVERMSGBOX": // server messagebox                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.MessageBox'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "CHANNELMESSAGE": // server broadcast to channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         ""'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAID": // someone said something in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         false));                          break;                          case "SAIDEX": // someone said something with emote in channel                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Channel'                                                         args[0]'                                                         args[1]'                                                         Utils.Glue(args' 2)'                                                         true));                          break;                        case "SAYPRIVATE": // sent back from sever when user sends private message                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         username'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDPRIVATE": // someone said something to me                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Normal'                                                         args[0]'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLE": // someone said something in battle                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         false));                          break;                        case "SAIDBATTLEEX": // someone said in battle with emote                            InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Player'                                                         TasSayEventArgs.Places.Battle'                                                         ""'                                                         args[0]'                                                         Utils.Glue(args' 1)'                                                         true));                          break;                      case "BROADCAST": // server sends urgent broadcast                          InvokeSaid(new TasSayEventArgs(TasSayEventArgs.Origins.Server'                                                         TasSayEventArgs.Places.Broadcast'                                                         ""'                                                         ""'                                                         Utils.Glue(args' 0)'                                                         false));                          break;                        case "REDIRECT": // server sends backup IP                          OnRedirect(args);                          break;                        case "CLIENTSTATUS": // client's status changed                          OnClientStatus(args);                          break;                        case "CLIENTS": // client list sent after channel join                          OnClients(args);                          break;                        case "JOINED": // user joined one of my channels                          OnJoined(args);                          break;                        case "LEFT": // user left one of my channels                          OnLeft(args);                          break;                                                case "AGREEMENT":                          OnAgreement(args);                          break;                        case "PONG":                          lastPong = DateTime.UtcNow;                          break;                        case "AGREEMENTEND":                          OnAgreementEnd();                          break;                        case "REGISTRATIONDENIED":                          RegistrationDenied(this' new TasEventArgs(Utils.Glue(args)));                          break;                        case "REGISTRATIONACCEPTED":                          RegistrationAccepted(this' new TasEventArgs(args));                          break;                    }
