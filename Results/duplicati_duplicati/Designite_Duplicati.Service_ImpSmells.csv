Implementation smell,Namespace,Class,File,Method,Description
Complex Method,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,Cyclomatic complexity of the method is 11
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: try {  	while (!m_terminate && !m_softstop) {  		if (!System.IO.File.Exists (exec)) {  			m_reportMessage (string.Format ("File not found {0}"' exec)' true);  			return;  		}  		try {  			if (!firstRun)  				m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  			m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  			var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  			pr.UseShellExecute = false;  			pr.RedirectStandardInput = true;  			pr.RedirectStandardOutput = true;  			pr.WorkingDirectory = path;  			if (!m_terminate)  				m_process = System.Diagnostics.Process.Start (pr);  			if (firstRun && m_onStartedAction != null) {  				PingProcess ();  				m_onStartedAction ();  				firstRun = false;  			}  			while (!m_process.HasExited) {  				m_process.WaitForExit (WAIT_POLL_TIME);  				if (!m_process.HasExited) {  					if (m_terminate)  						m_process.Kill ();  					else  						PingProcess ();  				}  			}  		} catch (Exception ex) {  			m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  			if (firstRun) {  				startAttempts++;  				if (startAttempts > 5) {  					m_reportMessage ("Too many startup attempts' giving up"' true);  					m_terminate = true;  				}  			}  			// Throttle restarts  			if (!m_terminate)  				System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  		}  	}  } finally {  	if (m_onStoppedAction != null)  		m_onStoppedAction ();  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: try {  	while (!m_terminate && !m_softstop) {  		if (!System.IO.File.Exists (exec)) {  			m_reportMessage (string.Format ("File not found {0}"' exec)' true);  			return;  		}  		try {  			if (!firstRun)  				m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  			m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  			var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  			pr.UseShellExecute = false;  			pr.RedirectStandardInput = true;  			pr.RedirectStandardOutput = true;  			pr.WorkingDirectory = path;  			if (!m_terminate)  				m_process = System.Diagnostics.Process.Start (pr);  			if (firstRun && m_onStartedAction != null) {  				PingProcess ();  				m_onStartedAction ();  				firstRun = false;  			}  			while (!m_process.HasExited) {  				m_process.WaitForExit (WAIT_POLL_TIME);  				if (!m_process.HasExited) {  					if (m_terminate)  						m_process.Kill ();  					else  						PingProcess ();  				}  			}  		} catch (Exception ex) {  			m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  			if (firstRun) {  				startAttempts++;  				if (startAttempts > 5) {  					m_reportMessage ("Too many startup attempts' giving up"' true);  					m_terminate = true;  				}  			}  			// Throttle restarts  			if (!m_terminate)  				System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  		}  	}  } finally {  	if (m_onStoppedAction != null)  		m_onStoppedAction ();  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: while (!m_terminate && !m_softstop) {  	if (!System.IO.File.Exists (exec)) {  		m_reportMessage (string.Format ("File not found {0}"' exec)' true);  		return;  	}  	try {  		if (!firstRun)  			m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  		m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  		var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  		pr.UseShellExecute = false;  		pr.RedirectStandardInput = true;  		pr.RedirectStandardOutput = true;  		pr.WorkingDirectory = path;  		if (!m_terminate)  			m_process = System.Diagnostics.Process.Start (pr);  		if (firstRun && m_onStartedAction != null) {  			PingProcess ();  			m_onStartedAction ();  			firstRun = false;  		}  		while (!m_process.HasExited) {  			m_process.WaitForExit (WAIT_POLL_TIME);  			if (!m_process.HasExited) {  				if (m_terminate)  					m_process.Kill ();  				else  					PingProcess ();  			}  		}  	} catch (Exception ex) {  		m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  		if (firstRun) {  			startAttempts++;  			if (startAttempts > 5) {  				m_reportMessage ("Too many startup attempts' giving up"' true);  				m_terminate = true;  			}  		}  		// Throttle restarts  		if (!m_terminate)  			System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  	}  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: while (!m_terminate && !m_softstop) {  	if (!System.IO.File.Exists (exec)) {  		m_reportMessage (string.Format ("File not found {0}"' exec)' true);  		return;  	}  	try {  		if (!firstRun)  			m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  		m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  		var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  		pr.UseShellExecute = false;  		pr.RedirectStandardInput = true;  		pr.RedirectStandardOutput = true;  		pr.WorkingDirectory = path;  		if (!m_terminate)  			m_process = System.Diagnostics.Process.Start (pr);  		if (firstRun && m_onStartedAction != null) {  			PingProcess ();  			m_onStartedAction ();  			firstRun = false;  		}  		while (!m_process.HasExited) {  			m_process.WaitForExit (WAIT_POLL_TIME);  			if (!m_process.HasExited) {  				if (m_terminate)  					m_process.Kill ();  				else  					PingProcess ();  			}  		}  	} catch (Exception ex) {  		m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  		if (firstRun) {  			startAttempts++;  			if (startAttempts > 5) {  				m_reportMessage ("Too many startup attempts' giving up"' true);  				m_terminate = true;  			}  		}  		// Throttle restarts  		if (!m_terminate)  			System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  	}  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: try {  	if (!firstRun)  		m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  	m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  	var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  	pr.UseShellExecute = false;  	pr.RedirectStandardInput = true;  	pr.RedirectStandardOutput = true;  	pr.WorkingDirectory = path;  	if (!m_terminate)  		m_process = System.Diagnostics.Process.Start (pr);  	if (firstRun && m_onStartedAction != null) {  		PingProcess ();  		m_onStartedAction ();  		firstRun = false;  	}  	while (!m_process.HasExited) {  		m_process.WaitForExit (WAIT_POLL_TIME);  		if (!m_process.HasExited) {  			if (m_terminate)  				m_process.Kill ();  			else  				PingProcess ();  		}  	}  } catch (Exception ex) {  	m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  	if (firstRun) {  		startAttempts++;  		if (startAttempts > 5) {  			m_reportMessage ("Too many startup attempts' giving up"' true);  			m_terminate = true;  		}  	}  	// Throttle restarts  	if (!m_terminate)  		System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: try {  	if (!firstRun)  		m_reportMessage (string.Format ("Attempting to restart server process: {0}"' exec)' true);  	m_reportMessage (string.Format ("Starting process {0} with cmd args {1}"' exec' cmdargs)' false);  	var pr = new System.Diagnostics.ProcessStartInfo (exec' cmdargs);  	pr.UseShellExecute = false;  	pr.RedirectStandardInput = true;  	pr.RedirectStandardOutput = true;  	pr.WorkingDirectory = path;  	if (!m_terminate)  		m_process = System.Diagnostics.Process.Start (pr);  	if (firstRun && m_onStartedAction != null) {  		PingProcess ();  		m_onStartedAction ();  		firstRun = false;  	}  	while (!m_process.HasExited) {  		m_process.WaitForExit (WAIT_POLL_TIME);  		if (!m_process.HasExited) {  			if (m_terminate)  				m_process.Kill ();  			else  				PingProcess ();  		}  	}  } catch (Exception ex) {  	m_reportMessage (string.Format ("Process has failed with error message: {0}"' ex)' true);  	if (firstRun) {  		startAttempts++;  		if (startAttempts > 5) {  			m_reportMessage ("Too many startup attempts' giving up"' true);  			m_terminate = true;  		}  	}  	// Throttle restarts  	if (!m_terminate)  		System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: if (firstRun) {  	startAttempts++;  	if (startAttempts > 5) {  		m_reportMessage ("Too many startup attempts' giving up"' true);  		m_terminate = true;  	}  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: if (startAttempts > 5) {  	m_reportMessage ("Too many startup attempts' giving up"' true);  	m_terminate = true;  }  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: if (!m_terminate)  	System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,Run,The following statement contains a magic number: System.Threading.Thread.Sleep (TimeSpan.FromSeconds (10));  
Magic Number,Duplicati.Service,Runner,F:\newReposMay17\duplicati_duplicati\Duplicati\Service\Runner.cs,PingProcess,The following statement contains a magic number: for (var n = 0; n < 5; n++) {  	lock (m_writelock) {  		m_process.StandardInput.WriteLine ("ping");  		m_process.StandardInput.Flush ();  	}  	using (var t = m_process.StandardOutput.ReadLineAsync ()) {  		t.Wait (TimeSpan.FromMinutes (1));  		if (t.IsCompleted && !t.IsFaulted && !t.IsCanceled)  			return;  	}  }  
