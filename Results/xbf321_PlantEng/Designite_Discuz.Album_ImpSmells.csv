Implementation smell,Namespace,Class,File,Method,Description
Long Method,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,The method has 111 lines of code.
Long Method,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The method has 112 lines of code.
Complex Method,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,Cyclomatic complexity of the method is 10
Complex Method,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,Cyclomatic complexity of the method is 10
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,RegEsc,Cyclomatic complexity of the method is 10
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoRankList,Cyclomatic complexity of the method is 15
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetFocusPhotoList,Cyclomatic complexity of the method is 12
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByID,Cyclomatic complexity of the method is 9
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListCondition,Cyclomatic complexity of the method is 11
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCondition,Cyclomatic complexity of the method is 8
Complex Method,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,Cyclomatic complexity of the method is 12
Complex Method,Discuz.Album.Pages,showalbum,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showalbum.cs,ShowPage,Cyclomatic complexity of the method is 16
Complex Method,Discuz.Album.Pages,showalbumlist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showalbumlist.cs,ShowPage,Cyclomatic complexity of the method is 15
Complex Method,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,Cyclomatic complexity of the method is 33
Complex Method,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SavePhotoComment,Cyclomatic complexity of the method is 10
Complex Method,Discuz.Album.Pages,usercpalbummanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpalbummanage.cs,ShowPage,Cyclomatic complexity of the method is 18
Complex Method,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,Cyclomatic complexity of the method is 10
Complex Method,Discuz.Album.Pages,usercpphotomanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotomanage.cs,ShowPage,Cyclomatic complexity of the method is 17
Complex Method,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,Cyclomatic complexity of the method is 18
Long Parameter List,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The method has 6 parameters.
Long Parameter List,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The method has 6 parameters.
Long Parameter List,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,The method has 8 parameters.
Long Parameter List,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListCondition,The method has 5 parameters.
Long Parameter List,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListCountByCondition,The method has 6 parameters.
Long Parameter List,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByCondition,The method has 6 parameters.
Long Statement,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The length of the statement  "		return AjaxPagination (recordcount' pagesize' currentpage' "../usercontrols/ajaxalbumlist.ascx"' "albumusername=" + postusername + "&albumtitle=" + title + "&albumdescription=" + description + "&albumdatetimeStart=" + startdate + "&albumdatetimeEnd=" + enddate + "&postnumber=" + DNTRequest.GetInt ("postnumber"' 0)' "albumslist"); " is 331.
Long Statement,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The length of the statement  "		return AjaxPagination (recordcount' pagesize' currentpage' "../usercontrols/ajaxalbumlist.ascx"' "albumusername=" + postusername + "&albumtitle=" + title + "&albumdescription=" + description + "&albumdatetimeStart=" + startdate + "&albumdatetimeEnd=" + enddate' "albumslist"); " is 276.
Long Statement,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The length of the statement  "		currentpagestr += currentpage > 1 ? "&nbsp;&nbsp;<a href=\"###\"  onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + pre + "');\" title=\"��һҳ\">��һҳ</a>" : ""; " is 238.
Long Statement,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The length of the statement  "			currentpagestr += currentpage == i ? "&nbsp;" + i + "" : "&nbsp;<a href=\"###\"  onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + i + "');\">" + i + "</a>"; " is 236.
Long Statement,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The length of the statement  "		currentpagestr += currentpage != allcurrentpage ? "&nbsp;&nbsp;<a href=\"###\" onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + next + "');\" title=\"��һҳ\">��һҳ</a>&nbsp;&nbsp;" : ""; " is 264.
Long Statement,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The length of the statement  "		return AjaxPagination (recordcount' pagesize' currentpage' "../usercontrols/ajaxphotoinfo.ascx"' "photousername=" + photousernamelist + "&phototitle=" + keylist + "&photodatetimeStart=" + startdate + "&photodatetimeEnd=" + enddate + "&postnumber=" + DNTRequest.GetInt ("postnumber"' 0)' "photolistgrid"); " is 304.
Long Statement,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The length of the statement  "		return AjaxPagination (recordcount' pagesize' currentpage' "../usercontrols/ajaxphotoinfo.ascx"' "photousername=" + photousernamelist + "&phototitle=" + keylist + "&photodatetimeStart=" + startdate + "&photodatetimeEnd=" + enddate' "photolistgrid"); " is 249.
Long Statement,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The length of the statement  "		currentpagestr += currentpage > 1 ? "&nbsp;&nbsp;<a href=\"###\"  onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + pre + "');\" title=\"��һҳ\">��һҳ</a>" : ""; " is 238.
Long Statement,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The length of the statement  "			currentpagestr += currentpage == i ? "&nbsp;" + i + "" : "&nbsp;<a href=\"###\"  onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + i + "');\">" + i + "</a>"; " is 236.
Long Statement,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The length of the statement  "		currentpagestr += currentpage != allcurrentpage ? "&nbsp;&nbsp;<a href=\"###\" onclick=\"javascript:AjaxHelper.Updater('" + usercontrolname + "'''" + divname + "'' 'load=true&" + paramstr + "&currentpage=" + next + "');\" title=\"��һҳ\">��һҳ</a>&nbsp;&nbsp;" : ""; " is 264.
Long Statement,Discuz.Album.Admin,CommendAlbums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\commendalbums.aspx.cs,LoadWebSiteConfig,The length of the statement  "		albumlist.Text += "<div class='mo' id='m" + i + "' flag='f" + i + "'><h1><input type='checkbox' name='aid' " + (isCheck ? "checked" : "") + " value='" + data_albumvisitor ["albumid"] + "'>" + data_albumvisitor ["title"] + "</h1></div>\n"; " is 238.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text = "<select onchange=\"document.getElementById('" + targetId + "').value=this.value\">\n<option value=\"\">��ѡ��</option>\n"; " is 136.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"51200\">50K</option>\n<option value=\"102400\">100K</option>\n<option value=\"153600\">150K</option>\n"; " is 136.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"204800\">200K</option>\n<option value=\"256000\">250K</option>\n<option value=\"307200\">300K</option>\n"; " is 138.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"358400\">350K</option>\n<option value=\"409600\">400K</option>\n<option value=\"512000\">500K</option>\n"; " is 138.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"614400\">600K</option>\n<option value=\"716800\">700K</option>\n<option value=\"819200\">800K</option>\n"; " is 138.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"921600\">900K</option>\n<option value=\"1024000\">1M</option>\n<option value=\"2048000\">2M</option>\n"; " is 136.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"4096000\">4M</option>\n<option value=\"6144000\">6M</option>\n<option value=\"8192000\">8M</option>\n"; " is 135.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"10240000\">10M</option>\n<option value=\"12288000\">12M</option>\n<option value=\"14336000\">14M</option>\n"; " is 141.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"16384000\">16M</option>\n<option value=\"18432000\">18M</option>\n<option value=\"20480000\">20M</option>\n"; " is 141.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,GetTD,The length of the statement  "	select.Text += "<option value=\"22528000\">22M</option>\n<option value=\"24576000\">24M</option>\n<option value=\"26624000\">26M</option>\n"; " is 141.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,SaveCombinationInfo_Click,The length of the statement  "					base.RegisterStartupScript (""' "<script>alert('�������'����Сֻ����0����������');window.location.href='album_config.aspx';</script>"); " is 133.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,SaveCombinationInfo_Click,The length of the statement  "				Discuz.Entity.UserGroupInfo __usergroupinfo = AdminUserGroups.AdminGetUserGroupInfo (Convert.ToInt32 (dr ["groupid"].ToString ())); " is 131.
Long Statement,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,SaveCombinationInfo_Click,The length of the statement  "		base.RegisterStartupScript (""' "<script>alert('����������������'����');window.location.href='album_config.aspx';</script>"); " is 125.
Long Statement,Discuz.Album.Admin,Manage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\manage.aspx.cs,DeleteApply_Click,The length of the statement  "		                PhotoInfoCollection _spacephotoinfoarray = BlogProvider.GetSpacePhotosInfo(DbProvider.GetInstance().GetSpacePhotoByAlbumID(int.Parse(id)));" is 139.
Long Statement,Discuz.Album.Admin,Manage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\manage.aspx.cs,DeleteApply_Click,The length of the statement  "		Discuz.Common.Generic.List<PhotoInfo> _spacephotoinfoarray = DTOProvider.GetSpacePhotosInfo (DbProvider.GetInstance ().GetSpacePhotoByAlbumID (int.Parse (id))); " is 160.
Long Statement,Discuz.Album.Admin,PhotoAggset,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\photoaggset.aspx.cs,LoadWebSiteConfig,The length of the statement  "		photolist.Text += "<div class='mo' id='m" + i + "' flag='f" + i + "'><h1><input type='checkbox' name='pid' " + (isCheck ? "checked" : "") + " value='" + data_photovisitor ["photoid"].ToString () + "'>" + data_photovisitor ["title"].ToString () + "</h1></div>\n"; " is 262.
Long Statement,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The length of the statement  "	if (attachs.Length + 2 == albumsid.Length)//验证提交上来的albums数据是否是合法可用数据，因为albums数据提交逗号数组头尾各有一个0，则合法数据位附件list长度加2==albums元素个数 " is 121.
Long Statement,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The length of the statement  "			if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) { " is 160.
Long Statement,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,GetAlbumJsonData,The length of the statement  "			builder.AppendFormat (@"{{""photoid"":{0}'""userid"":{1}'""title"":""{2}""'""image"":""{3}""'""square"":""{4}""'""thumbnail"":""{5}""}}'"' dr ["photoid"]' dr ["userid"]' dr ["title"].ToString ().Trim ().Replace ("\""' "\\\"")' dr ["filename"].ToString ().Trim ()' Globals.GetSquareImage (dr ["filename"].ToString ().Trim ())' Globals.GetThumbnailImage (dr ["filename"].ToString ().Trim ())); " is 391.
Long Statement,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,GetAlbumJsonData,The length of the statement  "			builder.AppendFormat (@"{{""photoid"":{0}'""userid"":{1}'""title"":""{2}""'""image"":""{3}""'""square"":""{4}""'""thumbnail"":""{5}""}}'"' dr ["photoid"]' dr ["userid"]' dr ["title"].ToString ().Trim ().Replace ("\""' "\\\"")' BaseConfigs.GetForumPath + dr ["filename"].ToString ().Trim ()' Globals.GetSquareImage (BaseConfigs.GetForumPath + dr ["filename"].ToString ().Trim ())' Globals.GetThumbnailImage (BaseConfigs.GetForumPath + dr ["filename"].ToString ().Trim ())); " is 472.
Long Statement,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The length of the statement  "	if (Common.Utils.InArray (Path.GetExtension (uploadFile.FileName).ToLower ()' ".jpg'.jpeg'.gif'.png") && createThumbnailImage) { " is 128.
Long Statement,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The length of the statement  "			Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150); " is 141.
Long Statement,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The length of the statement  "			Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100); " is 130.
Long Statement,Discuz.Album.Data,DTOProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\DTOProvider.cs,GetAlbumCategory,The length of the statement  "	Discuz.Common.Generic.List<AlbumCategoryInfo> acic = cache.RetrieveObject ("/Space/AlbumCategory") as Discuz.Common.Generic.List<AlbumCategoryInfo>; " is 148.
Long Statement,Discuz.Album.Data,DTOProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\DTOProvider.cs,GetAlbumRankList,The length of the statement  "	Discuz.Common.Generic.List<AlbumInfo> aic = DNTCache.GetCacheService ().RetrieveObject (string.Format ("/Photo/AlbumRank{0}"' albumcount)) as Discuz.Common.Generic.List<AlbumInfo>; " is 180.
Long Statement,Discuz.Album.Data,DTOProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\DTOProvider.cs,GetPhotoRankList,The length of the statement  "	Discuz.Common.Generic.List<PhotoInfo> pic = DNTCache.GetCacheService ().RetrieveObject (string.Format ("/Photo/PhotoRank{0}-{1}"' type' photocount)) as Discuz.Common.Generic.List<PhotoInfo>; " is 190.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,AddAlbumCategory,The length of the statement  "	string commandText = string.Format (@"INSERT INTO [{0}albumcategories]([title]' [description]' [albumcount]' [displayorder]) VALUES(@title' @description' 0' @displayorder)"' BaseConfigs.GetTablePrefix); " is 202.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdateAlbumCategory,The length of the statement  "	string commandText = string.Format (@"UPDATE [{0}albumcategories] SET [title]=@title' [description]=@description' [displayorder]=@displayorder WHERE [albumcateid]=@albumcateid"' BaseConfigs.GetTablePrefix); " is 206.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteAlbumCategory,The length of the statement  "	string commandText = string.Format (@"DELETE FROM [{0}albumcategories] WHERE [albumcateid]=@albumcateid"' BaseConfigs.GetTablePrefix); " is 134.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpaceAlbumsCount,The length of the statement  "		return (int)DbHelper.ExecuteScalar (CommandType.Text' "SELECT COUNT([albumid]) FROM [" + BaseConfigs.GetTablePrefix + "albums] WHERE [userid]=@userid"' DbHelper.MakeInParam ("@userid"' (DbType)SqlDbType.Int' 4' userid)); " is 220.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpaceAlbumsList,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} * FROM [{1}albums] WHERE [userid]=@userid ORDER BY [albumid] DESC"' pageSize' BaseConfigs.GetTablePrefix); " is 151.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpaceAlbumsList,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} * FROM [{1}albums] WHERE [albumid] < (SELECT min([albumid])  FROM " + "(SELECT TOP {2} [albumid] FROM [{1}albums] WHERE [userid]=@userid ORDER BY [albumid] DESC) AS tblTmp ) AND [userid]=@userid ORDER BY [albumid] DESC"' pageSize' BaseConfigs.GetTablePrefix' pageTop); " is 313.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpaceAlbumsList,The length of the statement  "	return DbHelper.ExecuteReader (CommandType.StoredProcedure' string.Format ("{0}getalbumlist"' BaseConfigs.GetTablePrefix)' parms); " is 130.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpaceAlbumsListCount,The length of the statement  "	string commandText = string.Format ("SELECT COUNT(1) FROM [{0}albums] WHERE [imgcount]>0 "' BaseConfigs.GetTablePrefix); " is 120.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpaceAlbumById,The length of the statement  "	return DbHelper.ExecuteReader (CommandType.Text' "SELECT * FROM [" + BaseConfigs.GetTablePrefix + "albums] WHERE [albumid]=" + albumId); " is 136.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpaceAlbumByUserId,The length of the statement  "	return DbHelper.ExecuteDataset (CommandType.Text' "SELECT * FROM [" + BaseConfigs.GetTablePrefix + "albums] WHERE [userid]=" + userid).Tables [0]; " is 146.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,AddSpaceAlbum,The length of the statement  "	string commandText = String.Format ("INSERT INTO [{0}albums] ([userid]' [username]' [albumcateid]' [title]' [description]' [password]' [type]) VALUES ( @userid' @username' @albumcateid' @title' @description' @password' @type)"' BaseConfigs.GetTablePrefix); " is 256.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SaveSpaceAlbum,The length of the statement  "	string commandText = String.Format ("UPDATE [{0}albums] SET [albumcateid] = @albumcateid' [title] = @title' [description] = @description' [password] = @password' [imgcount] = @imgcount' [logo] = @logo' [type] = @type WHERE [albumid] = @albumid"' BaseConfigs.GetTablePrefix); " is 274.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdateAlbumViews,The length of the statement  "	string commandText = string.Format ("UPDATE [{0}albums] SET [views]=[views]+1 WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix); " is 133.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteSpaceAlbum,The length of the statement  "	string commandText = string.Format ("DELETE FROM [{0}albums] WHERE [albumid]={1} AND [userid]={2}"' BaseConfigs.GetTablePrefix' albumId' userid); " is 145.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumCategory,The length of the statement  "	string commandText = string.Format ("SELECT * FROM [{0}albumcategories] ORDER BY [displayorder]"' BaseConfigs.GetTablePrefix); " is 126.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoListByUserId,The length of the statement  "	string commandText = string.Format ("SELECT TOP {0} [p].* FROM [{1}photos] [p]'[{1}albums] [a] WHERE [a].[albumid] = [p].[albumid] AND [a].[type]=0 AND [p].[userid]=@userid"' count' BaseConfigs.GetTablePrefix); " is 210.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoRankList,The length of the statement  "	string commandText = string.Format ("SELECT TOP {0} [p].* FROM [{1}photos] [p]'[{1}albums] [a] WHERE [a].[albumid] = [p].[albumid] AND [a].[type]=0"' photocount' BaseConfigs.GetTablePrefix); " is 190.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetFocusPhotoList,The length of the statement  "	string commandText = string.Format ("SELECT TOP {0} [p].* FROM [{1}photos] [p]'[{1}albums] [a] WHERE DATEDIFF(d' [postdate]' getdate()) < @validDays AND [a].[albumid] = [p].[albumid] AND [a].[type]=0{2}"' focusphotocount' BaseConfigs.GetTablePrefix' uid > 1 ? " AND [p].[userid] =@uid" : string.Empty); " is 302.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetRecommendPhotoList,The length of the statement  "	string commandText = string.Format ("SELECT [p].* FROM [{0}photos] [p]'[{0}albums] [a] WHERE [p].[albumid] = [a].[albumid] AND [a].[type]=0 AND [p].[photoid] IN ({1}) ORDER BY CHARINDEX(CONVERT(VARCHAR(8)'[p].[photoid])''{1}')"' BaseConfigs.GetTablePrefix' idlist); " is 265.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,AddSpacePhoto,The length of the statement  "	string commandText = String.Format ("INSERT INTO [{0}photos] ([userid]' [username]' [title]' [albumid]' [filename]' [attachment]' [filesize]' [description]'[isattachment]'[commentstatus]' [tagstatus]) VALUES ( @userid' @username' @title' @albumid' @filename' @attachment' @filesize' @description'@isattachment' @commentstatus' @tagstatus);SELECT SCOPE_IDENTITY()"' BaseConfigs.GetTablePrefix); " is 393.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdatePhotoInfo,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("UPDATE [{0}photos] SET [title]=@title' [description]=@description' [commentstatus]=@commentstatus' [tagstatus]=@tagstatus WHERE [photoid]=@photoid"' BaseConfigs.GetTablePrefix)' parms); " is 245.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpacePhotoByAlbumID,The length of the statement  "	return DbHelper.ExecuteDataset (CommandType.Text' String.Format ("SELECT * FROM [{0}photos] WHERE [albumid] = @albumid"' BaseConfigs.GetTablePrefix)' parms).Tables [0]; " is 168.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByID,The length of the statement  "		commandText = "SELECT TOP 1 * FROM [{0}photos] WHERE [albumid] = @albumid AND [photoid]<@photoid ORDER BY [photoid] DESC"; " is 122.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByID,The length of the statement  "		commandText = "SELECT TOP 1 * FROM [{0}photos] WHERE [albumid] = @albumid AND [photoid]>@photoid ORDER BY [photoid] ASC"; " is 121.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdatePhotoViews,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("UPDATE [{0}photos] SET [views]=[views]+1 WHERE [photoid]=@photoid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@photoid"' (DbType)SqlDbType.Int' 4' photoid)); " is 227.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdatePhotoComments,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("UPDATE [{0}photos] SET [comments]=[comments]+@count WHERE [photoid]=@photoid"' BaseConfigs.GetTablePrefix)' parms); " is 175.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpacePhotosCount,The length of the statement  "		return (int)DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT COUNT([photoid]) FROM [{0}photos] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid)); " is 237.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpacePhotosList,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} * FROM [{1}photos] WHERE [userid]=@userid AND [albumid]=@albumid ORDER BY [photoid] ASC"' pageSize' BaseConfigs.GetTablePrefix); " is 173.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpacePhotosList,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} * FROM [{1}photos] WHERE [photoid] > (SELECT MAX([photoid])  FROM (SELECT TOP {2} [photoid] FROM [{1}photos] WHERE " + "[userid]=@userid AND [albumid]=@albumid ORDER BY [photoid] ASC) AS tblTmp ) AND [userid]=@userid AND [albumid]=@albumid ORDER BY [photoid] ASC"' pageSize' BaseConfigs.GetTablePrefix' pageTop); " is 357.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpacePhotosList,The length of the statement  "	return DbHelper.ExecuteDataset (CommandType.Text' string.Format ("SELECT * FROM [{0}photos] WHERE [albumid]=@albumid ORDER BY [photoid] ASC"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid)).Tables [0]; " is 252.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteSpacePhotoByIDList,The length of the statement  "	IDataReader reader = DbHelper.ExecuteReader (CommandType.Text' "SELECT [filename]'[isattachment] FROM [" + BaseConfigs.GetTablePrefix + "photos] WHERE [photoid] IN( " + photoidlist + " ) AND [userid]=" + userid' null); " is 218.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteSpacePhotoByIDList,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("DELETE FROM [{0}photos] WHERE [photoid] IN ({1}) AND [userid]={2}"' BaseConfigs.GetTablePrefix' photoidlist' userid)); " is 178.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,ChangeAlbum,The length of the statement  "	string commandText = string.Format ("UPDATE [{0}photos] SET albumid={1} WHERE photoid IN ({2}) AND [userid]={3}"' BaseConfigs.GetTablePrefix' targetAlbumId' photoIdList' userid); " is 178.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoSizeByUserid,The length of the statement  "	string commandText = string.Format ("SELECT ISNULL(SUM(filesize)' 0) AS [filesize] FROM [{0}photos] WHERE userid={1}"' BaseConfigs.GetTablePrefix' userid); " is 155.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpacePhotoCountByAlbumId,The length of the statement  "	return TypeConverter.ObjectToInt (DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT COUNT(1) FROM [{0}photos] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' parm)' 0); " is 191.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotosByAlbumid,The length of the statement  "	return DbHelper.ExecuteDataset (CommandType.Text' string.Format ("SELECT [photoid]' [userid]' [username]' [title]' [filename] FROM [{0}photos] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' parm).Tables [0]; " is 216.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCommentCollection,The length of the statement  "	string commandText = string.Format ("SELECT * FROM [{0}photocomments] WHERE [photoid]={1} ORDER BY [commentid] ASC"' BaseConfigs.GetTablePrefix' photoid); " is 154.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,CreatePhotoComment,The length of the statement  "	string commandText = string.Format ("INSERT INTO [{0}photocomments]([userid]' [username]' [photoid]' [postdatetime]' [ip]' [content]) VALUES(@userid' @username' @photoid' @postdatetime' @ip' @content);SELECT SCOPE_IDENTITY()"' BaseConfigs.GetTablePrefix); " is 255.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeletePhotoComment,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("DELETE FROM [{0}photocomments] WHERE [commentid]={1}"' BaseConfigs.GetTablePrefix' commentid)); " is 155.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSearchAlbumList,The length of the statement  "	string commandText = string.Format ("SELECT TOP {1} [{0}albums].[albumid]' [{0}albums].[title]' [{0}albums].[username]' [{0}albums].[userid]' [{0}albums].[createdatetime]' [{0}albums].[imgcount]' [{0}albums].[views]' [{0}albums].[logo] '[{0}albumcategories].[albumcateid]'[{0}albumcategories].[title] AS [categorytitle] FROM [{0}albums] LEFT JOIN [{0}albumcategories] ON [{0}albumcategories].[albumcateid] = [{0}albums].[albumcateid] WHERE [{0}albums].[albumid] IN({2}) ORDER BY CHARINDEX(CONVERT(VARCHAR(8)'[{0}albums].[albumid])''{2}')"' BaseConfigs.GetTablePrefix' pagesize' albumids); " is 588.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,CreatePhotoTags,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.StoredProcedure' string.Format ("{0}createphototags"' BaseConfigs.GetTablePrefix)' parms); " is 128.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetHotTagsListForPhoto,The length of the statement  "	return DbHelper.ExecuteReader (CommandType.Text' string.Format ("SELECT TOP {0} * FROM [{1}tags] WHERE [pcount] > 0 ORDER BY [pcount] DESC'[orderid]"' count' BaseConfigs.GetTablePrefix)); " is 187.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCountWithSameTag,The length of the statement  "	string commandText = string.Format ("SELECT COUNT(1) FROM [{0}phototags] AS [pt]'[{0}photos] AS [p]'[{0}albums] AS [a] WHERE [pt].[tagid] = @tagid AND [p].[photoid] = [pt].[photoid] AND [p].[albumid] = [a].[albumid] AND [a].[type]=0"' BaseConfigs.GetTablePrefix); " is 263.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetTagsListByPhotoId,The length of the statement  "	return DbHelper.ExecuteReader (CommandType.Text' string.Format ("SELECT [{0}tags].* FROM [{0}tags]' [{0}phototags] WHERE [{0}phototags].[tagid] = [{0}tags].[tagid] AND [{0}phototags].[photoid] = @photoid ORDER BY [orderid]"' BaseConfigs.GetTablePrefix)' parm); " is 260.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} *  FROM [{1}albums] WHERE {2} {3} ORDER BY [albumid] DESC"' pageSize' BaseConfigs.GetTablePrefix' strisshowall' condition); " is 168.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} * FROM [{1}albums] WHERE [albumid]<(SELECT MIN([albumid]) FROM (SELECT TOP {2} [albumid] FROM [{1}albums] WHERE  {3} {4} ORDER BY [albumid] DESC) AS tblTmp) AND {3} {4} ORDER BY [albumid] DESC"' pageSize' BaseConfigs.GetTablePrefix' pageTop' strisshowall' condition); " is 312.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumLitByAlbumidList,The length of the statement  "	string commandText = string.Format ("SELECT * FROM [{0}albums] WHERE [type] = 0 AND [albumid] IN ({1}) ORDER BY CHARINDEX(CONVERT(VARCHAR(8)'[albumid])''{1}')"' BaseConfigs.GetTablePrefix' albumlist); " is 200.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetUidByAlbumid,The length of the statement  "	return TypeConverter.ObjectToInt (DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT [userid] FROM [{0}albums] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid))); " is 252.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCountByCondition,The length of the statement  "	string commandText = string.Format ("SELECT COUNT(1) FROM [{0}photos] p LEFT JOIN [{0}albums] a ON p.[albumid]=a.[albumid] WHERE a.[type]=0"' BaseConfigs.GetTablePrefix); " is 170.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByCondition,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} p.* FROM [{1}photos] p LEFT JOIN [{1}albums] a ON p.[albumid]=a.[albumid] WHERE a.[type]=0 {2} ORDER BY p.[photoid] DESC"' pageSize' BaseConfigs.GetTablePrefix' condition); " is 217.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByCondition,The length of the statement  "		commandText = string.Format ("SELECT TOP {0} p.* FROM [{1}photos] p LEFT JOIN [{1}albums] a ON p.[albumid]=a.[albumid] WHERE a.[type]=0 AND p.[photoid]<(SELECT MIN([photoid]) FROM (SELECT TOP {2}" + " p.[photoid] FROM [{1}photos] p LEFT JOIN [{1}albums] a ON p.[albumid]=a.[albumid] WHERE a.[type]=0 {3} ORDER BY p.[photoid] DESC) AS tblTmp) {3} ORDER BY p.[photoid] DESC"' pageSize' BaseConfigs.GetTablePrefix' pageTop' condition); " is 432.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,The length of the statement  "	string commandText = string.Format ("SELECT TOP {0} * FROM [{1}albums] WHERE DATEDIFF(d' [createdatetime]' getdate()) < @vailddays AND [imgcount]>0 AND [type]=0"' focusphotocount' BaseConfigs.GetTablePrefix); " is 208.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeletePhotoTags,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.StoredProcedure' string.Format ("{0}deletephototags"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@photoid"' (DbType)SqlDbType.Int' 4' photoid)); " is 191.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteAll,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("DELETE FROM [{0}photocomments] WHERE [userid]=@userid"' BaseConfigs.GetTablePrefix)' parm); " is 151.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteAll,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("DELETE FROM [{0}photos] WHERE [userid]=@userid"' BaseConfigs.GetTablePrefix)' parm); " is 144.
Long Statement,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteAll,The length of the statement  "	DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("DELETE FROM [{0}albums] WHERE [userid]=@userid"' BaseConfigs.GetTablePrefix)' parm); " is 144.
Long Statement,Discuz.Album.Pages,albumindex,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\albumindex.cs,ShowPage,The length of the statement  "	focusphotolist = AggregationFacade.AlbumAggregation.GetFocusPhotoList (photoconfig.Focusphotoshowtype' photoconfig.Focusphotocount' photoconfig.Focusphotodays); " is 160.
Long Statement,Discuz.Album.Pages,albumindex,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\albumindex.cs,ShowPage,The length of the statement  "	focusalbumlist = AggregationFacade.AlbumAggregation.GetAlbumList (photoconfig.Focusalbumshowtype' photoconfig.Focusalbumcount' photoconfig.Focusalbumdays); " is 155.
Long Statement,Discuz.Album.Pages,albumindex,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\albumindex.cs,ShowPage,The length of the statement  "		recentupdatespaceList = AggregationFacade.SpaceAggregation.GetRecentUpdateSpaceList (AggregationConfig.GetConfig ().RecentUpdateSpaceAggregationListCount); " is 155.
Long Statement,Discuz.Album.Pages,showalbum,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showalbum.cs,ShowPage,The length of the statement  "	photolist = DTOProvider.GetSpacePhotosInfo (DbProvider.GetInstance ().SpacePhotosList (pageSize' currentpage' album.Userid' album.Albumid)); " is 140.
Long Statement,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SavePhotoComment,The length of the statement  "	HttpContext.Current.Response.Redirect (string.Format ("{0}showphoto.aspx?photoid={1}&reply=1#comments"' BaseConfigs.GetForumPath' photo.Photoid)); " is 146.
Long Statement,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SendPhotoComment,The length of the statement  "		noticeinfo.Note = Utils.HtmlEncode (string.Format ("<a href=\"userinfo.aspx?userid={0}\">{1}</a> 评论了您的{2}--\"{3}\" ' 请<a href =\"showphoto.aspx?photoid={4}&reply={5}#comments\">点击这里</a>查看详情."' pcomment.Userid' pcomment.Username' config.Albumname' album.Title' pcomment.Photoid' pcomment.Commentid)); " is 299.
Long Statement,Discuz.Album.Pages,showphotolist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphotolist.cs,ShowPage,The length of the statement  "	recentupdatespaceList = AggregationFacade.SpaceAggregation.GetRecentUpdateSpaceList (AggregationConfig.GetConfig ().RecentUpdateSpaceAggregationListCount); " is 155.
Long Statement,Discuz.Album.Pages,usercpalbummanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpalbummanage.cs,ShowPage,The length of the statement  "		singleAlbumInfo ["Title"] = singleAlbumInfo ["Title"].ToString ().Trim ().Replace ("\""' "&quot;").Replace ("'"' "&#39;"); " is 122.
Long Statement,Discuz.Album.Pages,usercpalbummanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpalbummanage.cs,DeleteAlbumInfo,The length of the statement  "	List<PhotoInfo> _spacephotoinfoarray = DTOProvider.GetSpacePhotosInfo (DbProvider.GetInstance ().GetSpacePhotoByAlbumID (albumid)); " is 131.
Long Statement,Discuz.Album.Pages,usercpphotomanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotomanage.cs,ShowPage,The length of the statement  "			singlePhotoInfo ["TFileName"] = Globals.GetThumbnailImage (BaseConfigs.GetForumPath + singlePhotoInfo ["FileName"].ToString ().Trim ()); " is 136.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "	freephotosize = UserGroups.GetUserGroupInfo (usergroupid).Maxspacephotosize - Data.DbProvider.GetInstance ().GetPhotoSizeByUserid (userid); " is 139.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "					uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"); " is 146.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename; " is 152.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach); " is 151.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach); " is 179.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach); " is 176.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"); " is 146.
Long Statement,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The length of the statement  "				spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true); " is 170.
Complex Conditional,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The conditional expression  "attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")"  is complex.
Complex Conditional,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The conditional expression  "fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg""  is complex.
Empty Catch Block,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The method has an empty catch block.
Empty Catch Block,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The method has an empty catch block.
Empty Catch Block,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeleteSpacePhotoByIDList,The method has an empty catch block.
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxAlbumList,The following statement contains a magic number: dt = DbProvider.GetInstance ().GetAlbumListByCondition (postusername' title' description' startdate' enddate' 12' currentpage' isShowPrivateAlbum);  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxAlbumList,The following statement contains a magic number: pagelink = AjaxPagination (recordcount' 12' currentpage);  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,AjaxAlbumList,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxalbumlist.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPhotoInfo,The following statement contains a magic number: dt = DbProvider.GetInstance ().GetPhotoByCondition (photousernamelist' keylist' startdate' enddate' 12' currentpage);  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPhotoInfo,The following statement contains a magic number: pagelink = AjaxPagination (recordcount' 12' currentpage);  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: startcount = (currentpage + 5) > allcurrentpage ? allcurrentpage - 9 : currentpage - 4;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,AjaxPhotoInfo,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\ajaxphotoinfo.ascx.cs,AjaxPagination,The following statement contains a magic number: endcount = currentpage < 5 ? 10 : currentpage + 5;  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {  	TextBox t = (TextBox)e.Item.Cells [1].Controls [0];  	t.Width = 200;  	t = (TextBox)e.Item.Cells [2].Controls [0];  	t.Width = 40;  	t = (TextBox)e.Item.Cells [3].Controls [0];  	t.Width = 400;  }  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {  	TextBox t = (TextBox)e.Item.Cells [1].Controls [0];  	t.Width = 200;  	t = (TextBox)e.Item.Cells [2].Controls [0];  	t.Width = 40;  	t = (TextBox)e.Item.Cells [3].Controls [0];  	t.Width = 400;  }  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {  	TextBox t = (TextBox)e.Item.Cells [1].Controls [0];  	t.Width = 200;  	t = (TextBox)e.Item.Cells [2].Controls [0];  	t.Width = 40;  	t = (TextBox)e.Item.Cells [3].Controls [0];  	t.Width = 400;  }  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {  	TextBox t = (TextBox)e.Item.Cells [1].Controls [0];  	t.Width = 200;  	t = (TextBox)e.Item.Cells [2].Controls [0];  	t.Width = 40;  	t = (TextBox)e.Item.Cells [3].Controls [0];  	t.Width = 400;  }  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {  	TextBox t = (TextBox)e.Item.Cells [1].Controls [0];  	t.Width = 200;  	t = (TextBox)e.Item.Cells [2].Controls [0];  	t.Width = 40;  	t = (TextBox)e.Item.Cells [3].Controls [0];  	t.Width = 400;  }  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: t.Width = 200;  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: t = (TextBox)e.Item.Cells [2].Controls [0];  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: t.Width = 40;  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: t = (TextBox)e.Item.Cells [3].Controls [0];  
Magic Number,Discuz.Album.Admin,CategoryManage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\categorymanage.aspx.cs,DataGrid1_ItemDataBound,The following statement contains a magic number: t.Width = 400;  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: foreach (DataRow dr in dt.Rows) {  	if (i % 2 == 1) {  		tr = new HtmlTableRow ();  	}  	HtmlTableCell td = new HtmlTableCell ("td");  	td.Controls.Add (new LiteralControl (dr ["grouptitle"].ToString ()));  	tr.Cells.Add (td);  	td = new HtmlTableCell ("td");  	Discuz.Control.TextBox tb = new Discuz.Control.TextBox ();  	tb.ID = "maxspacephotosize" + dr ["groupid"].ToString ();  	tb.Size = 10;  	tb.MaxLength = 9;  	tb.Text = dr ["maxspacephotosize"].ToString ();  	tb.RequiredFieldType = "����У��";  	td.Controls.Add (tb);  	tr.Cells.Add (td);  	tr.Cells.Add (GetTD ("maxspacephotosize" + dr ["groupid"].ToString ()));  	groupphotosize.Rows.Add (tr);  	i++;  }  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: foreach (DataRow dr in dt.Rows) {  	if (i % 2 == 1) {  		tr = new HtmlTableRow ();  	}  	HtmlTableCell td = new HtmlTableCell ("td");  	td.Controls.Add (new LiteralControl (dr ["grouptitle"].ToString ()));  	tr.Cells.Add (td);  	td = new HtmlTableCell ("td");  	Discuz.Control.TextBox tb = new Discuz.Control.TextBox ();  	tb.ID = "maxspacephotosize" + dr ["groupid"].ToString ();  	tb.Size = 10;  	tb.MaxLength = 9;  	tb.Text = dr ["maxspacephotosize"].ToString ();  	tb.RequiredFieldType = "����У��";  	td.Controls.Add (tb);  	tr.Cells.Add (td);  	tr.Cells.Add (GetTD ("maxspacephotosize" + dr ["groupid"].ToString ()));  	groupphotosize.Rows.Add (tr);  	i++;  }  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: foreach (DataRow dr in dt.Rows) {  	if (i % 2 == 1) {  		tr = new HtmlTableRow ();  	}  	HtmlTableCell td = new HtmlTableCell ("td");  	td.Controls.Add (new LiteralControl (dr ["grouptitle"].ToString ()));  	tr.Cells.Add (td);  	td = new HtmlTableCell ("td");  	Discuz.Control.TextBox tb = new Discuz.Control.TextBox ();  	tb.ID = "maxspacephotosize" + dr ["groupid"].ToString ();  	tb.Size = 10;  	tb.MaxLength = 9;  	tb.Text = dr ["maxspacephotosize"].ToString ();  	tb.RequiredFieldType = "����У��";  	td.Controls.Add (tb);  	tr.Cells.Add (td);  	tr.Cells.Add (GetTD ("maxspacephotosize" + dr ["groupid"].ToString ()));  	groupphotosize.Rows.Add (tr);  	i++;  }  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: if (i % 2 == 1) {  	tr = new HtmlTableRow ();  }  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: tb.Size = 10;  
Magic Number,Discuz.Album.Admin,AlbumConfig,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Admin\albumconfig.aspx.cs,BindUserGorupMaxspacephotosize,The following statement contains a magic number: tb.MaxLength = 9;  
Magic Number,Discuz.Album,AlbumFeeds,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumFeeds.cs,GetPhotoRss,The following statement contains a magic number: cache.AddObject ("/PHOTO/RSS/Index"' rssBuilder.ToString ()' ttl * 60);  
Magic Number,Discuz.Album,AlbumFeeds,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumFeeds.cs,GetPhotoRss,The following statement contains a magic number: cache.AddObject ("/PHOTO/RSS/Photo" + uid' rssBuilder.ToString ()' ttl * 60);  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs.Length + 2 == albumsid.Length)//验证提交上来的albums数据是否是合法可用数据，因为albums数据提交逗号数组头尾各有一个0，则合法数据位附件list长度加2==albums元素个数   {  	for (int i = 0; i < attachs.Length; i++) {  		if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  			//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  			string aid = albumsid [i + 1];  			if (aid != "0") {  				if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  					string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  					string extension = Path.GetExtension (filename);  					Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  					Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  					PhotoInfo photoinfo = new PhotoInfo ();  					photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  					photoinfo.Attachment = attachs [i].Attachment;  					photoinfo.Filesize = (int)attachs [i].Filesize;  					photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  					photoinfo.Description = attachs [i].Description;  					photoinfo.Albumid = int.Parse (aid);  					photoinfo.Userid = userid;  					photoinfo.Username = username;  					photoinfo.Views = 0;  					photoinfo.Commentstatus = 0;  					photoinfo.Tagstatus = 0;  					photoinfo.Comments = 0;  					photoinfo.IsAttachment = 1;  					DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  					AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  					albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  					DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  					currentphotisize += (int)attachs [i].Filesize;  				}  				else {  					return "相册空间不足'可能有图片未能加入相册";  				}  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs.Length + 2 == albumsid.Length)//验证提交上来的albums数据是否是合法可用数据，因为albums数据提交逗号数组头尾各有一个0，则合法数据位附件list长度加2==albums元素个数   {  	for (int i = 0; i < attachs.Length; i++) {  		if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  			//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  			string aid = albumsid [i + 1];  			if (aid != "0") {  				if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  					string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  					string extension = Path.GetExtension (filename);  					Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  					Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  					PhotoInfo photoinfo = new PhotoInfo ();  					photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  					photoinfo.Attachment = attachs [i].Attachment;  					photoinfo.Filesize = (int)attachs [i].Filesize;  					photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  					photoinfo.Description = attachs [i].Description;  					photoinfo.Albumid = int.Parse (aid);  					photoinfo.Userid = userid;  					photoinfo.Username = username;  					photoinfo.Views = 0;  					photoinfo.Commentstatus = 0;  					photoinfo.Tagstatus = 0;  					photoinfo.Comments = 0;  					photoinfo.IsAttachment = 1;  					DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  					AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  					albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  					DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  					currentphotisize += (int)attachs [i].Filesize;  				}  				else {  					return "相册空间不足'可能有图片未能加入相册";  				}  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs.Length + 2 == albumsid.Length)//验证提交上来的albums数据是否是合法可用数据，因为albums数据提交逗号数组头尾各有一个0，则合法数据位附件list长度加2==albums元素个数   {  	for (int i = 0; i < attachs.Length; i++) {  		if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  			//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  			string aid = albumsid [i + 1];  			if (aid != "0") {  				if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  					string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  					string extension = Path.GetExtension (filename);  					Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  					Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  					PhotoInfo photoinfo = new PhotoInfo ();  					photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  					photoinfo.Attachment = attachs [i].Attachment;  					photoinfo.Filesize = (int)attachs [i].Filesize;  					photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  					photoinfo.Description = attachs [i].Description;  					photoinfo.Albumid = int.Parse (aid);  					photoinfo.Userid = userid;  					photoinfo.Username = username;  					photoinfo.Views = 0;  					photoinfo.Commentstatus = 0;  					photoinfo.Tagstatus = 0;  					photoinfo.Comments = 0;  					photoinfo.IsAttachment = 1;  					DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  					AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  					albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  					DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  					currentphotisize += (int)attachs [i].Filesize;  				}  				else {  					return "相册空间不足'可能有图片未能加入相册";  				}  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs.Length + 2 == albumsid.Length)//验证提交上来的albums数据是否是合法可用数据，因为albums数据提交逗号数组头尾各有一个0，则合法数据位附件list长度加2==albums元素个数   {  	for (int i = 0; i < attachs.Length; i++) {  		if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  			//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  			string aid = albumsid [i + 1];  			if (aid != "0") {  				if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  					string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  					string extension = Path.GetExtension (filename);  					Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  					Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  					PhotoInfo photoinfo = new PhotoInfo ();  					photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  					photoinfo.Attachment = attachs [i].Attachment;  					photoinfo.Filesize = (int)attachs [i].Filesize;  					photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  					photoinfo.Description = attachs [i].Description;  					photoinfo.Albumid = int.Parse (aid);  					photoinfo.Userid = userid;  					photoinfo.Username = username;  					photoinfo.Views = 0;  					photoinfo.Commentstatus = 0;  					photoinfo.Tagstatus = 0;  					photoinfo.Comments = 0;  					photoinfo.IsAttachment = 1;  					DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  					AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  					albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  					DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  					currentphotisize += (int)attachs [i].Filesize;  				}  				else {  					return "相册空间不足'可能有图片未能加入相册";  				}  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: for (int i = 0; i < attachs.Length; i++) {  	if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  		//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  		string aid = albumsid [i + 1];  		if (aid != "0") {  			if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  				string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  				string extension = Path.GetExtension (filename);  				Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  				Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  				PhotoInfo photoinfo = new PhotoInfo ();  				photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  				photoinfo.Attachment = attachs [i].Attachment;  				photoinfo.Filesize = (int)attachs [i].Filesize;  				photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  				photoinfo.Description = attachs [i].Description;  				photoinfo.Albumid = int.Parse (aid);  				photoinfo.Userid = userid;  				photoinfo.Username = username;  				photoinfo.Views = 0;  				photoinfo.Commentstatus = 0;  				photoinfo.Tagstatus = 0;  				photoinfo.Comments = 0;  				photoinfo.IsAttachment = 1;  				DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  				AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  				albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  				DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  				currentphotisize += (int)attachs [i].Filesize;  			}  			else {  				return "相册空间不足'可能有图片未能加入相册";  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: for (int i = 0; i < attachs.Length; i++) {  	if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  		//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  		string aid = albumsid [i + 1];  		if (aid != "0") {  			if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  				string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  				string extension = Path.GetExtension (filename);  				Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  				Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  				PhotoInfo photoinfo = new PhotoInfo ();  				photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  				photoinfo.Attachment = attachs [i].Attachment;  				photoinfo.Filesize = (int)attachs [i].Filesize;  				photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  				photoinfo.Description = attachs [i].Description;  				photoinfo.Albumid = int.Parse (aid);  				photoinfo.Userid = userid;  				photoinfo.Username = username;  				photoinfo.Views = 0;  				photoinfo.Commentstatus = 0;  				photoinfo.Tagstatus = 0;  				photoinfo.Comments = 0;  				photoinfo.IsAttachment = 1;  				DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  				AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  				albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  				DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  				currentphotisize += (int)attachs [i].Filesize;  			}  			else {  				return "相册空间不足'可能有图片未能加入相册";  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: for (int i = 0; i < attachs.Length; i++) {  	if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  		//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  		string aid = albumsid [i + 1];  		if (aid != "0") {  			if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  				string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  				string extension = Path.GetExtension (filename);  				Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  				Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  				PhotoInfo photoinfo = new PhotoInfo ();  				photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  				photoinfo.Attachment = attachs [i].Attachment;  				photoinfo.Filesize = (int)attachs [i].Filesize;  				photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  				photoinfo.Description = attachs [i].Description;  				photoinfo.Albumid = int.Parse (aid);  				photoinfo.Userid = userid;  				photoinfo.Username = username;  				photoinfo.Views = 0;  				photoinfo.Commentstatus = 0;  				photoinfo.Tagstatus = 0;  				photoinfo.Comments = 0;  				photoinfo.IsAttachment = 1;  				DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  				AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  				albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  				DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  				currentphotisize += (int)attachs [i].Filesize;  			}  			else {  				return "相册空间不足'可能有图片未能加入相册";  			}  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  	//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  	string aid = albumsid [i + 1];  	if (aid != "0") {  		if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  			string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  			string extension = Path.GetExtension (filename);  			Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  			Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  			PhotoInfo photoinfo = new PhotoInfo ();  			photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  			photoinfo.Attachment = attachs [i].Attachment;  			photoinfo.Filesize = (int)attachs [i].Filesize;  			photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  			photoinfo.Description = attachs [i].Description;  			photoinfo.Albumid = int.Parse (aid);  			photoinfo.Userid = userid;  			photoinfo.Username = username;  			photoinfo.Views = 0;  			photoinfo.Commentstatus = 0;  			photoinfo.Tagstatus = 0;  			photoinfo.Comments = 0;  			photoinfo.IsAttachment = 1;  			DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  			AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  			albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  			DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  			currentphotisize += (int)attachs [i].Filesize;  		}  		else {  			return "相册空间不足'可能有图片未能加入相册";  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  	//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  	string aid = albumsid [i + 1];  	if (aid != "0") {  		if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  			string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  			string extension = Path.GetExtension (filename);  			Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  			Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  			PhotoInfo photoinfo = new PhotoInfo ();  			photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  			photoinfo.Attachment = attachs [i].Attachment;  			photoinfo.Filesize = (int)attachs [i].Filesize;  			photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  			photoinfo.Description = attachs [i].Description;  			photoinfo.Albumid = int.Parse (aid);  			photoinfo.Userid = userid;  			photoinfo.Username = username;  			photoinfo.Views = 0;  			photoinfo.Commentstatus = 0;  			photoinfo.Tagstatus = 0;  			photoinfo.Comments = 0;  			photoinfo.IsAttachment = 1;  			DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  			AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  			albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  			DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  			currentphotisize += (int)attachs [i].Filesize;  		}  		else {  			return "相册空间不足'可能有图片未能加入相册";  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (attachs [i].Filename != "" && (attachs [i].Filetype == "image/pjpeg") || (attachs [i].Filetype == "image/gif") || (attachs [i].Filetype == "image/x-png")) {  	//由于提交上来的albums数据是头尾各含有一个值为0的元素的数组，则和第一个附件对应的相册ID其实是第二个值  	string aid = albumsid [i + 1];  	if (aid != "0") {  		if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  			string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  			string extension = Path.GetExtension (filename);  			Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  			Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  			PhotoInfo photoinfo = new PhotoInfo ();  			photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  			photoinfo.Attachment = attachs [i].Attachment;  			photoinfo.Filesize = (int)attachs [i].Filesize;  			photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  			photoinfo.Description = attachs [i].Description;  			photoinfo.Albumid = int.Parse (aid);  			photoinfo.Userid = userid;  			photoinfo.Username = username;  			photoinfo.Views = 0;  			photoinfo.Commentstatus = 0;  			photoinfo.Tagstatus = 0;  			photoinfo.Comments = 0;  			photoinfo.IsAttachment = 1;  			DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  			AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  			albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  			DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  			currentphotisize += (int)attachs [i].Filesize;  		}  		else {  			return "相册空间不足'可能有图片未能加入相册";  		}  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (aid != "0") {  	if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  		string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  		string extension = Path.GetExtension (filename);  		Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  		PhotoInfo photoinfo = new PhotoInfo ();  		photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  		photoinfo.Attachment = attachs [i].Attachment;  		photoinfo.Filesize = (int)attachs [i].Filesize;  		photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  		photoinfo.Description = attachs [i].Description;  		photoinfo.Albumid = int.Parse (aid);  		photoinfo.Userid = userid;  		photoinfo.Username = username;  		photoinfo.Views = 0;  		photoinfo.Commentstatus = 0;  		photoinfo.Tagstatus = 0;  		photoinfo.Comments = 0;  		photoinfo.IsAttachment = 1;  		DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  		albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  		DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  		currentphotisize += (int)attachs [i].Filesize;  	}  	else {  		return "相册空间不足'可能有图片未能加入相册";  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (aid != "0") {  	if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  		string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  		string extension = Path.GetExtension (filename);  		Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  		PhotoInfo photoinfo = new PhotoInfo ();  		photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  		photoinfo.Attachment = attachs [i].Attachment;  		photoinfo.Filesize = (int)attachs [i].Filesize;  		photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  		photoinfo.Description = attachs [i].Description;  		photoinfo.Albumid = int.Parse (aid);  		photoinfo.Userid = userid;  		photoinfo.Username = username;  		photoinfo.Views = 0;  		photoinfo.Commentstatus = 0;  		photoinfo.Tagstatus = 0;  		photoinfo.Comments = 0;  		photoinfo.IsAttachment = 1;  		DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  		albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  		DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  		currentphotisize += (int)attachs [i].Filesize;  	}  	else {  		return "相册空间不足'可能有图片未能加入相册";  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if (aid != "0") {  	if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  		string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  		string extension = Path.GetExtension (filename);  		Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  		PhotoInfo photoinfo = new PhotoInfo ();  		photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  		photoinfo.Attachment = attachs [i].Attachment;  		photoinfo.Filesize = (int)attachs [i].Filesize;  		photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  		photoinfo.Description = attachs [i].Description;  		photoinfo.Albumid = int.Parse (aid);  		photoinfo.Userid = userid;  		photoinfo.Username = username;  		photoinfo.Views = 0;  		photoinfo.Commentstatus = 0;  		photoinfo.Tagstatus = 0;  		photoinfo.Comments = 0;  		photoinfo.IsAttachment = 1;  		DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  		albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  		DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  		currentphotisize += (int)attachs [i].Filesize;  	}  	else {  		return "相册空间不足'可能有图片未能加入相册";  	}  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  	string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  	string extension = Path.GetExtension (filename);  	Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  	PhotoInfo photoinfo = new PhotoInfo ();  	photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  	photoinfo.Attachment = attachs [i].Attachment;  	photoinfo.Filesize = (int)attachs [i].Filesize;  	photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  	photoinfo.Description = attachs [i].Description;  	photoinfo.Albumid = int.Parse (aid);  	photoinfo.Userid = userid;  	photoinfo.Username = username;  	photoinfo.Views = 0;  	photoinfo.Commentstatus = 0;  	photoinfo.Tagstatus = 0;  	photoinfo.Comments = 0;  	photoinfo.IsAttachment = 1;  	DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  	AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  	albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  	DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	currentphotisize += (int)attachs [i].Filesize;  }  else {  	return "相册空间不足'可能有图片未能加入相册";  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  	string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  	string extension = Path.GetExtension (filename);  	Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  	PhotoInfo photoinfo = new PhotoInfo ();  	photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  	photoinfo.Attachment = attachs [i].Attachment;  	photoinfo.Filesize = (int)attachs [i].Filesize;  	photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  	photoinfo.Description = attachs [i].Description;  	photoinfo.Albumid = int.Parse (aid);  	photoinfo.Userid = userid;  	photoinfo.Username = username;  	photoinfo.Views = 0;  	photoinfo.Commentstatus = 0;  	photoinfo.Tagstatus = 0;  	photoinfo.Comments = 0;  	photoinfo.IsAttachment = 1;  	DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  	AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  	albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  	DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	currentphotisize += (int)attachs [i].Filesize;  }  else {  	return "相册空间不足'可能有图片未能加入相册";  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: if ((maxphotosize - currentphotisize - (int)attachs [i].Filesize) > 0) {  	string filename = Utils.GetMapPath (BaseConfigs.GetForumPath + "upload/" + attachs [i].Filename.Replace ('\\'' '/'));  	string extension = Path.GetExtension (filename);  	Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  	PhotoInfo photoinfo = new PhotoInfo ();  	photoinfo.Filename = "upload/" + attachs [i].Filename.Replace ('\\'' '/');  	photoinfo.Attachment = attachs [i].Attachment;  	photoinfo.Filesize = (int)attachs [i].Filesize;  	photoinfo.Title = attachs [i].Attachment.Remove (attachs [i].Attachment.IndexOf ("."));  	photoinfo.Description = attachs [i].Description;  	photoinfo.Albumid = int.Parse (aid);  	photoinfo.Userid = userid;  	photoinfo.Username = username;  	photoinfo.Views = 0;  	photoinfo.Commentstatus = 0;  	photoinfo.Tagstatus = 0;  	photoinfo.Comments = 0;  	photoinfo.IsAttachment = 1;  	DbProvider.GetInstance ().AddSpacePhoto (photoinfo);  	AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (Convert.ToInt32 (aid));  	albumInfo.Imgcount = DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (int.Parse (aid));  	DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	currentphotisize += (int)attachs [i].Filesize;  }  else {  	return "相册空间不足'可能有图片未能加入相册";  }  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: Common.Thumbnail.MakeThumbnailImage (filename' filename.Replace (extension' "_thumbnail" + extension)' 150' 150);  
Magic Number,Discuz.Album,AlbumPlugin,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumPlugin.cs,OnAttachCreated,The following statement contains a magic number: Common.Thumbnail.MakeSquareImage (filename' filename.Replace (extension' "_square" + extension)' 100);  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreatePhotoTitleImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' title' quality' fontname' fontsize' Color.FromArgb (102' 153' 204));  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: try {  	ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  }  catch {  }  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  
Magic Number,Discuz.Album,Albums,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Albums.cs,CreateUserImage,The following statement contains a magic number: ForumUtils.CreateTextImage (filename' username' quality' fontname' fontsize' Color.FromArgb (153' 153' 153));  
Magic Number,Discuz.Album,AlbumTags,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\AlbumTags.cs,WritePhotoTagsCacheFile,The following statement contains a magic number: dir.Append ((photoid / 1000 + 1).ToString ());  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: while (File.Exists (sSavePath + sFilename)) {  	sFilename = Environment.TickCount + random.Next (1000' 9999) + fileextname;  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: while (File.Exists (sSavePath + sFilename)) {  	sFilename = Environment.TickCount + random.Next (1000' 9999) + fileextname;  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: sFilename = Environment.TickCount + random.Next (1000' 9999) + fileextname;  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: sFilename = Environment.TickCount + random.Next (1000' 9999) + fileextname;  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: if (Common.Utils.InArray (Path.GetExtension (uploadFile.FileName).ToLower ()' ".jpg'.jpeg'.gif'.png") && createThumbnailImage) {  	//上传图片文件jpg'gif  	try {  		FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  		newFile.Write (myData' 0' myData.Length);  		newFile.Close ();  		string extension = Path.GetExtension (sSavePath + sFilename);  		Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  else//上传除图片文件以外的全部文件   {  	try {  		uploadFile.SaveAs (sSavePath + sFilename);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: if (Common.Utils.InArray (Path.GetExtension (uploadFile.FileName).ToLower ()' ".jpg'.jpeg'.gif'.png") && createThumbnailImage) {  	//上传图片文件jpg'gif  	try {  		FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  		newFile.Write (myData' 0' myData.Length);  		newFile.Close ();  		string extension = Path.GetExtension (sSavePath + sFilename);  		Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  else//上传除图片文件以外的全部文件   {  	try {  		uploadFile.SaveAs (sSavePath + sFilename);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: if (Common.Utils.InArray (Path.GetExtension (uploadFile.FileName).ToLower ()' ".jpg'.jpeg'.gif'.png") && createThumbnailImage) {  	//上传图片文件jpg'gif  	try {  		FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  		newFile.Write (myData' 0' myData.Length);  		newFile.Close ();  		string extension = Path.GetExtension (sSavePath + sFilename);  		Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  		Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  else//上传除图片文件以外的全部文件   {  	try {  		uploadFile.SaveAs (sSavePath + sFilename);  		return sFilename;  	}  	catch (ArgumentException errArgument) {  		File.Delete (sSavePath + sFilename);  		string errinfo = errArgument.Message;  		return sFilename;  	}  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: try {  	FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  	newFile.Write (myData' 0' myData.Length);  	newFile.Close ();  	string extension = Path.GetExtension (sSavePath + sFilename);  	Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  	return sFilename;  }  catch (ArgumentException errArgument) {  	File.Delete (sSavePath + sFilename);  	string errinfo = errArgument.Message;  	return sFilename;  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: try {  	FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  	newFile.Write (myData' 0' myData.Length);  	newFile.Close ();  	string extension = Path.GetExtension (sSavePath + sFilename);  	Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  	return sFilename;  }  catch (ArgumentException errArgument) {  	File.Delete (sSavePath + sFilename);  	string errinfo = errArgument.Message;  	return sFilename;  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: try {  	FileStream newFile = new FileStream (sSavePath + sFilename' FileMode.Create);  	newFile.Write (myData' 0' myData.Length);  	newFile.Close ();  	string extension = Path.GetExtension (sSavePath + sFilename);  	Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  	Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  	return sFilename;  }  catch (ArgumentException errArgument) {  	File.Delete (sSavePath + sFilename);  	string errinfo = errArgument.Message;  	return sFilename;  }  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: Common.Thumbnail.MakeThumbnailImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_thumbnail" + extension)' 150' 150);  
Magic Number,Discuz.Album,Globals,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\App_Code\Globals.cs,UploadSpaceFile,The following statement contains a magic number: Common.Thumbnail.MakeSquareImage (sSavePath + sFilename' (sSavePath + sFilename).Replace (extension' "_square" + extension)' 100);  
Magic Number,Discuz.Album.Data,DTOProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\DTOProvider.cs,GetAlbumRankList,The following statement contains a magic number: if (aic == null) {  	IDataReader reader = Data.DbProvider.GetInstance ().GetPhotoRankList (3' albumcount);  	aic = new Discuz.Common.Generic.List<AlbumInfo> ();  	while (reader.Read ()) {  		aic.Add (GetAlbumEntity (reader));  	}  	reader.Close ();  	DNTCache.GetCacheService ().AddObject (string.Format ("/Photo/AlbumRank{0}"' albumcount)' (ICollection)aic);  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetDateSpanParms,The following statement contains a magic number: if (startdate != "") {  	parms [0] = DbHelper.MakeInParam ("@startdate"' (DbType)SqlDbType.DateTime' 8' DateTime.Parse (startdate));  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetDateSpanParms,The following statement contains a magic number: parms [0] = DbHelper.MakeInParam ("@startdate"' (DbType)SqlDbType.DateTime' 8' DateTime.Parse (startdate));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetDateSpanParms,The following statement contains a magic number: if (enddate != "") {  	parms [1] = DbHelper.MakeInParam ("@enddate"' (DbType)SqlDbType.DateTime' 8' DateTime.Parse (enddate).AddDays (1));  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetDateSpanParms,The following statement contains a magic number: parms [1] = DbHelper.MakeInParam ("@enddate"' (DbType)SqlDbType.DateTime' 8' DateTime.Parse (enddate).AddDays (1));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpaceAlbumsCount,The following statement contains a magic number: try {  	return (int)DbHelper.ExecuteScalar (CommandType.Text' "SELECT COUNT([albumid]) FROM [" + BaseConfigs.GetTablePrefix + "albums] WHERE [userid]=@userid"' DbHelper.MakeInParam ("@userid"' (DbType)SqlDbType.Int' 4' userid));  }  catch {  	return 0;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpaceAlbumsCount,The following statement contains a magic number: return (int)DbHelper.ExecuteScalar (CommandType.Text' "SELECT COUNT([albumid]) FROM [" + BaseConfigs.GetTablePrefix + "albums] WHERE [userid]=@userid"' DbHelper.MakeInParam ("@userid"' (DbType)SqlDbType.Int' 4' userid));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoRankList,The following statement contains a magic number: switch (type) {  case 0:  	commandText += " ORDER BY [p].[views] DESC";  	break;  case 1:  	commandText += " ORDER BY [p].[comments] DESC";  	break;  case 2:  	commandText += " ORDER BY [p].[postdate] DESC";  	break;  case 3:  	commandText = string.Format (@"SELECT * FROM [{0}albums] WHERE albumid IN (SELECT TOP {1} [tid]  		                                                                FROM [{0}favorites] 		                                                                WHERE  [typeid]=1 AND [tid] in (SELECT [albumid]                                                                                                          FROM [{0}albums]                                                                                                          WHERE [type]=0)  		                                                                GROUP BY [tid]  		                                                                ORDER BY COUNT([tid]) DESC)"' BaseConfigs.GetTablePrefix' photocount);  	break;  default:  	commandText += " ORDER BY [p].[views] DESC";  	break;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoRankList,The following statement contains a magic number: switch (type) {  case 0:  	commandText += " ORDER BY [p].[views] DESC";  	break;  case 1:  	commandText += " ORDER BY [p].[comments] DESC";  	break;  case 2:  	commandText += " ORDER BY [p].[postdate] DESC";  	break;  case 3:  	commandText = string.Format (@"SELECT * FROM [{0}albums] WHERE albumid IN (SELECT TOP {1} [tid]  		                                                                FROM [{0}favorites] 		                                                                WHERE  [typeid]=1 AND [tid] in (SELECT [albumid]                                                                                                          FROM [{0}albums]                                                                                                          WHERE [type]=0)  		                                                                GROUP BY [tid]  		                                                                ORDER BY COUNT([tid]) DESC)"' BaseConfigs.GetTablePrefix' photocount);  	break;  default:  	commandText += " ORDER BY [p].[views] DESC";  	break;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetFocusPhotoList,The following statement contains a magic number: switch (type) {  case 0:  	commandText += " ORDER BY [p].[views] DESC";  	break;  case 1:  	commandText += " ORDER BY [p].[comments] DESC";  	break;  case 2:  	commandText += " ORDER BY [p].[postdate] DESC";  	break;  default:  	commandText += " ORDER BY [p].[views] DESC";  	break;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoByID,The following statement contains a magic number: switch (mode) {  case 1:  	commandText = "SELECT TOP 1 * FROM [{0}photos] WHERE [albumid] = @albumid AND [photoid]<@photoid ORDER BY [photoid] DESC";  	break;  case 2:  	commandText = "SELECT TOP 1 * FROM [{0}photos] WHERE [albumid] = @albumid AND [photoid]>@photoid ORDER BY [photoid] ASC";  	break;  default:  	commandText = "SELECT * FROM [{0}photos] WHERE [photoid] = @photoid";  	break;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,UpdatePhotoViews,The following statement contains a magic number: DbHelper.ExecuteNonQuery (CommandType.Text' string.Format ("UPDATE [{0}photos] SET [views]=[views]+1 WHERE [photoid]=@photoid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@photoid"' (DbType)SqlDbType.Int' 4' photoid));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpacePhotosCount,The following statement contains a magic number: try {  	return (int)DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT COUNT([photoid]) FROM [{0}photos] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid));  }  catch {  	return 0;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetSpacePhotosCount,The following statement contains a magic number: return (int)DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT COUNT([photoid]) FROM [{0}photos] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,SpacePhotosList,The following statement contains a magic number: return DbHelper.ExecuteDataset (CommandType.Text' string.Format ("SELECT * FROM [{0}photos] WHERE [albumid]=@albumid ORDER BY [photoid] ASC"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid)).Tables [0];  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListCondition,The following statement contains a magic number: if (descriptionlist != "") {  	string tempdescriptionlist = "";  	foreach (string description in RegEsc (descriptionlist).Split (''')) {  		tempdescriptionlist += " [description] LIKE '%" + RegEsc (description) + "%' OR";  	}  	tempdescriptionlist = tempdescriptionlist.Substring (0' tempdescriptionlist.Length - 2);  	condition += " AND (" + tempdescriptionlist + ")";  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListCondition,The following statement contains a magic number: tempdescriptionlist = tempdescriptionlist.Substring (0' tempdescriptionlist.Length - 2);  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetUidByAlbumid,The following statement contains a magic number: return TypeConverter.ObjectToInt (DbHelper.ExecuteScalar (CommandType.Text' string.Format ("SELECT [userid] FROM [{0}albums] WHERE [albumid]=@albumid"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@albumid"' (DbType)SqlDbType.Int' 4' albumid)));  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCondition,The following statement contains a magic number: if (keylist != "") {  	string tempkeylist = "";  	foreach (string key in keylist.Split (''')) {  		tempkeylist += " p.[title] LIKE '%" + RegEsc (key) + "%' OR";  	}  	tempkeylist = tempkeylist.Substring (0' tempkeylist.Length - 2);  	condition += " AND (" + tempkeylist + ")";  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetPhotoCondition,The following statement contains a magic number: tempkeylist = tempkeylist.Substring (0' tempkeylist.Length - 2);  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,GetAlbumListByCondition,The following statement contains a magic number: switch (type) {  case 0:  	commandText += " ORDER BY [createdatetime] DESC";  	break;  case 1:  	commandText += " ORDER BY [views] DESC";  	break;  case 2:  	commandText += " ORDER BY [imgcount] DESC";  	break;  default:  	commandText += " ORDER BY [createdatetime] DESC";  	break;  }  
Magic Number,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,DeletePhotoTags,The following statement contains a magic number: DbHelper.ExecuteNonQuery (CommandType.StoredProcedure' string.Format ("{0}deletephototags"' BaseConfigs.GetTablePrefix)' DbHelper.MakeInParam ("@photoid"' (DbType)SqlDbType.Int' 4' photoid));  
Magic Number,Discuz.Album.Pages,showalbum,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showalbum.cs,ShowPage,The following statement contains a magic number: pagenumbers = Utils.GetPageNumbers (currentpage' pageCount' string.Format ("showalbum.aspx?albumid={0}"' albumid)' 8);  
Magic Number,Discuz.Album.Pages,showalbumlist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showalbumlist.cs,ShowPage,The following statement contains a magic number: pagenumbers = Utils.GetPageNumbers (currentpage' pagecount' "showalbumlist.aspx"' 8);  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,The following statement contains a magic number: switch (go) {  case "prev":  	mode = 1;  	break;  case "next":  	mode = 2;  	break;  default:  	mode = 0;  	break;  }  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,The following statement contains a magic number: mode = 2;  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,The following statement contains a magic number: jsonfilename = "cache/album/" + (album.Albumid / 1000 + 1).ToString () + "/" + album.Albumid.ToString () + "_json.txt";  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SavePhotoComment,The following statement contains a magic number: if (admininfo == null || admininfo.Disablepostctrl != 1) {  	if (message.Length < config.Minpostsize) {  		AddErrLine ("您发表的内容过少' 系统设置要求评论内容不得少于 " + config.Minpostsize.ToString () + " 字");  		return;  	}  	else if (message.Length > 2000) {  		AddErrLine ("您发表的内容过多' 系统设置要求评论内容不得多于 2000 字");  		return;  	}  	int interval = Utils.StrDateDiffSeconds (lastposttime' config.Postinterval);  	if (interval < 0) {  		AddErrLine ("系统规定发帖间隔为" + config.Postinterval.ToString () + "秒' 您还需要等待 " + (interval * -1).ToString () + " 秒");  		return;  	}  }  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SavePhotoComment,The following statement contains a magic number: if (message.Length < config.Minpostsize) {  	AddErrLine ("您发表的内容过少' 系统设置要求评论内容不得少于 " + config.Minpostsize.ToString () + " 字");  	return;  }  else if (message.Length > 2000) {  	AddErrLine ("您发表的内容过多' 系统设置要求评论内容不得多于 2000 字");  	return;  }  
Magic Number,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,SavePhotoComment,The following statement contains a magic number: if (message.Length > 2000) {  	AddErrLine ("您发表的内容过多' 系统设置要求评论内容不得多于 2000 字");  	return;  }  
Magic Number,Discuz.Album.Pages,showphotolist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphotolist.cs,ShowPage,The following statement contains a magic number: type = type > 3 ? 3 : type;  
Magic Number,Discuz.Album.Pages,showphotolist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphotolist.cs,ShowPage,The following statement contains a magic number: type = type > 3 ? 3 : type;  
Magic Number,Discuz.Album.Pages,showphotolist,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphotolist.cs,ShowPage,The following statement contains a magic number: if (type < 3)  	photolist = DTOProvider.GetPhotoRankList (type' photocount);  else  	albumlist = DTOProvider.GetAlbumRankList (photocount);  
Magic Number,Discuz.Album.Pages,usercpalbummanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpalbummanage.cs,ShowPage,The following statement contains a magic number: pagenumbers = Utils.GetPageNumbers (pageid' pagecount' "usercpspacemanagealbum.aspx"' 8);  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (!DNTRequest.IsPost ()) {  	photo.Filename = Globals.GetThumbnailImage (photo.Filename);  	commentstatus = (int)photo.Commentstatus;  	tagstatus = (int)photo.Tagstatus;  	tags = AlbumTags.GetTagsByPhotoId (photoid);  }  else {  	photo.Title = DNTRequest.GetString ("title");  	photo.Description = DNTRequest.GetString ("description");  	if (commentstatus < 0 || commentstatus > 2)  		commentstatus = 2;  	photo.Commentstatus = (PhotoStatus)commentstatus;  	string newtags = DNTRequest.GetString ("phototag").Trim ();  	string[] tagsArray = null;  	if (config.Enabletag == 1 && newtags != string.Empty && newtags != tags) {  		tagsArray = Utils.SplitString (newtags' " "' true' 10);  		if (tagsArray.Length > 0 && string.Join (" "' tagsArray) != tags) {  			DbProvider.GetInstance ().DeletePhotoTags (photoid);  			DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	DTOProvider.UpdatePhotoInfo (photo);  	//生成json数据  	Albums.CreateAlbumJsonData (photo.Albumid);  	//生成图片标题  	Albums.CreatePhotoTitleImage (photo.Photoid' photo.Title);  	//生成用户名图片  	Albums.CreateUserImage (photo.Userid' photo.Username);  	AddMsgLine ("图片信息修改成功' 将返回图片列表");  	SetUrl ("usercpspacemanagephoto.aspx?albumid=" + photo.Albumid);  	SetMetaRefresh ();  }  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (!DNTRequest.IsPost ()) {  	photo.Filename = Globals.GetThumbnailImage (photo.Filename);  	commentstatus = (int)photo.Commentstatus;  	tagstatus = (int)photo.Tagstatus;  	tags = AlbumTags.GetTagsByPhotoId (photoid);  }  else {  	photo.Title = DNTRequest.GetString ("title");  	photo.Description = DNTRequest.GetString ("description");  	if (commentstatus < 0 || commentstatus > 2)  		commentstatus = 2;  	photo.Commentstatus = (PhotoStatus)commentstatus;  	string newtags = DNTRequest.GetString ("phototag").Trim ();  	string[] tagsArray = null;  	if (config.Enabletag == 1 && newtags != string.Empty && newtags != tags) {  		tagsArray = Utils.SplitString (newtags' " "' true' 10);  		if (tagsArray.Length > 0 && string.Join (" "' tagsArray) != tags) {  			DbProvider.GetInstance ().DeletePhotoTags (photoid);  			DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	DTOProvider.UpdatePhotoInfo (photo);  	//生成json数据  	Albums.CreateAlbumJsonData (photo.Albumid);  	//生成图片标题  	Albums.CreatePhotoTitleImage (photo.Photoid' photo.Title);  	//生成用户名图片  	Albums.CreateUserImage (photo.Userid' photo.Username);  	AddMsgLine ("图片信息修改成功' 将返回图片列表");  	SetUrl ("usercpspacemanagephoto.aspx?albumid=" + photo.Albumid);  	SetMetaRefresh ();  }  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (!DNTRequest.IsPost ()) {  	photo.Filename = Globals.GetThumbnailImage (photo.Filename);  	commentstatus = (int)photo.Commentstatus;  	tagstatus = (int)photo.Tagstatus;  	tags = AlbumTags.GetTagsByPhotoId (photoid);  }  else {  	photo.Title = DNTRequest.GetString ("title");  	photo.Description = DNTRequest.GetString ("description");  	if (commentstatus < 0 || commentstatus > 2)  		commentstatus = 2;  	photo.Commentstatus = (PhotoStatus)commentstatus;  	string newtags = DNTRequest.GetString ("phototag").Trim ();  	string[] tagsArray = null;  	if (config.Enabletag == 1 && newtags != string.Empty && newtags != tags) {  		tagsArray = Utils.SplitString (newtags' " "' true' 10);  		if (tagsArray.Length > 0 && string.Join (" "' tagsArray) != tags) {  			DbProvider.GetInstance ().DeletePhotoTags (photoid);  			DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	DTOProvider.UpdatePhotoInfo (photo);  	//生成json数据  	Albums.CreateAlbumJsonData (photo.Albumid);  	//生成图片标题  	Albums.CreatePhotoTitleImage (photo.Photoid' photo.Title);  	//生成用户名图片  	Albums.CreateUserImage (photo.Userid' photo.Username);  	AddMsgLine ("图片信息修改成功' 将返回图片列表");  	SetUrl ("usercpspacemanagephoto.aspx?albumid=" + photo.Albumid);  	SetMetaRefresh ();  }  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (commentstatus < 0 || commentstatus > 2)  	commentstatus = 2;  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (commentstatus < 0 || commentstatus > 2)  	commentstatus = 2;  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: commentstatus = 2;  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: if (config.Enabletag == 1 && newtags != string.Empty && newtags != tags) {  	tagsArray = Utils.SplitString (newtags' " "' true' 10);  	if (tagsArray.Length > 0 && string.Join (" "' tagsArray) != tags) {  		DbProvider.GetInstance ().DeletePhotoTags (photoid);  		DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  		AlbumTags.WritePhotoTagsCacheFile (photoid);  	}  }  
Magic Number,Discuz.Album.Pages,usercpphotoedit,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoedit.cs,ShowPage,The following statement contains a magic number: tagsArray = Utils.SplitString (newtags' " "' true' 10);  
Magic Number,Discuz.Album.Pages,usercpphotomanage,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotomanage.cs,ShowPage,The following statement contains a magic number: pagenumbers = Utils.GetPageNumbers (pageid' pagecount' "usercpspacemanagephoto.aspx?albumid=" + albumid' 8);  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (DNTRequest.IsPost ()) {  	if (ForumUtils.IsCrossSitePost ()) {  		AddErrLine ("您的请求来路不正确，无法提交。如果您安装了某种默认屏蔽来路信息的个人防火墙软件(如 Norton Internet Security)，请设置其不要禁止来路信息后再试。");  		return;  	}  	HttpFileCollection files = HttpContext.Current.Request.Files;  	int imgcount = 0;  	for (int iFile = 0; iFile < files.Count; iFile++) {  		HttpPostedFile postedFile = files [iFile];  		if (postedFile == null || postedFile.FileName == "")  			continue;  		string fileName' fileExtension;  		fileName = Path.GetFileName (postedFile.FileName);  		fileExtension = Path.GetExtension (fileName).ToLower ();  		if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  			continue;  		//判断用户是否达到了照片最大上传数  		int filesize = postedFile.ContentLength;  		if (freephotosize < filesize) {  			AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  			return;  		}  		string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  		PhotoInfo spacephotoinfo = new PhotoInfo ();  		spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  		spacephotoinfo.Albumid = albumid;  		spacephotoinfo.Userid = userid;  		string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  		string uploaddir = "";  		//当支持FTP上传远程照片  		if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  			//当不保留本地附件模式时  			if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  			else  				uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  			spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  			FTPs ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  			ftps = new FTPs ();  			ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		}  		else {  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  			if (!Directory.Exists (uploaddir))  				Utils.CreateDir (uploaddir);  			spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  		}  		spacephotoinfo.Attachment = fileName;  		spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  		spacephotoinfo.Filesize = filesize;  		spacephotoinfo.Username = username;  		spacephotoinfo.IsAttachment = 0;  		freephotosize -= filesize;  		int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  		string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  		string[] tagsArray = null;  		if (enabletag && tags != string.Empty) {  			tagsArray = Utils.SplitString (tags' " "' true' 10);  			if (tagsArray.Length > 0) {  				Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  				AlbumTags.WritePhotoTagsCacheFile (photoid);  			}  		}  		imgcount++;  	}  	if (imgcount != 0) {  		AlbumInfo albumInfo = DTOProvider.GetAlbumInfo (albumid);  		albumInfo.Imgcount = Data.DbProvider.GetInstance ().GetSpacePhotoCountByAlbumId (albumid);  		Data.DbProvider.GetInstance ().SaveSpaceAlbum (albumInfo);  	}  	else {  		AddErrLine ("没有符合要求的图片，请上传jpg'jpeg'gif'png格式的图片");  		return;  	}  	//生成json数据  	Albums.CreateAlbumJsonData (albumid);  	Albums.CreatePhotoImageByAlbum (albumid);  	SetUrl (string.Format ("usercpspacemanagephoto.aspx?albumid={0}"' albumid));  	SetMetaRefresh ();  	SetShowBackLink (true);  	AddMsgLine ("照片增加完毕");  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: for (int iFile = 0; iFile < files.Count; iFile++) {  	HttpPostedFile postedFile = files [iFile];  	if (postedFile == null || postedFile.FileName == "")  		continue;  	string fileName' fileExtension;  	fileName = Path.GetFileName (postedFile.FileName);  	fileExtension = Path.GetExtension (fileName).ToLower ();  	if (fileExtension != ".jpg" && fileExtension != ".gif" && fileExtension != ".png" && fileExtension != ".jpeg")  		continue;  	//判断用户是否达到了照片最大上传数  	int filesize = postedFile.ContentLength;  	if (freephotosize < filesize) {  		AddErrLine ("照片上传空间数已满，某些照片不能再上传！<br />如果想继续上传，请删除以前旧照片！");  		return;  	}  	string phototitle = DNTRequest.GetFormString ("phototitle" + (iFile + 1));  	PhotoInfo spacephotoinfo = new PhotoInfo ();  	spacephotoinfo.Title = Utils.StrIsNullOrEmpty (phototitle) ? fileName.Remove (fileName.IndexOf (".")' 1) : phototitle;  	spacephotoinfo.Albumid = albumid;  	spacephotoinfo.Userid = userid;  	string[] currentdate = DateTime.Now.ToString ("yyyy-MM-dd").Split ('-');  	string uploaddir = "";  	//当支持FTP上传远程照片  	if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  		//当不保留本地附件模式时  		if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  		else  			uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  		spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  		FTPs ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  		ftps = new FTPs ();  		ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	}  	else {  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  		if (!Directory.Exists (uploaddir))  			Utils.CreateDir (uploaddir);  		spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  	}  	spacephotoinfo.Attachment = fileName;  	spacephotoinfo.Description = DNTRequest.GetFormString ("description" + (iFile + 1));  	spacephotoinfo.Filesize = filesize;  	spacephotoinfo.Username = username;  	spacephotoinfo.IsAttachment = 0;  	freephotosize -= filesize;  	int photoid = Data.DbProvider.GetInstance ().AddSpacePhoto (spacephotoinfo);  	string tags = DNTRequest.GetString ("phototag" + (iFile + 1)).Trim ();  	string[] tagsArray = null;  	if (enabletag && tags != string.Empty) {  		tagsArray = Utils.SplitString (tags' " "' true' 10);  		if (tagsArray.Length > 0) {  			Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  			AlbumTags.WritePhotoTagsCacheFile (photoid);  		}  	}  	imgcount++;  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Allowupload == 1) {  	//当不保留本地附件模式时  	if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  	else  		uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	string ftpfilename = Globals.UploadSpaceFile (postedFile' uploaddir' true);  	spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  	FTPs ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  	ftps = new FTPs ();  	ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  }  else {  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  	if (!Directory.Exists (uploaddir))  		Utils.CreateDir (uploaddir);  	spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (FTPs.GetAlbumAttachInfo.Reservelocalattach == 0)  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/temp/");  else  	uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: spacephotoinfo.Filename = FTPs.GetAlbumAttachInfo.Remoteurl + "/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + ftpfilename;  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + ftpfilename' FTPs.FTPUploadEnum.AlbumAttach);  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetThumbnailImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: ftps.UpLoadFile ("/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/"' uploaddir + Globals.GetSquareImage (ftpfilename)' FTPs.FTPUploadEnum.AlbumAttach);  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: uploaddir = Utils.GetMapPath (BaseConfigs.GetForumPath + "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/");  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: spacephotoinfo.Filename = "space/upload/" + currentdate [0] + "/" + currentdate [1] + "/" + currentdate [2] + "/" + Globals.UploadSpaceFile (postedFile' uploaddir' true);  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: if (enabletag && tags != string.Empty) {  	tagsArray = Utils.SplitString (tags' " "' true' 10);  	if (tagsArray.Length > 0) {  		Data.DbProvider.GetInstance ().CreatePhotoTags (string.Join (" "' tagsArray)' photoid' userid' Utils.GetDateTime ());  		AlbumTags.WritePhotoTagsCacheFile (photoid);  	}  }  
Magic Number,Discuz.Album.Pages,usercpphotoadd,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\usercpphotoadd.cs,ShowPage,The following statement contains a magic number: tagsArray = Utils.SplitString (tags' " "' true' 10);  
Missing Default,Discuz.Album.Data,DataProvider,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Data\SqlDataProvider.cs,RegEsc,The following switch statement is missing a default case: switch (s) {  case "%":  	str = str.Replace (s' "[%]");  	break;  case "_":  	str = str.Replace (s' "[_]");  	break;  case "'":  	str = str.Replace (s' "['']");  	break;  }  
Missing Default,Discuz.Album.Pages,showphoto,C:\repos\xbf321_PlantEng\PlantEng.Web.Forum\Discuz.Album\Pages\showphoto.cs,ShowPage,The following switch statement is missing a default case: switch (photo.Commentstatus) {  case PhotoStatus.Owner:  	if (userid != photo.Userid)  		commentable = false;  	break;  }  
