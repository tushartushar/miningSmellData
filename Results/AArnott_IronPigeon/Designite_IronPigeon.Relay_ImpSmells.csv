Implementation smell,Namespace,Class,File,Method,Description
Long Parameter List,System.Web.Mvc,HtmlExtensions,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\HtmlExtensions.cs,AbsoluteAction,The method has 5 parameters. Parameters: url' actionName' controllerName' routeValues' protocol
Long Identifier,IronPigeon.Relay.Controllers,OAuthController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\OAuthController.cs,SaveAccountInfoAsync,The length of the parameter previouslyRecordedEmailAddresses is 32.
Long Identifier,IronPigeon.Relay.Models,PushNotificationContext,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Models\PushNotificationContext.cs,GetAsync,The length of the parameter clientPackageSecurityIdentifier is 31.
Long Statement,IronPigeon.Relay,AzureStorageConfig,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\App_Start\AzureStorageConfig.cs,RegisterConfiguration,The length of the statement  "            var storage = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings[DefaultCloudConfigurationName].ConnectionString); " is 128.
Long Statement,IronPigeon.Relay,AuthorizationServerHost,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\AuthorizationServerHost.cs,GetClient,The length of the statement  "                    ConfigurationManager.AppSettings["TrustedClientSecret"]' // the client secret technically isn't necessary since we only use implicit grants. " is 140.
Long Statement,IronPigeon.Relay,GooglePushNotifications,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\GooglePushNotifications.cs,PushGoogleRawNotificationAsync,The length of the statement  "            pushNotifyRequest.Headers.TryAddWithoutValidation("Authorization"' "key=" + this.GoogleApiKey); // non-standard format means we can't use normal type " is 149.
Long Statement,IronPigeon.Relay,MvcApplication,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Global.asax.cs,Application_Start,The length of the statement  "                PushBroker.RegisterAppleService(new ApplePushChannelSettings(appleCert' ConfigurationManager.AppSettings["AppleAPNSCertPassword"])); " is 132.
Long Statement,System.Web.Mvc,HtmlExtensions,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\HtmlExtensions.cs,AbsoluteAction,The length of the statement  "            var builder = new UriBuilder(url.Action(actionName' controllerName' new RouteValueDictionary(routeValues)' protocol' null)); " is 124.
Long Statement,IronPigeon.Relay.Controllers,AddressBookController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\AddressBookController.cs,Index,The length of the statement  "            if (this.Request.AcceptTypes != null && !this.Request.AcceptTypes.Contains(AddressBookEntry.ContentType) && this.Request.AcceptTypes.Contains("text/html")) " is 155.
Long Statement,IronPigeon.Relay.Controllers,BlobController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\BlobController.cs,Post,The length of the statement  "            var blobLocation = await this.CloudBlobStorageProvider.UploadMessageAsync(content' expirationUtc' contentType' contentEncoding); " is 128.
Long Statement,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PushNotifyInboxMessageWinPhoneAsync,The length of the statement  "                        if (inbox.LastWinPhone8PushNotificationUtc.HasValue && inbox.LastAuthenticatedInteractionUtc.HasValue && inbox.LastWinPhone8PushNotificationUtc.Value > inbox.LastAuthenticatedInteractionUtc.Value) " is 196.
Long Statement,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PushNotifyInboxMessageGoogleAsync,The length of the statement  "                var notifications = new GooglePushNotifications(this.HttpClient' ConfigurationManager.AppSettings["GoogleApiKey"]' inbox.GoogleCloudMessagingRegistrationId); " is 157.
Long Statement,IronPigeon.Relay.Controllers,OAuthController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\OAuthController.cs,Authorize,The length of the statement  "            var scopes = new[] { "wl.signin"' "wl.basic"' "wl.emails" }; // this is a subset of what the client app asks for' ensuring automatic approval. " is 142.
Long Statement,IronPigeon.Relay.Controllers,OAuthController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\OAuthController.cs,AuthorizeWithMicrosoftAccount,The length of the statement  "            var response = this.authorizationServer.PrepareApproveAuthorizationRequest(incomingAuthzRequest' microsoftAccountInfo.Id' new[] { "AddressBook" }); " is 147.
Long Statement,IronPigeon.Relay.Controllers,OAuthController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\OAuthController.cs,SaveAccountInfoAsync,The length of the statement  "            Requires.That(microsoftAccountInfo.Emails != null && microsoftAccountInfo.Emails.Count > 0' "microsoftAccountInfo"' "No emails were provided by Live Connect."); " is 160.
Long Statement,IronPigeon.Relay.Models,PushNotificationContext,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Models\PushNotificationContext.cs,GetAsync,The length of the statement  "            Requires.Argument(clientPackageSecurityIdentifier == null || clientPackageSecurityIdentifier.StartsWith(PushNotificationClientEntity.SchemePrefix)' "clientPackageSecurityIdentifier"' "Prefix {0} not found"' PushNotificationClientEntity.SchemePrefix); " is 250.
Empty Catch Block,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,RetrieveInboxItemsAsync,The method has an empty catch block.
Magic Number,IronPigeon.Relay,GooglePushNotifications,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\GooglePushNotifications.cs,PushGoogleRawNotificationAsync,The following statement contains a magic number: var value = new GooglePushObject              {                  CollapseKey = "NewMessages"'                  RegistrationIds = new[] { this.RegistrationId }'                  TimeToLive = (long)TimeSpan.FromDays(7).TotalSeconds'              };
Magic Number,IronPigeon.Relay.Code,MicrosoftTools,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Code\MicrosoftTools.cs,ByteArrayToString,The following statement contains a magic number: StringBuilder hex = new StringBuilder(ba.Length * 2);
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PurgeExpiredAsync,The following statement contains a magic number: var searchExpiredBlobs = new TransformManyBlock<CloudBlobContainer' ICloudBlob>(                  async c =>                  {                      try                      {                          var results = await c.ListBlobsSegmentedAsync(                              string.Empty'                              useFlatBlobListing: true'                              pageSize: 50'                              details: BlobListingDetails.Metadata'                              options: new BlobRequestOptions()'                              operationContext: null);                          return from blob in results.OfType<ICloudBlob>()                                 let expires = DateTime.Parse(blob.Metadata[ExpirationDateMetadataKey])                                 where expires < deleteBlobsExpiringBefore                                 select blob;                      }                      catch (StorageException ex)                      {                          var webException = ex.InnerException as WebException;                          if (webException != null)                          {                              var httpResponse = (HttpWebResponse)webException.Response;                              if (httpResponse.StatusCode == HttpStatusCode.NotFound)                              {                                  // it's legit that some tests never created the container to begin with.                                  return Enumerable.Empty<ICloudBlob>();                              }                          }                            throw;                      }                  }'                  new ExecutionDataflowBlockOptions                  {                      BoundedCapacity = 4'                  });
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PurgeExpiredAsync,The following statement contains a magic number: var searchExpiredBlobs = new TransformManyBlock<CloudBlobContainer' ICloudBlob>(                  async c =>                  {                      try                      {                          var results = await c.ListBlobsSegmentedAsync(                              string.Empty'                              useFlatBlobListing: true'                              pageSize: 50'                              details: BlobListingDetails.Metadata'                              options: new BlobRequestOptions()'                              operationContext: null);                          return from blob in results.OfType<ICloudBlob>()                                 let expires = DateTime.Parse(blob.Metadata[ExpirationDateMetadataKey])                                 where expires < deleteBlobsExpiringBefore                                 select blob;                      }                      catch (StorageException ex)                      {                          var webException = ex.InnerException as WebException;                          if (webException != null)                          {                              var httpResponse = (HttpWebResponse)webException.Response;                              if (httpResponse.StatusCode == HttpStatusCode.NotFound)                              {                                  // it's legit that some tests never created the container to begin with.                                  return Enumerable.Empty<ICloudBlob>();                              }                          }                            throw;                      }                  }'                  new ExecutionDataflowBlockOptions                  {                      BoundedCapacity = 4'                  });
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PurgeExpiredAsync,The following statement contains a magic number: var deleteBlobBlock = new ActionBlock<ICloudBlob>(                  blob =>                  {                      Interlocked.Increment(ref purgedBlobCount);                      return blob.DeleteAsync();                  }'                  new ExecutionDataflowBlockOptions                  {                      MaxDegreeOfParallelism = 4'                      BoundedCapacity = 100'                  });
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PurgeExpiredAsync,The following statement contains a magic number: var deleteBlobBlock = new ActionBlock<ICloudBlob>(                  blob =>                  {                      Interlocked.Increment(ref purgedBlobCount);                      return blob.DeleteAsync();                  }'                  new ExecutionDataflowBlockOptions                  {                      MaxDegreeOfParallelism = 4'                      BoundedCapacity = 100'                  });
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PostNotificationAsync,The following statement contains a magic number: var blob = directory.GetBlockBlobReference(Utilities.CreateRandomWebSafeName(24));
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PushChannelAsync,The following statement contains a magic number: if (this.Request.Form["channel_uri"] != null)              {                  var channelUri = new Uri(this.Request.Form["channel_uri"]' UriKind.Absolute);                  var content = this.Request.Form["channel_content"];                  Requires.Argument(content == null || content.Length <= 4096' "content"' "Push content too large");                    inbox.PushChannelUri = channelUri.AbsoluteUri;                  inbox.PushChannelContent = content;                  inbox.ClientPackageSecurityIdentifier = this.Request.Form["package_security_identifier"];              }              else if (this.Request.Form["wp8_channel_uri"] != null)              {                  var channelUri = new Uri(this.Request.Form["wp8_channel_uri"]' UriKind.Absolute);                  var content = this.Request.Form["wp8_channel_content"];                  Requires.Argument(content == null || content.Length <= 4096' "content"' "Push content too large");                    inbox.WinPhone8PushChannelUri = channelUri.AbsoluteUri;                  inbox.WinPhone8PushChannelContent = content;                  inbox.WinPhone8ToastText1 = this.Request.Form["wp8_channel_toast_text1"];                  inbox.WinPhone8ToastText2 = this.Request.Form["wp8_channel_toast_text2"];                  inbox.WinPhone8TileTemplate = this.Request.Form["wp8_channel_tile_template"];              }              else if (this.Request.Form["gcm_registration_id"] != null)              {                  inbox.GoogleCloudMessagingRegistrationId = this.Request.Form["gcm_registration_id"];              }              else if (this.Request.Form["ios_device_token"] != null)              {                  inbox.ApplePushNotificationGatewayDeviceToken = this.Request.Form["ios_device_token"];              }              else              {                  // No data was posted. So skip updating the entity.                  return new HttpStatusCodeResult(HttpStatusCode.NoContent);              }
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,PushChannelAsync,The following statement contains a magic number: if (this.Request.Form["channel_uri"] != null)              {                  var channelUri = new Uri(this.Request.Form["channel_uri"]' UriKind.Absolute);                  var content = this.Request.Form["channel_content"];                  Requires.Argument(content == null || content.Length <= 4096' "content"' "Push content too large");                    inbox.PushChannelUri = channelUri.AbsoluteUri;                  inbox.PushChannelContent = content;                  inbox.ClientPackageSecurityIdentifier = this.Request.Form["package_security_identifier"];              }              else if (this.Request.Form["wp8_channel_uri"] != null)              {                  var channelUri = new Uri(this.Request.Form["wp8_channel_uri"]' UriKind.Absolute);                  var content = this.Request.Form["wp8_channel_content"];                  Requires.Argument(content == null || content.Length <= 4096' "content"' "Push content too large");                    inbox.WinPhone8PushChannelUri = channelUri.AbsoluteUri;                  inbox.WinPhone8PushChannelContent = content;                  inbox.WinPhone8ToastText1 = this.Request.Form["wp8_channel_toast_text1"];                  inbox.WinPhone8ToastText2 = this.Request.Form["wp8_channel_toast_text2"];                  inbox.WinPhone8TileTemplate = this.Request.Form["wp8_channel_tile_template"];              }              else if (this.Request.Form["gcm_registration_id"] != null)              {                  inbox.GoogleCloudMessagingRegistrationId = this.Request.Form["gcm_registration_id"];              }              else if (this.Request.Form["ios_device_token"] != null)              {                  inbox.ApplePushNotificationGatewayDeviceToken = this.Request.Form["ios_device_token"];              }              else              {                  // No data was posted. So skip updating the entity.                  return new HttpStatusCodeResult(HttpStatusCode.NoContent);              }
Magic Number,IronPigeon.Relay.Controllers,InboxController,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Controllers\InboxController.cs,RetrieveInboxItemsAsync,The following statement contains a magic number: do              {                  try                  {                      var directoryListing = await directory.ListBlobsSegmentedAsync(                          useFlatBlobListing: true'                          pageSize: 50'                          details: BlobListingDetails.Metadata'                          options: new BlobRequestOptions()'                          operationContext: null);                      var notExpiringBefore = DateTime.UtcNow;                      blobs.AddRange(                          from blob in directoryListing.OfType<ICloudBlob>()                          let expirationString = blob.Metadata[ExpirationDateMetadataKey]                          where expirationString != null && DateTime.Parse(expirationString) > notExpiringBefore                          select                              new IncomingList.IncomingItem                              {                                  Location = blob.Uri'                                  DatePostedUtc = blob.Properties.LastModified.Value.UtcDateTime                              });                  }                  catch (StorageException)                  {                  }                    if (longPoll && blobs.Count == 0)                  {                      await WaitIncomingMessageAsync(id).WithCancellation(this.Response.GetClientDisconnectedToken());                  }              }              while (longPoll && blobs.Count == 0);
Magic Number,IronPigeon.Relay.Models,InboxContext,C:\repos\AArnott_IronPigeon\src\IronPigeon.Relay\Models\InboxContext.cs,SaveChangesWithMergeAsync,The following statement contains a magic number: const int MaxRetries = 5;
