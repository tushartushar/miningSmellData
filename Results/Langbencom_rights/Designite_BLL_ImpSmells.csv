Implementation smell,Namespace,Class,File,Method,Description
Complex Method,Langben.BLL,SysMenuBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysMenuBLL.cs,Edit,Cyclomatic complexity of the method is 9
Complex Method,Langben.BLL,SysPersonBLL,C:\repos\Langbencom_rights\Rights\BLL\SysPersonBLL.cs,Edit,Cyclomatic complexity of the method is 9
Complex Method,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,Edit,Cyclomatic complexity of the method is 9
Complex Method,Langben.BLL,SysOperationBLL,C:\repos\Langbencom_rights\Rights\BLL\SysOperationBLL.cs,Edit,Cyclomatic complexity of the method is 9
Long Parameter List,Langben.BLL,NetSendMail,C:\repos\Langbencom_rights\Rights\BLL\Framework\NetSendMail.cs,SendSMTPEMail,The method has 9 parameters. Parameters: strSmtpServer' port' strFrom' strFromName' maiFromlAccount' strFromPass' strto' strSubject' strBody
Long Parameter List,Langben.BLL,SysAnnouncementBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysAnnouncementBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysMenuBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysMenuBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysMenuSysRoleSysOperationBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysMenuSysRoleSysOperationBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysDepartmentBLL,C:\repos\Langbencom_rights\Rights\BLL\SysDepartmentBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysEmailBLL,C:\repos\Langbencom_rights\Rights\BLL\SysEmailBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysEmailTempBLL,C:\repos\Langbencom_rights\Rights\BLL\SysEmailTempBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysMessageBLL,C:\repos\Langbencom_rights\Rights\BLL\SysMessageBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysMessageTempBLL,C:\repos\Langbencom_rights\Rights\BLL\SysMessageTempBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysPersonBLL,C:\repos\Langbencom_rights\Rights\BLL\SysPersonBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysLogBLL,C:\repos\Langbencom_rights\Rights\BLL\SysLogBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysExceptionBLL,C:\repos\Langbencom_rights\Rights\BLL\SysExceptionBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysFieldBLL,C:\repos\Langbencom_rights\Rights\BLL\SysFieldBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,FileUploaderBLL,C:\repos\Langbencom_rights\Rights\BLL\FileUploaderBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysOperationBLL,C:\repos\Langbencom_rights\Rights\BLL\SysOperationBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Parameter List,Langben.BLL,SysNoticeBLL,C:\repos\Langbencom_rights\Rights\BLL\SysNoticeBLL.cs,GetByParam,The method has 7 parameters. Parameters: id' page' rows' order' sort' search' total
Long Statement,Langben.BLL,AccountBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\AccountBLL.cs,ChangePassword,The length of the statement  "            if (!string.IsNullOrWhiteSpace(personName) && !string.IsNullOrWhiteSpace(oldPassword) && !string.IsNullOrWhiteSpace(newPassword)) " is 129.
Long Statement,Langben.BLL,NetSendMail,C:\repos\Langbencom_rights\Rights\BLL\Framework\NetSendMail.cs,MailSendChangePassword,The length of the statement  "                SendSMTPEMail(mailSmtpServer' 25' email.Reply_email' "服务"' "service@langben.com"' mailFromPwd' mailTo' email.Subject' email.Content); " is 133.
Long Statement,Langben.BLL,SysMenuBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysMenuBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysOperationId.GetIdSort()' entity.SysOperationIdOld.GetIdSort()' ref addSysOperationId' ref deleteSysOperationId); " is 149.
Long Statement,Langben.BLL,SysDepartmentBLL,C:\repos\Langbencom_rights\Rights\BLL\SysDepartmentBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysDocumentId.GetIdSort()' entity.SysDocumentIdOld.GetIdSort()' ref addSysDocumentId' ref deleteSysDocumentId); " is 145.
Long Statement,Langben.BLL,SysPersonBLL,C:\repos\Langbencom_rights\Rights\BLL\SysPersonBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysRoleId.GetIdSort()' entity.SysRoleIdOld.GetIdSort()' ref addSysRoleId' ref deleteSysRoleId); " is 129.
Long Statement,Langben.BLL,SysPersonBLL,C:\repos\Langbencom_rights\Rights\BLL\SysPersonBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysDocumentId.GetIdSort()' entity.SysDocumentIdOld.GetIdSort()' ref addSysDocumentId' ref deleteSysDocumentId); " is 145.
Long Statement,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysPersonId.GetIdSort()' entity.SysPersonIdOld.GetIdSort()' ref addSysPersonId' ref deleteSysPersonId); " is 137.
Long Statement,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,SaveCollection,The length of the statement  "                        string num = System.Numerics.BigInteger.Divide(System.Numerics.BigInteger.Parse(item)' System.Numerics.BigInteger.Pow(10000' i)).ToString(); " is 140.
Long Statement,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,SaveCollection,The length of the statement  "                        builder.AppendFormat("INSERT INTO [SysMenuSysRoleSysOperation]([Id]'[SysRoleId]'[SysMenuId]'[SysOperationId])VALUES('{0}'''{1}'''{2}'''{3}');" " is 142.
Long Statement,Langben.BLL,SysOperationBLL,C:\repos\Langbencom_rights\Rights\BLL\SysOperationBLL.cs,Edit,The length of the statement  "            DataOfDiffrent.GetDiffrent(entity.SysMenuId.GetIdSort()' entity.SysMenuIdOld.GetIdSort()' ref addSysMenuId' ref deleteSysMenuId); " is 129.
Magic Number,Langben.BLL,HomeBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\HomeBLL.cs,GetMenuByAccount,The following statement contains a magic number: using (SysEntities db = new SysEntities())              {                  string personId = person.Id;                  var roleIds =                             (//该用户的所有角色                             from r in db.SysRole                             from p in r.SysPerson                             where p.Id == personId                             select r.Id                             ).ToList();                  person.RoleIds = roleIds;                    List<SysMenu> menuNeed =                              (//该用户的角色下的菜单                              from m2 in db.SysMenu                              from f in m2.SysMenuSysRoleSysOperation                                where roleIds.Any(a => a == f.SysRoleId) && f.SysOperationId == null                              select m2                              ).Distinct().OrderBy(o => o.Remark).ToList();//此方法由临海人(qq:1012999282)提供                  //person.MenuIds = menuNeed.Where(w => w.IsLeaf == null).Select(s => s.Url).ToList();                    StringBuilder strmenu2 = new StringBuilder();//拼接菜单的字符串                  int lever = 0;//上一个菜单的层级                  int current = 0;//当前菜单的层级                  //在1.2版本中修改                  if (menuNeed.Count > 1)                  {                      for (int i = 0; i < menuNeed.Count; i++)                      {                          current = menuNeed[i].Remark.Length / 4;//按照4位数字的编码格式                            if (current == 1)//加载根目录的菜单                                                 {                              //解决ie6下没有滚动条的问题                              strmenu2.Replace('^'' ' ')                                  .Append(string.Format(firstMenu' menuNeed[i].Iconic' menuNeed[i].Name));                          }                          else if (current < lever)//进入上一个菜单层级                          {                              string replace = string.Empty;                              for (int c = 0; c < lever - current; c++)//减少了几个层级                              {                                  replace += ("</ul></li>");                              }                              if ((i == menuNeed.Count - 1) || (menuNeed[i].Remark.Length >= menuNeed[i + 1].Remark.Length))                                  strmenu2.Replace("^" + replace' replace + GetNode(menuNeed[i]' true));                              else                                  strmenu2.Replace("^" + replace' replace + GetNode(menuNeed[i]' false));                          }                          else//进入本级菜单或者下一个菜单                          {  //最后一个，或者下一个长度不小于这个的长度                              if ((i == menuNeed.Count - 1) || (menuNeed[i].Remark.Length >= menuNeed[i + 1].Remark.Length))                              {                                   strmenu2.Replace("^"' GetNode(menuNeed[i]' true));                             } else                                  strmenu2.Replace("^"' GetNode(menuNeed[i]' false));                            }                          lever = current;                      }                  }                  return strmenu2.ToString().Replace('@'' '"').Replace('^'' ' ');              }
Magic Number,Langben.BLL,NetSendMail,C:\repos\Langbencom_rights\Rights\BLL\Framework\NetSendMail.cs,MailSendChangePassword,The following statement contains a magic number: if (data != null)              {                   SysEmail email = new SysEmail();                  email.CreateTime = DateTime.Now;                  email.Id = Common.Result.GetNewId();                  email.SysMailId = data.Id;                  email.Subject = data.Subject.Replace("{{用户名}}"' name).Replace("{{密码}}"' psw);                  email.Content = data.Content.Replace("{{用户名}}"' name).Replace("{{密码}}"' psw);                  email.Mail_type = mailTo;                  email.Reply_email = data.Reply_email;                  db.SysEmail.Add(email);                    string mailFromPwd = "langben123"'                    mailSmtpServer = "smtp.exmail.qq.com";                    SendSMTPEMail(mailSmtpServer' 25' email.Reply_email' "服务"' "service@langben.com"' mailFromPwd' mailTo' email.Subject' email.Content);                }
Magic Number,Langben.BLL,SysMenuBLL,C:\repos\Langbencom_rights\Rights\BLL\Framework\SysMenuBLL.cs,GetMenus2,The following statement contains a magic number: if (listTree != null && listTree.Any())              {                  flags.Add(1000);                  foreach (SysMenu item in listTree)                  {                      //修改编码                      item.Remark = string.Join(""' flags);                                         if (item.SysMenu1.Any())                      {                          item.IsLeaf = "叶子";                          //非子节点，递归                          GetMenus2(item.Id' flags);                          flags.RemoveAt(flags.Count - 1);                      }                      else                      {                          item.IsLeaf = null;                      }                      //值+1                      flags[flags.Count - 1]++;                  }              }
Magic Number,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,SaveCollection,The following statement contains a magic number: using (TransactionScope transactionScope = new TransactionScope())              {                  //利用编码机制，查询出所有的菜单                  var codes = db.SysMenu.Where(w => data.Contains(w.Id)).Select(s => s.Remark).Distinct();                  List<string> ls = new List<string>();                  foreach (var item in codes)                  {                      if (item==null)                      {                          continue;                      }                      for (int i = 0; i < item.Length / 4; i++)                      {                                                    //在1.2版本中修改                          string num = System.Numerics.BigInteger.Divide(System.Numerics.BigInteger.Parse(item)' System.Numerics.BigInteger.Pow(10000' i)).ToString();                            if (!ls.Contains(num))                          {                              ls.Add(num);                          }                      }                  }                  var SysMenusIds = from f in db.SysMenu                                    where ls.Contains(f.Remark)                                    select f.Id; //现在所有的菜单                    StringBuilder builder = new StringBuilder();                  builder.AppendFormat("DELETE FROM  [SysMenuSysRoleSysOperation] WHERE [SysRoleId] = '{0}';"' id);//删除该角色的所有的菜单和操作                  foreach (var item in SysMenusIds)                  {//插入菜单                      builder.AppendFormat("INSERT INTO [SysMenuSysRoleSysOperation]([Id]'[SysRoleId]'[SysMenuId])VALUES('{0}'''{1}'''{2}');"                          ' Common.Result.GetNewId()' id' item);                  }                    foreach (var item in ids)                  {//插入操作                      if (item.Contains(split))                          builder.AppendFormat("INSERT INTO [SysMenuSysRoleSysOperation]([Id]'[SysRoleId]'[SysMenuId]'[SysOperationId])VALUES('{0}'''{1}'''{2}'''{3}');"                         ' Common.Result.GetNewId()' id' item.Substring(0' item.IndexOf(split))' item.Substring(item.IndexOf(split) + 1));                  }                    db.Database.ExecuteSqlCommand(builder.ToString());                  db.SaveChanges();                  transactionScope.Complete();                  return true;                }
Magic Number,Langben.BLL,SysRoleBLL,C:\repos\Langbencom_rights\Rights\BLL\SysRoleBLL.cs,SaveCollection,The following statement contains a magic number: using (TransactionScope transactionScope = new TransactionScope())              {                  //利用编码机制，查询出所有的菜单                  var codes = db.SysMenu.Where(w => data.Contains(w.Id)).Select(s => s.Remark).Distinct();                  List<string> ls = new List<string>();                  foreach (var item in codes)                  {                      if (item==null)                      {                          continue;                      }                      for (int i = 0; i < item.Length / 4; i++)                      {                                                    //在1.2版本中修改                          string num = System.Numerics.BigInteger.Divide(System.Numerics.BigInteger.Parse(item)' System.Numerics.BigInteger.Pow(10000' i)).ToString();                            if (!ls.Contains(num))                          {                              ls.Add(num);                          }                      }                  }                  var SysMenusIds = from f in db.SysMenu                                    where ls.Contains(f.Remark)                                    select f.Id; //现在所有的菜单                    StringBuilder builder = new StringBuilder();                  builder.AppendFormat("DELETE FROM  [SysMenuSysRoleSysOperation] WHERE [SysRoleId] = '{0}';"' id);//删除该角色的所有的菜单和操作                  foreach (var item in SysMenusIds)                  {//插入菜单                      builder.AppendFormat("INSERT INTO [SysMenuSysRoleSysOperation]([Id]'[SysRoleId]'[SysMenuId])VALUES('{0}'''{1}'''{2}');"                          ' Common.Result.GetNewId()' id' item);                  }                    foreach (var item in ids)                  {//插入操作                      if (item.Contains(split))                          builder.AppendFormat("INSERT INTO [SysMenuSysRoleSysOperation]([Id]'[SysRoleId]'[SysMenuId]'[SysOperationId])VALUES('{0}'''{1}'''{2}'''{3}');"                         ' Common.Result.GetNewId()' id' item.Substring(0' item.IndexOf(split))' item.Substring(item.IndexOf(split) + 1));                  }                    db.Database.ExecuteSqlCommand(builder.ToString());                  db.SaveChanges();                  transactionScope.Complete();                  return true;                }
