Implementation smell,Namespace,Class,File,Method,Description
Long Method,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The method has 167 lines of code.
Complex Method,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareCategorySimpleModels,Cyclomatic complexity of the method is 8
Complex Method,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,Cyclomatic complexity of the method is 29
Long Parameter List,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,MiscFacebookShopController,The method has 15 parameters.
Long Parameter List,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareCategorySimpleModels,The method has 6 parameters.
Long Parameter List,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The method has 10 parameters.
Long Parameter List,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The method has 6 parameters.
Long Identifier,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the parameter prepareSpecificationAttributes is 30.
Long Identifier,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the parameter forceRedirectionAfterAddingToCart is 33.
Long Identifier,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The length of the parameter filterableSpecificationAttributeOptionIds is 41.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareCategorySimpleModels,The length of the statement  "			var subCategories = PrepareCategorySimpleModels (category.Id' loadSubCategoriesForIds' level + 1' levelsToLoad' validateIncludeInTopMenu); " is 138.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "									var tmpPrice = _priceCalculationService.GetFinalPrice (associatedProduct' _workContext.CurrentCustomer' decimal.Zero' true' int.MaxValue); " is 138.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "										priceModel.Price = String.Format (_localizationService.GetResource ("Products.PriceRangeFrom")' _priceFormatter.FormatPrice (finalPrice)); " is 138.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "					priceModel.DisableBuyButton = product.DisableBuyButton || !_permissionService.Authorize (StandardPermissionProvider.EnableShoppingCart) || !_permissionService.Authorize (StandardPermissionProvider.DisplayPrices); " is 212.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "					priceModel.DisableWishlistButton = product.DisableWishlistButton || !_permissionService.Authorize (StandardPermissionProvider.EnableWishlist) || !_permissionService.Authorize (StandardPermissionProvider.DisplayPrices); " is 218.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "						priceModel.AvailableForPreOrder = !product.PreOrderAvailabilityStartDateTimeUtc.HasValue || product.PreOrderAvailabilityStartDateTimeUtc.Value >= DateTime.UtcNow; " is 162.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "						decimal minPossiblePrice = _priceCalculationService.GetFinalPrice (product' _workContext.CurrentCustomer' decimal.Zero' true' int.MaxValue); " is 140.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "									tierPrices.AddRange (product.TierPrices.OrderBy (tp => tp.Quantity).ToList ().FilterByStore (_storeContext.CurrentStore.Id).FilterForCustomer (_workContext.CurrentCustomer).RemoveDuplicatedQuantities ()); " is 204.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The length of the statement  "									priceModel.Price = String.Format (_localizationService.GetResource ("Products.PriceRangeFrom")' _priceFormatter.FormatPrice (finalPrice)); " is 138.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,CategoryNavigation,The length of the statement  "	var customerRolesIds = _workContext.CurrentCustomer.CustomerRoles.Where (cr => cr.Active).Select (cr => cr.Id).ToList (); " is 121.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,CategoryNavigation,The length of the statement  "	string cacheKey = string.Format (ModelCacheEventConsumer.CATEGORY_NAVIGATION_MODEL_KEY' _workContext.WorkingLanguage.Id' string.Join ("'"' customerRolesIds)' _storeContext.CurrentStore.Id); " is 189.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,CategoryNavigation,The length of the statement  "		return PrepareCategorySimpleModels (0' null' 0' _catalogSettings.TopCategoryMenuSubcategoryLevelsToDisplay' true).ToList (); " is 124.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The length of the statement  "			AlternateText = string.Format (_localizationService.GetResource ("Media.Category.ImageAlternateTextFormat")' subCatName) " is 120.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The length of the statement  "	var products = _productService.SearchProducts (out filterableSpecificationAttributeOptionIds' categoryIds: categoryIds' storeId: _storeContext.CurrentStore.Id' visibleIndividuallyOnly: true' featuredProducts: null' orderBy: ProductSortingEnum.Position' pageIndex: command.PageNumber - 1' pageSize: command.PageSize); " is 316.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Search,The length of the statement  "	// only search if query string search keyword is set (used to avoid searching or displaying search term min length error message on /search page load) " is 150.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Search,The length of the statement  "			model.Warning = string.Format (_localizationService.GetResource ("Search.SearchTermMinimumLengthIsNCharacters")' _catalogSettings.ProductSearchTermMinimumLength); " is 162.
Long Statement,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Search,The length of the statement  "			products = _productService.SearchProducts (storeId: _storeContext.CurrentStore.Id' visibleIndividuallyOnly: true' keywords: model.Q' languageId: _workContext.WorkingLanguage.Id' pageIndex: command.PageNumber - 1' pageSize: command.PageSize); " is 241.
Long Statement,Nop.Plugin.Misc.FacebookShop.Infrastructure,DependencyRegistrar,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Infrastructure\DependencyRegistrar.cs,Register,The length of the statement  "	builder.RegisterType<MiscFacebookShopController> ().WithParameter (ResolvedParameter.ForNamed<ICacheManager> ("nop_cache_static")); " is 131.
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The following statement contains a magic number: foreach (var product in products) {  	var model = new ProductOverviewModel () {  		Id = product.Id'  		Name = product.GetLocalized (x => x.Name)'  		ShortDescription = product.GetLocalized (x => x.ShortDescription)'  		FullDescription = product.GetLocalized (x => x.FullDescription)'  		SeName = product.GetSeName ()'  	};  	//price  	if (preparePriceModel) {  		#region Prepare product price  		var priceModel = new ProductOverviewModel.ProductPriceModel ();  		switch (product.ProductType) {  		case ProductType.GroupedProduct:  			{  				#region Grouped product  				var associatedProducts = _productService.GetAssociatedProducts (product.Id' _storeContext.CurrentStore.Id);  				switch (associatedProducts.Count) {  				case 0:  					{  						//no associated products  						priceModel.OldPrice = null;  						priceModel.Price = null;  						priceModel.DisableBuyButton = true;  						priceModel.DisableWishlistButton = true;  						priceModel.AvailableForPreOrder = false;  					}  					break;  				default:  					{  						//we have at least one associated product  						priceModel.DisableBuyButton = true;  						priceModel.DisableWishlistButton = true;  						priceModel.AvailableForPreOrder = false;  						if (_permissionService.Authorize (StandardPermissionProvider.DisplayPrices)) {  							//find a minimum possible price  							decimal? minPossiblePrice = null;  							Product minPriceProduct = null;  							foreach (var associatedProduct in associatedProducts) {  								//calculate for the maximum quantity (in case if we have tier prices)  								var tmpPrice = _priceCalculationService.GetFinalPrice (associatedProduct' _workContext.CurrentCustomer' decimal.Zero' true' int.MaxValue);  								if (!minPossiblePrice.HasValue || tmpPrice < minPossiblePrice.Value) {  									minPriceProduct = associatedProduct;  									minPossiblePrice = tmpPrice;  								}  							}  							if (minPriceProduct != null && !minPriceProduct.CustomerEntersPrice) {  								if (minPriceProduct.CallForPrice) {  									priceModel.OldPrice = null;  									priceModel.Price = _localizationService.GetResource ("Products.CallForPrice");  								}  								else if (minPossiblePrice.HasValue) {  									//calculate prices  									decimal taxRate = decimal.Zero;  									decimal finalPriceBase = _taxService.GetProductPrice (minPriceProduct' minPossiblePrice.Value' out taxRate);  									decimal finalPrice = _currencyService.ConvertFromPrimaryStoreCurrency (finalPriceBase' _workContext.WorkingCurrency);  									priceModel.OldPrice = null;  									priceModel.Price = String.Format (_localizationService.GetResource ("Products.PriceRangeFrom")' _priceFormatter.FormatPrice (finalPrice));  								}  								else {  									//Actually it's not possible (we presume that minimalPrice always has a value)  									//We never should get here  									Debug.WriteLine (string.Format ("Cannot calculate minPrice for product #{0}"' product.Id));  								}  							}  						}  						else {  							//hide prices  							priceModel.OldPrice = null;  							priceModel.Price = null;  						}  					}  					break;  				}  				#endregion  			}  			break;  		case ProductType.SimpleProduct:  		default:  			{  				#region Simple product  				//add to cart button  				priceModel.DisableBuyButton = product.DisableBuyButton || !_permissionService.Authorize (StandardPermissionProvider.EnableShoppingCart) || !_permissionService.Authorize (StandardPermissionProvider.DisplayPrices);  				//add to wishlist button  				priceModel.DisableWishlistButton = product.DisableWishlistButton || !_permissionService.Authorize (StandardPermissionProvider.EnableWishlist) || !_permissionService.Authorize (StandardPermissionProvider.DisplayPrices);  				//pre-order  				if (product.AvailableForPreOrder) {  					priceModel.AvailableForPreOrder = !product.PreOrderAvailabilityStartDateTimeUtc.HasValue || product.PreOrderAvailabilityStartDateTimeUtc.Value >= DateTime.UtcNow;  					priceModel.PreOrderAvailabilityStartDateTimeUtc = product.PreOrderAvailabilityStartDateTimeUtc;  				}  				//prices  				if (_permissionService.Authorize (StandardPermissionProvider.DisplayPrices)) {  					//calculate for the maximum quantity (in case if we have tier prices)  					decimal minPossiblePrice = _priceCalculationService.GetFinalPrice (product' _workContext.CurrentCustomer' decimal.Zero' true' int.MaxValue);  					if (!product.CustomerEntersPrice) {  						if (product.CallForPrice) {  							//call for price  							priceModel.OldPrice = null;  							priceModel.Price = _localizationService.GetResource ("Products.CallForPrice");  						}  						else {  							//calculate prices  							decimal taxRate = decimal.Zero;  							decimal oldPriceBase = _taxService.GetProductPrice (product' product.OldPrice' out taxRate);  							decimal finalPriceBase = _taxService.GetProductPrice (product' minPossiblePrice' out taxRate);  							decimal oldPrice = _currencyService.ConvertFromPrimaryStoreCurrency (oldPriceBase' _workContext.WorkingCurrency);  							decimal finalPrice = _currencyService.ConvertFromPrimaryStoreCurrency (finalPriceBase' _workContext.WorkingCurrency);  							//do we have tier prices configured?  							var tierPrices = new List<TierPrice> ();  							if (product.HasTierPrices) {  								tierPrices.AddRange (product.TierPrices.OrderBy (tp => tp.Quantity).ToList ().FilterByStore (_storeContext.CurrentStore.Id).FilterForCustomer (_workContext.CurrentCustomer).RemoveDuplicatedQuantities ());  							}  							//When there is just one tier (with  qty 1)'   							//there are no actual savings in the list.  							bool displayFromMessage = tierPrices.Count > 0 && !(tierPrices.Count == 1 && tierPrices [0].Quantity <= 1);  							if (displayFromMessage) {  								priceModel.OldPrice = null;  								priceModel.Price = String.Format (_localizationService.GetResource ("Products.PriceRangeFrom")' _priceFormatter.FormatPrice (finalPrice));  							}  							else {  								if (finalPriceBase != oldPriceBase && oldPriceBase != decimal.Zero) {  									priceModel.OldPrice = _priceFormatter.FormatPrice (oldPrice);  									priceModel.Price = _priceFormatter.FormatPrice (finalPrice);  								}  								else {  									priceModel.OldPrice = null;  									priceModel.Price = _priceFormatter.FormatPrice (finalPrice);  								}  							}  						}  					}  				}  				else {  					//hide prices  					priceModel.OldPrice = null;  					priceModel.Price = null;  				}  				#endregion  			}  			break;  		}  		model.ProductPrice = priceModel;  		#endregion  	}  	//picture  	if (preparePictureModel) {  		#region Prepare product picture  		//If a size has been set in the view' we use it in priority  		int pictureSize = productThumbPictureSize.HasValue ? productThumbPictureSize.Value : 125;  		//prepare picture model  		var picture = _pictureService.GetPicturesByProductId (product.Id' 1).FirstOrDefault ();  		model.DefaultPictureModel = new PictureModel () {  			ImageUrl = _pictureService.GetPictureUrl (picture' pictureSize)'  			FullSizeImageUrl = _pictureService.GetPictureUrl (picture)'  			Title = string.Format (_localizationService.GetResource ("Media.Product.ImageLinkTitleFormat")' model.Name)'  			AlternateText = string.Format (_localizationService.GetResource ("Media.Product.ImageAlternateTextFormat")' model.Name)  		};  		#endregion  	}  	models.Add (model);  }  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,PrepareProductOverviewModels,The following statement contains a magic number: if (preparePictureModel) {  	#region Prepare product picture  	//If a size has been set in the view' we use it in priority  	int pictureSize = productThumbPictureSize.HasValue ? productThumbPictureSize.Value : 125;  	//prepare picture model  	var picture = _pictureService.GetPicturesByProductId (product.Id' 1).FirstOrDefault ();  	model.DefaultPictureModel = new PictureModel () {  		ImageUrl = _pictureService.GetPictureUrl (picture' pictureSize)'  		FullSizeImageUrl = _pictureService.GetPictureUrl (picture)'  		Title = string.Format (_localizationService.GetResource ("Media.Product.ImageLinkTitleFormat")' model.Name)'  		AlternateText = string.Format (_localizationService.GetResource ("Media.Product.ImageAlternateTextFormat")' model.Name)  	};  	#endregion  }  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The following statement contains a magic number: if (command.PageSize == 0) {  	command.PageSize = 8;  }  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The following statement contains a magic number: command.PageSize = 8;  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Category,The following statement contains a magic number: model.SubCategories = _categoryService.GetAllCategoriesByParentCategoryId (categoryId).Select (x =>  {  	var subCatName = x.GetLocalized (y => y.Name);  	var subCatModel = new CategoryModel () {  		Id = x.Id'  		Name = subCatName'  		SeName = x.GetSeName ()'  	};  	//prepare picture model  	int pictureSize = 125;  	var picture = _pictureService.GetPictureById (x.PictureId);  	subCatModel.PictureModel = new PictureModel () {  		FullSizeImageUrl = _pictureService.GetPictureUrl (picture)'  		ImageUrl = _pictureService.GetPictureUrl (picture' pictureSize)'  		Title = string.Format (_localizationService.GetResource ("Media.Category.ImageLinkTitleFormat")' subCatName)'  		AlternateText = string.Format (_localizationService.GetResource ("Media.Category.ImageAlternateTextFormat")' subCatName)  	};  	return subCatModel;  }).ToList ();  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Search,The following statement contains a magic number: if (command.PageSize == 0) {  	command.PageSize = 8;  }  
Magic Number,Nop.Plugin.Misc.FacebookShop.Controllers,MiscFacebookShopController,C:\repos\iowen8_FertilityWater_ECom\FertilityWaterStore\Plugins\Nop.Plugin.Misc.FacebookShop\Controllers\MiscFacebookShopController.cs,Search,The following statement contains a magic number: command.PageSize = 8;  
