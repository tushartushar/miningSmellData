Implementation smell,Namespace,Class,File,Method,Description
Long Statement,FreeDB.Playground,GzipFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\GzipFileParser.cs,Start,The length of the statement  "				Console.Write("\r{0'10:#'#} sec r-{1:#'#} w-{2:#'#} e-{3:#'#} l-{4:#'#}"' sp.Elapsed.TotalSeconds' _reads' _written' _entriesWrittern' _reads - _written); " is 154.
Long Statement,FreeDB.Playground,Program,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Program.cs,Main,The length of the statement  "			//var x = new XmcdFileParser(@"C:\Users\Ayende\Downloads\freedb-complete-20130901.tar.bz2"' new JsonFileDisksDestination()); " is 124.
Long Statement,FreeDB.Playground,XmcdFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\XmcdFileParser.cs,Start,The length of the statement  "				Console.Write("\r{0'10:#'#} sec reads: {1'10:#'#} parsed: {2'10:#'#} written: {3'10:#'#}"' sp.Elapsed.TotalSeconds' reads' " is 122.
Long Statement,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Add,The length of the statement  "			var key = new Regex(regex' RegexOptions.Compiled | RegexOptions.IgnoreCase | RegexOptions.IgnorePatternWhitespace|RegexOptions.Multiline); " is 138.
Magic Number,FreeDB.Playground,DateTimeSeries,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\DateTimeSeries.cs,AddRange,The following statement contains a magic number: using (var tx = _storageEnvironment.NewTransaction(TransactionFlags.ReadWrite))  		{  			var data = tx.GetTree("data");  			var buffer = new byte[16];  			var key = new Slice(buffer);  			var ms = new MemoryStream();  			foreach (var kvp in values)  			{  				var date = kvp.Key;  				EndianBitConverter.Big.CopyBytes(date.ToBinary()' buffer' 0);  				EndianBitConverter.Big.CopyBytes(_last++' buffer' 8);  				ms.SetLength(0);  				_serializer.Serialize(new StreamWriter(ms)' kvp.Value);  				ms.Position = 0;    				data.Add(tx' key' ms);  			}    			tx.State.Root.Add(tx' _lastKey' new MemoryStream(BitConverter.GetBytes(_last)));  			tx.Commit();  		}
Magic Number,FreeDB.Playground,DateTimeSeries,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\DateTimeSeries.cs,AddRange,The following statement contains a magic number: using (var tx = _storageEnvironment.NewTransaction(TransactionFlags.ReadWrite))  		{  			var data = tx.GetTree("data");  			var buffer = new byte[16];  			var key = new Slice(buffer);  			var ms = new MemoryStream();  			foreach (var kvp in values)  			{  				var date = kvp.Key;  				EndianBitConverter.Big.CopyBytes(date.ToBinary()' buffer' 0);  				EndianBitConverter.Big.CopyBytes(_last++' buffer' 8);  				ms.SetLength(0);  				_serializer.Serialize(new StreamWriter(ms)' kvp.Value);  				ms.Position = 0;    				data.Add(tx' key' ms);  			}    			tx.State.Root.Add(tx' _lastKey' new MemoryStream(BitConverter.GetBytes(_last)));  			tx.Commit();  		}
Magic Number,FreeDB.Playground,DateTimeSeries,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\DateTimeSeries.cs,ScanRange,The following statement contains a magic number: using (var tx = _storageEnvironment.NewTransaction(TransactionFlags.Read))  		{  			var data = tx.GetTree("data");  			var startBuffer = new byte[16];  			EndianBitConverter.Big.CopyBytes(start.ToBinary()' startBuffer' 0);  			var startKey = new Slice(startBuffer);    			using (var it = data.Iterate(tx))  			{  				var endBuffer = new byte[16];  				EndianBitConverter.Big.CopyBytes(end.ToBinary()' endBuffer' 0);  				EndianBitConverter.Big.CopyBytes(long.MaxValue' endBuffer' 8);    				it.MaxKey = new Slice(endBuffer);  				if (it.Seek(startKey) == false)  					yield break;  				do  				{  					var reader = it.CreateReaderForCurrent();  					using (var stream = reader.AsStream())  					{  						yield return _serializer.Deserialize<T>(new JsonTextReader(new StreamReader(stream)));  					}  				} while (it.MoveNext());  			}  		}
Magic Number,FreeDB.Playground,DateTimeSeries,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\DateTimeSeries.cs,ScanRange,The following statement contains a magic number: using (var tx = _storageEnvironment.NewTransaction(TransactionFlags.Read))  		{  			var data = tx.GetTree("data");  			var startBuffer = new byte[16];  			EndianBitConverter.Big.CopyBytes(start.ToBinary()' startBuffer' 0);  			var startKey = new Slice(startBuffer);    			using (var it = data.Iterate(tx))  			{  				var endBuffer = new byte[16];  				EndianBitConverter.Big.CopyBytes(end.ToBinary()' endBuffer' 0);  				EndianBitConverter.Big.CopyBytes(long.MaxValue' endBuffer' 8);    				it.MaxKey = new Slice(endBuffer);  				if (it.Seek(startKey) == false)  					yield break;  				do  				{  					var reader = it.CreateReaderForCurrent();  					using (var stream = reader.AsStream())  					{  						yield return _serializer.Deserialize<T>(new JsonTextReader(new StreamReader(stream)));  					}  				} while (it.MoveNext());  			}  		}
Magic Number,FreeDB.Playground,DateTimeSeries,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\DateTimeSeries.cs,ScanRange,The following statement contains a magic number: using (var tx = _storageEnvironment.NewTransaction(TransactionFlags.Read))  		{  			var data = tx.GetTree("data");  			var startBuffer = new byte[16];  			EndianBitConverter.Big.CopyBytes(start.ToBinary()' startBuffer' 0);  			var startKey = new Slice(startBuffer);    			using (var it = data.Iterate(tx))  			{  				var endBuffer = new byte[16];  				EndianBitConverter.Big.CopyBytes(end.ToBinary()' endBuffer' 0);  				EndianBitConverter.Big.CopyBytes(long.MaxValue' endBuffer' 8);    				it.MaxKey = new Slice(endBuffer);  				if (it.Seek(startKey) == false)  					yield break;  				do  				{  					var reader = it.CreateReaderForCurrent();  					using (var stream = reader.AsStream())  					{  						yield return _serializer.Deserialize<T>(new JsonTextReader(new StreamReader(stream)));  					}  				} while (it.MoveNext());  			}  		}
Magic Number,FreeDB.Playground,GzipFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\GzipFileParser.cs,Start,The following statement contains a magic number: while (run)  			{  				var tasks = new[] { reader' writer' Task.Delay(1000) };  				var array = tasks  					.Where(x => x.IsCompleted == false)  					.ToArray();  				if (tasks.Any(x => x.IsFaulted))  				{  					tasks.First(x => x.IsFaulted).Wait();  				}  				if (array.Length > 1)  					Task.WaitAny(array);  				else  					run = false;  				Console.Write("\r{0'10:#'#} sec r-{1:#'#} w-{2:#'#} e-{3:#'#} l-{4:#'#}"' sp.Elapsed.TotalSeconds' _reads' _written' _entriesWrittern' _reads - _written);  			}
Magic Number,FreeDB.Playground,VoronDisksDestination,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\VoronDisksDestination.cs,Accept,The following statement contains a magic number: if (counter%1000 == 0)  			{  				_storageEnvironment.Writer.Write(_currentBatch);  				_currentBatch = new WriteBatch();  			}
Magic Number,FreeDB.Playground,VoronEntriesDestination,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\VoronEntriesDestination.cs,Accept,The following statement contains a magic number: if (counter % 500 == 0)  			{  				_storageEnvironment.Writer.Write(_currentBatch);  				_currentBatch = new WriteBatch();  			}
Magic Number,FreeDB.Playground,XmcdFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\XmcdFileParser.cs,Start,The following statement contains a magic number: while (true)  			{  				var tasks = new[] { reader' parser' processer' Task.Delay(1000) };  				var array = tasks  					.Where(x => x.IsCompleted == false)  					.ToArray();  				if (tasks.Any(x => x.IsFaulted))  				{  					tasks.First(x => x.IsFaulted).Wait();  				}  				if (array.Length <= 1)  					break;  				Task.WaitAny(array);  				Console.Write("\r{0'10:#'#} sec reads: {1'10:#'#} parsed: {2'10:#'#} written: {3'10:#'#}"' sp.Elapsed.TotalSeconds' reads'  					parsed' writtern);  			}
Magic Number,FreeDB.Playground,XmcdFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\XmcdFileParser.cs,ReadFile,The following statement contains a magic number: var buffer = new byte[1024 * 1024];
Magic Number,FreeDB.Playground,XmcdFileParser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\XmcdFileParser.cs,ReadFile,The following statement contains a magic number: var buffer = new byte[1024 * 1024];
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add(@"^\# \s* Track \s+ frame \s+ offsets \s*: \s* \n (^\# \s* (\d+) \s* \n)+"' (disk' collection) =>  			{  				foreach (Capture capture in collection[0].Groups[2].Captures)  				{  					disk.TrackFramesOffsets.Add(int.Parse(capture.Value));  				}  			});
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add("DTITLE=(.+)"' (disk' collection) =>  			{  				var parts = collection[0].Groups[1].Value.Split(new[] {"/"}' 2' StringSplitOptions.RemoveEmptyEntries);  				if (parts.Length == 2)  				{  					disk.Artist = parts[0].Trim();  					disk.Title = parts[1].Trim();  				}  				else  				{  					disk.Title = parts[0].Trim();  				}  			});
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add("DTITLE=(.+)"' (disk' collection) =>  			{  				var parts = collection[0].Groups[1].Value.Split(new[] {"/"}' 2' StringSplitOptions.RemoveEmptyEntries);  				if (parts.Length == 2)  				{  					disk.Artist = parts[0].Trim();  					disk.Title = parts[1].Trim();  				}  				else  				{  					disk.Title = parts[0].Trim();  				}  			});
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add(@"DYEAR=(\d+)"' (disk' collection) =>  			{  				if (collection.Count == 0)  					return;  				var value = collection[0].Groups[1].Value;  				if(value.Length > 4) // there is data like this  				{  					value = value.Substring(value.Length - 4);  				}  				disk.Year = int.Parse(value);  			}  			);
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add(@"DYEAR=(\d+)"' (disk' collection) =>  			{  				if (collection.Count == 0)  					return;  				var value = collection[0].Groups[1].Value;  				if(value.Length > 4) // there is data like this  				{  					value = value.Substring(value.Length - 4);  				}  				disk.Year = int.Parse(value);  			}  			);
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add(@"(EXTD\d*)=(.+)"' (disk' collection) =>  			{  				foreach (Match match in collection)  				{  					var key = match.Groups[1].Value;  					string value;  					if (disk.Attributes.TryGetValue(key' out value))  					{  						disk.Attributes[key] = value + match.Groups[2].Value.Trim();  					}  					else  					{  						disk.Attributes[key] = match.Groups[2].Value.Trim();  					}  				}  			});
Magic Number,XmcdParser,Parser,C:\repos\ayende_raven.voron\Performance.Comparison\FreeDB.Playground\Parser.cs,Parser,The following statement contains a magic number: Add(@"(EXTD\d*)=(.+)"' (disk' collection) =>  			{  				foreach (Match match in collection)  				{  					var key = match.Groups[1].Value;  					string value;  					if (disk.Attributes.TryGetValue(key' out value))  					{  						disk.Attributes[key] = value + match.Groups[2].Value.Trim();  					}  					else  					{  						disk.Attributes[key] = match.Groups[2].Value.Trim();  					}  				}  			});
