Implementation smell,Namespace,Class,File,Method,Description
Long Method,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The method has 115 lines of code.
Complex Method,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,Cyclomatic complexity of the method is 13
Empty Catch Block,BilibiliDM_PluginFramework,DMPlugin,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DMPlugin.cs,MainConnected,The method has an empty catch block.
Empty Catch Block,BilibiliDM_PluginFramework,DMPlugin,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DMPlugin.cs,MainReceivedDanMaku,The method has an empty catch block.
Empty Catch Block,BilibiliDM_PluginFramework,DMPlugin,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DMPlugin.cs,MainReceivedRoomCount,The method has an empty catch block.
Empty Catch Block,BilibiliDM_PluginFramework,DMPlugin,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DMPlugin.cs,MainDisconnected,The method has an empty catch block.
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
Magic Number,BilibiliDM_PluginFramework,DanmakuModel,D:\research\architectureSmells\repos\copyliu_bililive_dm\BilibiliDM_PluginFramework\DanmakuModel.cs,DanmakuModel,The following statement contains a magic number: switch(version)              {                  case 1:                      {                          var obj = JArray.Parse(JSON);                            CommentText = obj[1].ToString();                          UserName = obj[2][1].ToString();                          MsgType = MsgTypeEnum.Comment;                          RawDataJToken = obj;                          break;                      }                  case 2:                      {                          var obj = JObject.Parse(JSON);                          RawDataJToken = obj;                          string cmd = obj["cmd"].ToString();                          switch(cmd)                          {                              case "LIVE":                                  MsgType = MsgTypeEnum.LiveStart;                                  roomID = obj["roomid"].ToString();                                  break;                              case "PREPARING":                                  MsgType = MsgTypeEnum.LiveEnd;                                  roomID = obj["roomid"].ToString();                                  break;                              case "DANMU_MSG":                                  MsgType = MsgTypeEnum.Comment;                                  CommentText = obj["info"][1].ToString();                                  UserID = obj["info"][2][0].ToObject<int>();                                  UserName = obj["info"][2][1].ToString();                                  isAdmin = obj["info"][2][2].ToString() == "1";                                  isVIP = obj["info"][2][3].ToString() == "1";                                  UserGuardLevel = obj["info"][7].ToObject<int>();                                  break;                              case "SEND_GIFT":                                  MsgType = MsgTypeEnum.GiftSend;                                  GiftName = obj["data"]["giftName"].ToString();                                  UserName = obj["data"]["uname"].ToString();                                  UserID = obj["data"]["uid"].ToObject<int>();                                  // Giftrcost = obj["data"]["rcost"].ToString();                                  GiftCount = obj["data"]["num"].ToObject<int>();                                  break;                              case "GIFT_TOP":                                  {                                      MsgType = MsgTypeEnum.GiftTop;                                      var alltop = obj["data"].ToList();                                      GiftRanking = new List<GiftRank>();                                      foreach(var v in alltop)                                      {                                          GiftRanking.Add(new GiftRank()                                          {                                              uid = v.Value<int>("uid")'                                              UserName = v.Value<string>("uname")'                                              coin = v.Value<decimal>("coin")                                            });                                      }                                      break;                                  }                              case "WELCOME":                                  {                                      MsgType = MsgTypeEnum.Welcome;                                      UserName = obj["data"]["uname"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      isVIP = true;                                      isAdmin = obj["data"]["isadmin"].ToString() == "1";                                      break;                                    }                              case "WELCOME_GUARD":                                  {                                      MsgType = MsgTypeEnum.WelcomeGuard;                                      UserName = obj["data"]["username"].ToString();                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      break;                                  }                              case "GUARD_BUY":                                  {                                      MsgType = MsgTypeEnum.GuardBuy;                                      UserID = obj["data"]["uid"].ToObject<int>();                                      UserName = obj["data"]["username"].ToString();                                      UserGuardLevel = obj["data"]["guard_level"].ToObject<int>();                                      GiftName = UserGuardLevel == 3 ? "舰长" : UserGuardLevel == 2 ? "提督" : UserGuardLevel == 1 ? "总督" : "";                                      GiftCount = obj["data"]["num"].ToObject<int>();                                      break;                                  }                              default:                                  {                                      MsgType = MsgTypeEnum.Unknown;                                      break;                                  }                          }                            if (cmd.StartsWith("DANMU_MSG")) // "高考"fix                          {                              MsgType = MsgTypeEnum.Comment;                              CommentText = obj["info"][1].ToString();                              UserID = obj["info"][2][0].ToObject<int>();                              UserName = obj["info"][2][1].ToString();                              isAdmin = obj["info"][2][2].ToString() == "1";                              isVIP = obj["info"][2][3].ToString() == "1";                              UserGuardLevel = obj["info"][7].ToObject<int>();                              break;                          }                            break;                      }                    default:                      throw new Exception();              }
