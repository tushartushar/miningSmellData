Implementation smell,Namespace,Class,File,Method,Description
Long Method,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,GetrequestMessaageDoc,The method has 219 lines of code.
Long Method,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The method has 130 lines of code.
Long Parameter List,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The method has 6 parameters. Parameters: url' token' requestType' eventType' testConcurrence' testConcurrenceCount
Long Identifier,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the parameter ecryptResponseDocumentFileName is 30.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,CacheController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\CacheController.cs,RunTest,The length of the statement  "                var finalBagKey = containerCacheStrategy.GetFinalKey(ContainerHelper.GetItemCacheKey(typeof(TestContainerBag1)' shortBagKey));//获取最终缓存中的键 " is 137.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,FilterTestController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\FilterTestController.cs,Index,The length of the statement  "            return Content("访问正常。当前地址：" + url + "<br />请点击右上角转发按钮，使用【在浏览器中打开】功能进行测试！<br />或者也可以直接在外部浏览器打开 http://sdk.weixin.senparc.com/FilterTest/ 进行测试。"); " is 144.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,FilterTestController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\FilterTestController.cs,Redirect,The length of the statement  "            return Content("访问正常。当前地址：" + url + "<br />请点击右上角转发按钮，使用【在浏览器中打开】功能进行测试！<br />或者也可以直接在外部浏览器打开 http://sdk.weixin.senparc.com/FilterTest/Redirect 进行测试。"); " is 152.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,MenuController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\MenuController.cs,GetMenu,The length of the statement  "                return Json(new { error = "菜单不存在或验证失败：" + ex.Message }' new JsonSerializerSettings() { ContractResolver = new DefaultContractResolver() }); " is 139.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,MenuController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\MenuController.cs,GetMenu,The length of the statement  "                return Json(new { error = "菜单不存在或验证失败：" + ex.Message }' new JsonSerializerSettings() { ContractResolver = new DefaultContractResolver() }); " is 139.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,TestAsyncTask,The length of the statement  "                    Senparc.Weixin.Helpers.DateTimeHelper.GetWeixinDateTime(DateTime.Now.AddSeconds(Thread.CurrentThread.GetHashCode())).ToString(); " is 128.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The length of the statement  "                    var msg = string.Format("{0}\r\n{1}\r\n{2}"' ex.Message' null' ex.InnerException != null ? ex.InnerException.Message : null); " is 125.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Get,The length of the statement  "                return Content("failed:" + postModel.Signature + "'" + MP.CheckSignature.GetSignature(postModel.Timestamp' postModel.Nonce' token) + "。" + " is 138.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the statement  "                var requestDocumentFileName = Path.Combine(logPath' string.Format("{0}_Request_{1}.txt"' _getRandomFileName()' messageHandler.RequestMessage.FromUserName)); " is 156.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the statement  "                var ecryptRequestDocumentFileName = Path.Combine(logPath' string.Format("{0}_Request_Ecrypt_{1}.txt"' _getRandomFileName()' messageHandler.RequestMessage.FromUserName)); " is 169.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the statement  "                var responseDocumentFileName = Path.Combine(logPath' string.Format("{0}_Response_{1}.txt"' _getRandomFileName()' messageHandler.RequestMessage.FromUserName)); " is 158.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the statement  "                var ecryptResponseDocumentFileName = Path.Combine(logPath' string.Format("{0}_Response_Final_{1}.txt"' _getRandomFileName()' messageHandler.RequestMessage.FromUserName)); " is 170.
Long Statement,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The length of the statement  "                using (var fs = new FileStream(Server.GetMapPath("~/App_Data/Error_" + _getRandomFileName() + ".txt")' FileMode.CreateNew' FileAccess.ReadWrite)) " is 145.
Long Statement,Senparc.Weixin.MP.CoreSample,Startup,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Startup.cs,RegisterWeixinPay,The length of the statement  "            var weixinPayInfo = new TenPayInfo(weixinPay_PartnerId' weixinPay_Key' weixinPay_AppId' weixinPay_AppKey' weixinPay_TenpayNotify); " is 130.
Long Statement,Senparc.Weixin.MP.CoreSample,Startup,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Startup.cs,RegisterWeixinPay,The length of the statement  "            var tenPayV3Info = new TenPayV3Info(tenPayV3_AppId' tenPayV3_AppSecret' tenPayV3_MchId' tenPayV3_Key'tenPayV3_TenpayNotify); " is 124.
Long Statement,Senparc.Weixin.MP.CoreSample,Startup,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Startup.cs,RegisterWeixinThirdParty,The length of the statement  "            Action<string' string' RefreshAuthorizerTokenResult> authorizerTokenRefreshedFunc = (componentAppId' auhtorizerId' refreshResult) => " is 132.
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,AsyncMethodsController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\AsyncMethodsController.cs,QrCodeTest,The following statement contains a magic number: var sceneId = int.Parse(ticks.Substring(ticks.Length - 7' 7));
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,AsyncMethodsController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\AsyncMethodsController.cs,QrCodeTest,The following statement contains a magic number: var sceneId = int.Parse(ticks.Substring(ticks.Length - 7' 7));
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,AsyncMethodsController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\AsyncMethodsController.cs,QrCodeTest,The following statement contains a magic number: var qrResult = await QrCodeApi.CreateAsync(appId' 100' sceneId' QrCode_ActionName.QR_SCENE' "QrTest");
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,AsyncMethodsController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\AsyncMethodsController.cs,GetRemoteData,The following statement contains a magic number: await Task.Run(() =>              {                  Task.Delay(1000);                  result = "hi " + DateTime.Now.ToString();              });
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,AsyncMethodsController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\AsyncMethodsController.cs,GetRemoteData2,The following statement contains a magic number: await Task.Run(() =>              {                  Task.Delay(1000);                  result = "hi " + DateTime.Now.ToString();              }).ConfigureAwait(false);
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,CacheController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\CacheController.cs,RunTest,The following statement contains a magic number: for (int i = 0; i < 3; i++)              {                  sb.AppendFormat("<br />====== {0}：{1} ======<br /><br />"' "开始一轮测试"' i + 1);                  var shortBagKey = DateTime.Now.Ticks.ToString();                  var finalBagKey = containerCacheStrategy.GetFinalKey(ContainerHelper.GetItemCacheKey(typeof(TestContainerBag1)' shortBagKey));//获取最终缓存中的键                  var bag = new TestContainerBag1()                  {                      Key = shortBagKey'                      DateTime = DateTime.Now                  };                  TestContainer1.Update(shortBagKey' bag); //更新到缓存（队列）                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "bag.DateTime"' bag.DateTime.ToString()'                      bag.DateTime.Ticks);                    Thread.Sleep(1);                    bag.DateTime = DateTime.Now; //进行修改                    //读取队列                  var mq = new SenparcMessageQueue();                  var mqKey = SenparcMessageQueue.GenerateKey("ContainerBag"' bag.GetType()' bag.Key' "UpdateContainerBag");                  var mqItem = mq.GetItem(mqKey);                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "bag.DateTime"' bag.DateTime.ToString()'                      bag.DateTime.Ticks);                  sb.AppendFormat("{0}：{1}<br />"' "已经加入队列"' mqItem != null);                  sb.AppendFormat("{0}：{1}<br />"' "当前消息队列数量（未更新缓存）"' mq.GetCount());                    var itemCollection = containerCacheStrategy.GetAll<TestContainerBag1>();                  var existed = itemCollection.ContainsKey(finalBagKey);                  sb.AppendFormat("{0}：{1}<br />"' "当前缓存是否存在"' existed);                  sb.AppendFormat("{0}：{1}<br />"' "插入缓存时间"'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.Ticks.ToString()); //应为0                    var waitSeconds = i;                  sb.AppendFormat("{0}：{1}<br />"' "操作"' "等待" + waitSeconds + "秒");                  Thread.Sleep(waitSeconds * 1000); //线程默认轮询等待时间为2秒                  sb.AppendFormat("{0}：{1}<br />"' "当前消息队列数量（未更新缓存）"' mq.GetCount());                    itemCollection = containerCacheStrategy.GetAll<TestContainerBag1>();                  existed = itemCollection.ContainsKey(finalBagKey);                  finalExisted = existed;                  sb.AppendFormat("{0}：{1}<br />"' "当前缓存是否存在"' existed);                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "插入缓存时间"'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.ToString()'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.Ticks.ToString()); //应为当前加入到缓存的最新时间                }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,CacheController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\CacheController.cs,RunTest,The following statement contains a magic number: for (int i = 0; i < 3; i++)              {                  sb.AppendFormat("<br />====== {0}：{1} ======<br /><br />"' "开始一轮测试"' i + 1);                  var shortBagKey = DateTime.Now.Ticks.ToString();                  var finalBagKey = containerCacheStrategy.GetFinalKey(ContainerHelper.GetItemCacheKey(typeof(TestContainerBag1)' shortBagKey));//获取最终缓存中的键                  var bag = new TestContainerBag1()                  {                      Key = shortBagKey'                      DateTime = DateTime.Now                  };                  TestContainer1.Update(shortBagKey' bag); //更新到缓存（队列）                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "bag.DateTime"' bag.DateTime.ToString()'                      bag.DateTime.Ticks);                    Thread.Sleep(1);                    bag.DateTime = DateTime.Now; //进行修改                    //读取队列                  var mq = new SenparcMessageQueue();                  var mqKey = SenparcMessageQueue.GenerateKey("ContainerBag"' bag.GetType()' bag.Key' "UpdateContainerBag");                  var mqItem = mq.GetItem(mqKey);                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "bag.DateTime"' bag.DateTime.ToString()'                      bag.DateTime.Ticks);                  sb.AppendFormat("{0}：{1}<br />"' "已经加入队列"' mqItem != null);                  sb.AppendFormat("{0}：{1}<br />"' "当前消息队列数量（未更新缓存）"' mq.GetCount());                    var itemCollection = containerCacheStrategy.GetAll<TestContainerBag1>();                  var existed = itemCollection.ContainsKey(finalBagKey);                  sb.AppendFormat("{0}：{1}<br />"' "当前缓存是否存在"' existed);                  sb.AppendFormat("{0}：{1}<br />"' "插入缓存时间"'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.Ticks.ToString()); //应为0                    var waitSeconds = i;                  sb.AppendFormat("{0}：{1}<br />"' "操作"' "等待" + waitSeconds + "秒");                  Thread.Sleep(waitSeconds * 1000); //线程默认轮询等待时间为2秒                  sb.AppendFormat("{0}：{1}<br />"' "当前消息队列数量（未更新缓存）"' mq.GetCount());                    itemCollection = containerCacheStrategy.GetAll<TestContainerBag1>();                  existed = itemCollection.ContainsKey(finalBagKey);                  finalExisted = existed;                  sb.AppendFormat("{0}：{1}<br />"' "当前缓存是否存在"' existed);                  sb.AppendFormat("{0}：{1}（Ticks：{2}）<br />"' "插入缓存时间"'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.ToString()'                      !existed ? "不存在" : itemCollection[finalBagKey].CacheTime.Ticks.ToString()); //应为当前加入到缓存的最新时间                }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,MediaController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\MediaController.cs,TestUploadMediaFile,The following statement contains a magic number: using (FileStream ms = new FileStream(Server.GetMapPath("~/TestUploadMediaFile.jpg")' FileMode.OpenOrCreate))              {                  inputStream.CopyTo(ms' 256);              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,MenuController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\MenuController.cs,Index,The following statement contains a magic number: for (int i = 0; i < 3; i++)              {                  var subButton = new SubButton();                  for (int j = 0; j < 5; j++)                  {                      var singleButton = new SingleClickButton();                      subButton.sub_button.Add(singleButton);                  }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,MenuController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\MenuController.cs,Index,The following statement contains a magic number: for (int i = 0; i < 3; i++)              {                  var subButton = new SubButton();                  for (int j = 0; j < 5; j++)                  {                      var singleButton = new SingleClickButton();                      subButton.sub_button.Add(singleButton);                  }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,TestAsyncTask,The following statement contains a magic number: var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString()' 1000 * 20);
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,TestAsyncTask,The following statement contains a magic number: var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString()' 1000 * 20);
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,TestAsyncTask,The following statement contains a magic number: Thread.Sleep(100);
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The following statement contains a magic number: using (MemoryStream ms = new MemoryStream())              {                  var requestMessaageDoc = GetrequestMessaageDoc(url' token' requestType' eventType);    #if NET45                  requestMessaageDoc.Save(ms);                  ms.Seek(0' SeekOrigin.Begin);  #else                  var docStr = requestMessaageDoc.ToString();                  using (var sr = new StreamWriter(ms))                  {                      sr.Write(docStr);                      ms.Seek(0' SeekOrigin.Begin);                  }  #endif                    var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString());                    if (string.IsNullOrEmpty(responseMessageXml))                  {                      responseMessageXml = "返回消息为空，可能已经被去重。\r\nMsgId相同的连续消息将被自动去重。";                  }                    try                  {                      DateTime dt1 = DateTime.Now;                      if (testConcurrence)                      {                          testConcurrenceCount = testConcurrenceCount > 30 ? 30 : testConcurrenceCount;//设定最高限额                            //模拟并发请求                          List<Task<string>> taskList = new List<Task<string>>();                          for (int i = 0; i < testConcurrenceCount; i++)                          {                              var task = Task.Factory.StartNew(() => TestAsyncTask(url' token' requestMessaageDoc));                              taskList.Add(task);                          }                          Task.WaitAll(taskList.ToArray()' 1000 * 10);                      }                      DateTime dt2 = DateTime.Now;                        return Json(new                      {                          Success = true'                          LoadTime = (dt2 - dt1).TotalMilliseconds.ToString("##.####")'                          Result = responseMessageXml                      }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                  }                  catch (Exception ex)                  {                      var msg = string.Format("{0}\r\n{1}\r\n{2}"' ex.Message' null' ex.InnerException != null ? ex.InnerException.Message : null);                      return Json(new { Success = false' Result = msg }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                    }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The following statement contains a magic number: using (MemoryStream ms = new MemoryStream())              {                  var requestMessaageDoc = GetrequestMessaageDoc(url' token' requestType' eventType);    #if NET45                  requestMessaageDoc.Save(ms);                  ms.Seek(0' SeekOrigin.Begin);  #else                  var docStr = requestMessaageDoc.ToString();                  using (var sr = new StreamWriter(ms))                  {                      sr.Write(docStr);                      ms.Seek(0' SeekOrigin.Begin);                  }  #endif                    var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString());                    if (string.IsNullOrEmpty(responseMessageXml))                  {                      responseMessageXml = "返回消息为空，可能已经被去重。\r\nMsgId相同的连续消息将被自动去重。";                  }                    try                  {                      DateTime dt1 = DateTime.Now;                      if (testConcurrence)                      {                          testConcurrenceCount = testConcurrenceCount > 30 ? 30 : testConcurrenceCount;//设定最高限额                            //模拟并发请求                          List<Task<string>> taskList = new List<Task<string>>();                          for (int i = 0; i < testConcurrenceCount; i++)                          {                              var task = Task.Factory.StartNew(() => TestAsyncTask(url' token' requestMessaageDoc));                              taskList.Add(task);                          }                          Task.WaitAll(taskList.ToArray()' 1000 * 10);                      }                      DateTime dt2 = DateTime.Now;                        return Json(new                      {                          Success = true'                          LoadTime = (dt2 - dt1).TotalMilliseconds.ToString("##.####")'                          Result = responseMessageXml                      }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                  }                  catch (Exception ex)                  {                      var msg = string.Format("{0}\r\n{1}\r\n{2}"' ex.Message' null' ex.InnerException != null ? ex.InnerException.Message : null);                      return Json(new { Success = false' Result = msg }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                    }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The following statement contains a magic number: using (MemoryStream ms = new MemoryStream())              {                  var requestMessaageDoc = GetrequestMessaageDoc(url' token' requestType' eventType);    #if NET45                  requestMessaageDoc.Save(ms);                  ms.Seek(0' SeekOrigin.Begin);  #else                  var docStr = requestMessaageDoc.ToString();                  using (var sr = new StreamWriter(ms))                  {                      sr.Write(docStr);                      ms.Seek(0' SeekOrigin.Begin);                  }  #endif                    var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString());                    if (string.IsNullOrEmpty(responseMessageXml))                  {                      responseMessageXml = "返回消息为空，可能已经被去重。\r\nMsgId相同的连续消息将被自动去重。";                  }                    try                  {                      DateTime dt1 = DateTime.Now;                      if (testConcurrence)                      {                          testConcurrenceCount = testConcurrenceCount > 30 ? 30 : testConcurrenceCount;//设定最高限额                            //模拟并发请求                          List<Task<string>> taskList = new List<Task<string>>();                          for (int i = 0; i < testConcurrenceCount; i++)                          {                              var task = Task.Factory.StartNew(() => TestAsyncTask(url' token' requestMessaageDoc));                              taskList.Add(task);                          }                          Task.WaitAll(taskList.ToArray()' 1000 * 10);                      }                      DateTime dt2 = DateTime.Now;                        return Json(new                      {                          Success = true'                          LoadTime = (dt2 - dt1).TotalMilliseconds.ToString("##.####")'                          Result = responseMessageXml                      }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                  }                  catch (Exception ex)                  {                      var msg = string.Format("{0}\r\n{1}\r\n{2}"' ex.Message' null' ex.InnerException != null ? ex.InnerException.Message : null);                      return Json(new { Success = false' Result = msg }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                    }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,SimulateToolController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\SimulateToolController.cs,Index,The following statement contains a magic number: using (MemoryStream ms = new MemoryStream())              {                  var requestMessaageDoc = GetrequestMessaageDoc(url' token' requestType' eventType);    #if NET45                  requestMessaageDoc.Save(ms);                  ms.Seek(0' SeekOrigin.Begin);  #else                  var docStr = requestMessaageDoc.ToString();                  using (var sr = new StreamWriter(ms))                  {                      sr.Write(docStr);                      ms.Seek(0' SeekOrigin.Begin);                  }  #endif                    var responseMessageXml = MessageAgent.RequestXml(null' url' token' requestMessaageDoc.ToString());                    if (string.IsNullOrEmpty(responseMessageXml))                  {                      responseMessageXml = "返回消息为空，可能已经被去重。\r\nMsgId相同的连续消息将被自动去重。";                  }                    try                  {                      DateTime dt1 = DateTime.Now;                      if (testConcurrence)                      {                          testConcurrenceCount = testConcurrenceCount > 30 ? 30 : testConcurrenceCount;//设定最高限额                            //模拟并发请求                          List<Task<string>> taskList = new List<Task<string>>();                          for (int i = 0; i < testConcurrenceCount; i++)                          {                              var task = Task.Factory.StartNew(() => TestAsyncTask(url' token' requestMessaageDoc));                              taskList.Add(task);                          }                          Task.WaitAll(taskList.ToArray()' 1000 * 10);                      }                      DateTime dt2 = DateTime.Now;                        return Json(new                      {                          Success = true'                          LoadTime = (dt2 - dt1).TotalMilliseconds.ToString("##.####")'                          Result = responseMessageXml                      }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                  }                  catch (Exception ex)                  {                      var msg = string.Format("{0}\r\n{1}\r\n{2}"' ex.Message' null' ex.InnerException != null ? ex.InnerException.Message : null);                      return Json(new { Success = false' Result = msg }' new JsonSerializerSettings()                      {                          ContractResolver = new DefaultContractResolver()                      });                    }              }
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,Post,The following statement contains a magic number: var maxRecordCount = 10;
Magic Number,Senparc.Weixin.MP.CoreSample.Controllers,WeixinController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\WeixinController.cs,MiniPost,The following statement contains a magic number: var messageHandler = new CustomMessageHandler(Request.Body' postModel' 10);
Magic Number,Senparc.Weixin.MP.Sample.Controllers,DocumentController,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Controllers\DocumentController.cs,Index,The following statement contains a magic number: var qrResult = AdvancedAPIs.QrCodeApi.Create(appId'10000' qrCodeId' QrCode_ActionName.QR_SCENE);
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample.Models,ProductModel,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Models\ProductModel.cs,GetFakeProductList,The following statement contains a magic number: var list = ProductList ?? new List<ProductModel>()              {                  new ProductModel(1'"产品1"'(decimal)1.00)'                  new ProductModel(2'"产品2"'(decimal)2.00)'                  new ProductModel(3'"产品3"'(decimal)3.00)'                  new ProductModel(4'"产品4"'(decimal)4.00)'                  new ProductModel(5'"捐赠1"'(decimal)10.00)'                  new ProductModel(6'"捐赠2"'(decimal)50.00)'                  new ProductModel(7'"捐赠3"'(decimal)100.00)'                  new ProductModel(8'"捐赠4"'(decimal)500.00)'              };
Magic Number,Senparc.Weixin.MP.CoreSample,Startup,C:\repos\JeffreySu_WeiXinMPSDK\src\Senparc.Weixin.MP.Sample.vs2017\Senparc.Weixin.MP.CoreSample\Startup.cs,RegisterWeixinCache,The following statement contains a magic number: var memcachedConfig = new Dictionary<string' int>()              {                  { "localhost"'9101 }              };
