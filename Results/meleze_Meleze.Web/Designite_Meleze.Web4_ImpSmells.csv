Implementation smell,Namespace,Class,File,Method,Description
Long Method,Meleze.Web.Razor,MinifyHtmlWebRazorHostFactory,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlWebRazorHostFactory.cs,MinifyHtmlWebRazorHostFactory,The method has 105 lines of code.
Complex Method,Meleze.Web.Razor,MinifyHtmlWebRazorHostFactory,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlWebRazorHostFactory.cs,MinifyHtmlWebRazorHostFactory,Cyclomatic complexity of the method is 9
Long Parameter List,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyAggressivelyHTML,The method has 5 parameters. Parameters: content' builder' previousTokenEndsWithBlockElement' previousIsWhiteSpace' insideScript
Long Identifier,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,AnalyseContent,The length of the parameter previousTokenEndsWithBlockElement is 33.
Long Identifier,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,Minify,The length of the parameter previousTokenEndsWithBlockElement is 33.
Long Identifier,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyAggressivelyHTML,The length of the parameter previousTokenEndsWithBlockElement is 33.
Long Identifier,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,MinifyMarkup,The length of the parameter previousTokenEndsWithBlockElement is 33.
Long Statement,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,Minify,The length of the statement  "                content = MinifyAggressivelyHTML(content' builder' previousTokenEndsWithBlockElement' previousIsWhiteSpace' insideScript); " is 122.
Long Statement,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,StartsWithBlockElement,The length of the statement  "            return content[0] == '<' && (_blockElementsOpenStarts.Any(b => content.StartsWith(b)) || _blockElementsCloseStarts.Any(b => content.StartsWith(b))); " is 148.
Long Statement,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,FlattenHTMLAttributes,The length of the statement  "                if ((subblock == null) || (!subblock.Children.All(c => c is Span && ((Span)c).Kind == SpanKind.Markup && ((Span)c).Content.StartsWith("~/")))) " is 142.
Long Statement,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,MinifyMarkup,The length of the statement  "                    while ((markup != null) && (markup.Kind == SpanKind.Markup) && ((markup.Next == null) || ((markup.Next != null) && ((markup.Next.Kind == SpanKind.Markup) || ((markup.Next.Kind != SpanKind.Markup) && !markup.Content.EndsWith("\"")))))) " is 234.
Long Statement,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,MinifyMarkup,The length of the statement  "                var builder = new SpanBuilder() { CodeGenerator = codeGenerator' EditHandler = span.EditHandler' Kind = span.Kind' Start = span.Start }; " is 136.
Complex Conditional,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascript,The conditional expression  "(insideScript && iscriptstart == 0) || (iscriptend < 0) || ((iscriptautoend > 0) && (iscriptautoend < iscriptend))"  is complex.
Complex Conditional,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,FlattenHTMLAttributes,The conditional expression  "(subblock == null) || (!subblock.Children.All(c => c is Span && ((Span)c).Kind == SpanKind.Markup && ((Span)c).Content.StartsWith("~/")))"  is complex.
Complex Conditional,Meleze.Web.Razor,MinifyHtmlParser,C:\repos\meleze_Meleze.Web\Meleze.Web4\Razor\MinifyHtmlParser.cs,MinifyMarkup,The conditional expression  "(markup != null) && (markup.Kind == SpanKind.Markup) && ((markup.Next == null) || ((markup.Next != null) && ((markup.Next.Kind == SpanKind.Markup) || ((markup.Next.Kind != SpanKind.Markup) && !markup.Content.EndsWith("\"")))))"  is complex.
Empty Catch Block,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascript,The method has an empty catch block.
Empty Catch Block,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyInlineCSS,The method has an empty catch block.
Empty Catch Block,Meleze.Web.Razor,MinifyHtmlWebRazorHostFactory,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlWebRazorHostFactory.cs,MinifyHtmlWebRazorHostFactory,The method has an empty catch block.
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyComments,The following statement contains a magic number: while (icommentstart >= 0)              {                  var icommentend = content.IndexOf("-->"' icommentstart + 3);                  if (icommentend < 0)                  {                      break;                  }                    if (_commentsMarkers.Select(m => content.IndexOf(m' icommentstart)).Any(i => i > 0 && i < icommentend))                  {                      // There is a comment but it contains javascript or IE conditionals                      // => we keep it                      break;                  }                    builder.Append(content' 0' icommentstart);                  builder.Append(content' icommentend + 3' content.Length - icommentend - 3);                  content = builder.ToString();                  builder.Clear();                    icommentstart = content.IndexOf("<!--"' icommentstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyComments,The following statement contains a magic number: while (icommentstart >= 0)              {                  var icommentend = content.IndexOf("-->"' icommentstart + 3);                  if (icommentend < 0)                  {                      break;                  }                    if (_commentsMarkers.Select(m => content.IndexOf(m' icommentstart)).Any(i => i > 0 && i < icommentend))                  {                      // There is a comment but it contains javascript or IE conditionals                      // => we keep it                      break;                  }                    builder.Append(content' 0' icommentstart);                  builder.Append(content' icommentend + 3' content.Length - icommentend - 3);                  content = builder.ToString();                  builder.Clear();                    icommentstart = content.IndexOf("<!--"' icommentstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyComments,The following statement contains a magic number: while (icommentstart >= 0)              {                  var icommentend = content.IndexOf("-->"' icommentstart + 3);                  if (icommentend < 0)                  {                      break;                  }                    if (_commentsMarkers.Select(m => content.IndexOf(m' icommentstart)).Any(i => i > 0 && i < icommentend))                  {                      // There is a comment but it contains javascript or IE conditionals                      // => we keep it                      break;                  }                    builder.Append(content' 0' icommentstart);                  builder.Append(content' icommentend + 3' content.Length - icommentend - 3);                  content = builder.ToString();                  builder.Clear();                    icommentstart = content.IndexOf("<!--"' icommentstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascript,The following statement contains a magic number: while (iscriptstart >= 0)              {                  var iscriptautoend = content.IndexOf("/>"' iscriptstart + 7);                  var iscriptend = content.IndexOf("</script>"' iscriptstart + 7);                  if ((insideScript && iscriptstart == 0) || (iscriptend < 0) || ((iscriptautoend > 0) && (iscriptautoend < iscriptend)))                  {                      content = MinifyJavascriptComments(content' builder' (insideScript && iscriptstart == 0)' ref iscriptstart);                      goto NEXT;                  }                    // We have some javascript code inside the tag                  // => we can ask a JS minifier to simplify it                  var istartcode = content.IndexOf('>'' iscriptstart) + 1;                  var iendcode = iscriptend;                  var code = content.Substring(istartcode' iendcode - istartcode);                  builder.Append(content' 0' istartcode);                    if (!string.IsNullOrWhiteSpace(code))                  {                      // We call the JS minifier by reflexion to cut the dependency.                      var minifiedCode = code;                      try                      {                          minifiedCode = _minifyJS(code);                      }                      catch                      {                      }                      builder.Append(minifiedCode);                  }                    iscriptstart = builder.Length;                    builder.Append(content' iscriptend' content.Length - iscriptend);                  content = builder.ToString();                  builder.Clear();              NEXT:                  iscriptstart = content.IndexOf("<script"' iscriptstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascript,The following statement contains a magic number: while (iscriptstart >= 0)              {                  var iscriptautoend = content.IndexOf("/>"' iscriptstart + 7);                  var iscriptend = content.IndexOf("</script>"' iscriptstart + 7);                  if ((insideScript && iscriptstart == 0) || (iscriptend < 0) || ((iscriptautoend > 0) && (iscriptautoend < iscriptend)))                  {                      content = MinifyJavascriptComments(content' builder' (insideScript && iscriptstart == 0)' ref iscriptstart);                      goto NEXT;                  }                    // We have some javascript code inside the tag                  // => we can ask a JS minifier to simplify it                  var istartcode = content.IndexOf('>'' iscriptstart) + 1;                  var iendcode = iscriptend;                  var code = content.Substring(istartcode' iendcode - istartcode);                  builder.Append(content' 0' istartcode);                    if (!string.IsNullOrWhiteSpace(code))                  {                      // We call the JS minifier by reflexion to cut the dependency.                      var minifiedCode = code;                      try                      {                          minifiedCode = _minifyJS(code);                      }                      catch                      {                      }                      builder.Append(minifiedCode);                  }                    iscriptstart = builder.Length;                    builder.Append(content' iscriptend' content.Length - iscriptend);                  content = builder.ToString();                  builder.Clear();              NEXT:                  iscriptstart = content.IndexOf("<script"' iscriptstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascriptComments,The following statement contains a magic number: var iscriptautoend = content.IndexOf("/>"' iscriptstart + 7);
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyJavascriptComments,The following statement contains a magic number: var iscriptend = content.IndexOf("</script>"' iscriptstart + 7);
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyInlineCSS,The following statement contains a magic number: while (iscriptstart >= 0)              {                  var iscriptautoend = content.IndexOf("/>"' iscriptstart + 6);                  var iscriptend = content.IndexOf("</style>"' iscriptstart + 6);                  if ((iscriptend < 0) || ((iscriptautoend > 0) && (iscriptautoend < iscriptend)))                  {                      break;                  }                    // We have some CSS code inside the tag                  // => we can ask a CSS minifier to simplify it                  var istartcode = content.IndexOf('>'' iscriptstart) + 1;                  var iendcode = iscriptend;                  var code = content.Substring(istartcode' iendcode - istartcode);                  builder.Append(content' 0' istartcode);                    if (!string.IsNullOrWhiteSpace(code))                  {                      // We call the Microsoft JS minifier by reflexion to cut the dependency.                      var minifiedCode = code;                      try                      {                          minifiedCode = _minifyCSS(code);                      }                      catch                      {                      }                      builder.Append(minifiedCode);                  }                    iscriptstart = builder.Length;                    builder.Append(content' iscriptend' content.Length - iscriptend);                  content = builder.ToString();                  builder.Clear();                    iscriptstart = content.IndexOf("<style"' iscriptstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlMinifier,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlMinifier.cs,MinifyInlineCSS,The following statement contains a magic number: while (iscriptstart >= 0)              {                  var iscriptautoend = content.IndexOf("/>"' iscriptstart + 6);                  var iscriptend = content.IndexOf("</style>"' iscriptstart + 6);                  if ((iscriptend < 0) || ((iscriptautoend > 0) && (iscriptautoend < iscriptend)))                  {                      break;                  }                    // We have some CSS code inside the tag                  // => we can ask a CSS minifier to simplify it                  var istartcode = content.IndexOf('>'' iscriptstart) + 1;                  var iendcode = iscriptend;                  var code = content.Substring(istartcode' iendcode - istartcode);                  builder.Append(content' 0' istartcode);                    if (!string.IsNullOrWhiteSpace(code))                  {                      // We call the Microsoft JS minifier by reflexion to cut the dependency.                      var minifiedCode = code;                      try                      {                          minifiedCode = _minifyCSS(code);                      }                      catch                      {                      }                      builder.Append(minifiedCode);                  }                    iscriptstart = builder.Length;                    builder.Append(content' iscriptend' content.Length - iscriptend);                  content = builder.ToString();                  builder.Clear();                    iscriptstart = content.IndexOf("<style"' iscriptstart);              }
Magic Number,Meleze.Web.Razor,MinifyHtmlWebRazorHostFactory,C:\repos\meleze_Meleze.Web\Meleze.Web\Razor\MinifyHtmlWebRazorHostFactory.cs,MinifyHtmlWebRazorHostFactory,The following statement contains a magic number: try              {                  if ((minifyJS == null) || (minifyCSS == null))                  {                      // Minification using the SWO transforms                      var swo = Assembly.Load("System.Web.Optimization");                      if (swo != null)                      {                          var bundleCollectionType = swo.GetType("System.Web.Optimization.BundleCollection");                          var bundleContextType = swo.GetType("System.Web.Optimization.BundleContext");                          var bundleContextConstructor = bundleContextType.GetConstructor(new Type[] { typeof(HttpContextBase)' bundleCollectionType' typeof(string) });                          var bundleReponseType = swo.GetType("System.Web.Optimization.BundleResponse");                          var bundleReponseConstructor = bundleReponseType.GetConstructors()[0];                          var bundleReponseContentProperty = bundleReponseType.GetProperty("Content");                          var bundleTransformType = swo.GetType("System.Web.Optimization.IBundleTransform");                          var bundleTransformProcessMethod = bundleTransformType.GetMethod("Process");                            var httpContext = new EmptyHttpContext();                          var bundleCollection = bundleCollectionType.GetConstructor(Type.EmptyTypes).Invoke(null);                          var bundleContext = bundleContextConstructor.Invoke(new object[] { httpContext' bundleCollection' "" });                            if (minifyCSS == null)                          {                              var cssMinifyType = swo.GetType("System.Web.Optimization.CssMinify");                              var cssMinify = cssMinifyType.GetConstructor(Type.EmptyTypes).Invoke(null);                                minifyCSS = delegate(string code)                              {                                  var bundleReponse = bundleReponseConstructor.Invoke(new object[] { null' null });                                  bundleReponseContentProperty.SetValue(bundleReponse' code' null);                                    bundleTransformProcessMethod.Invoke(cssMinify' new object[] { bundleContext' bundleReponse });                                    var minifiedCode = (string)bundleReponseContentProperty.GetValue(bundleReponse' null);                                  return minifiedCode;                              };                          }                          if (minifyJS == null)                          {                              var jsMinifyType = swo.GetType("System.Web.Optimization.JsMinify");                              var jsMinify = jsMinifyType.GetConstructor(Type.EmptyTypes).Invoke(null);                                minifyJS = delegate(string code)                              {                                  var bundleReponse = bundleReponseConstructor.Invoke(new object[] { null' null });                                  bundleReponseContentProperty.SetValue(bundleReponse' code' null);                                    bundleTransformProcessMethod.Invoke(jsMinify' new object[] { bundleContext' bundleReponse });                                    var minifiedCode = (string)bundleReponseContentProperty.GetValue(bundleReponse' null);                                  return minifiedCode;                              };                          }                      }                  }                    if ((minifyJS == null) || (minifyCSS == null))                  {                      // Minification using Microsoft AjaxMin                      var ajaxmin = Assembly.Load("ajaxmin");                      if (ajaxmin != null)                      {                          var minifierType = ajaxmin.GetType("Microsoft.Ajax.Utilities.Minifier");                          var min = minifierType.GetConstructor(Type.EmptyTypes).Invoke(null);                            if (minifyJS == null)                          {                              // JS                              var codeSettingsType = ajaxmin.GetType("Microsoft.Ajax.Utilities.CodeSettings");                              var localRenamingProperty = codeSettingsType.GetProperty("LocalRenaming");                              var minifyJavaScriptMethod = minifierType.GetMethod("MinifyJavaScript"' new Type[] { typeof(string)' codeSettingsType });                                var scsettings = codeSettingsType.GetConstructor(Type.EmptyTypes).Invoke(null);                              localRenamingProperty.SetValue(scsettings' 1' null);                                minifyJS = delegate(string code)                              {                                  var minifiedCode = (string)minifyJavaScriptMethod.Invoke(min' new object[] { code' scsettings });                                  return minifiedCode;                              };                          }                            if (minifyCSS == null)                          {                              // CSS                              var cssSettingsType = ajaxmin.GetType("Microsoft.Ajax.Utilities.CssSettings");                              var commentModeProperty = cssSettingsType.GetProperty("CommentMode");                              var minifyStyleSheetMethod = minifierType.GetMethod("MinifyStyleSheet"' new Type[] { typeof(string)' cssSettingsType });                                var scsettings2 = cssSettingsType.GetConstructor(Type.EmptyTypes).Invoke(null);                              commentModeProperty.SetValue(scsettings2' 2' null);                                minifyCSS = delegate(string code)                              {                                  var minifiedCode = (string)minifyStyleSheetMethod.Invoke(min' new object[] { code' scsettings2 });                                  return minifiedCode;                              };                          }                      }                  }              }              catch              {              }
