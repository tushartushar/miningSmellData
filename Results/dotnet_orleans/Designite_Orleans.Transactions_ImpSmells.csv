Implementation smell,Namespace,Class,File,Method,Description
Complex Method,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,Checkpoint,Cyclomatic complexity of the method is 8
Complex Method,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionLogMaintenance,Cyclomatic complexity of the method is 9
Complex Method,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateRead,Cyclomatic complexity of the method is 13
Long Parameter List,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionManager,The method has 6 parameters. Parameters: transactionLog' configOption' loggerFactory' telemetryProducer' getNodeConfig' logMaintenanceInterval
Long Parameter List,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,TransactionalState,The method has 6 parameters. Parameters: transactionalStateConfiguration' context' copier' transactionAgent' runtime' loggerFactory
Long Identifier,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,ReportMetrics,The length of the parameter abortedTransactionDueToDependentTPS is 35.
Long Identifier,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,ReportMetrics,The length of the parameter abortedTransactionDueToMissingInfoInTransactionTableTPS is 55.
Long Identifier,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,,The length of the parameter AbortedTransactionDueToDependencyTPS is 36.
Long Identifier,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,,The length of the parameter AbortedTransactionDueToMissingInfoInTransactionTableTPS is 55.
Long Identifier,Orleans.Transactions,TransactionsOptions,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionsOptions.cs,,The length of the parameter DefaultTransactionIdAllocationBatchSize is 39.
Long Identifier,Orleans.Transactions,TransactionsOptions,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionsOptions.cs,,The length of the parameter DefaultAvailableTransactionIdThreshold is 38.
Long Identifier,Orleans.Transactions,TransactionsOptions,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionsOptions.cs,,The length of the parameter DefaultTransactionRecordPreservationDuration is 44.
Long Identifier,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,TransactionalState,The length of the parameter transactionalStateConfiguration is 31.
Long Statement,Orleans.Transactions,TransactionLog,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionLog.cs,UpdateStartRecord,The length of the statement  "            throw new InvalidOperationException($"UpdateStartRecord was called in an invalid state. TransactionId: {transactionId}' lastStartRecordValue: {lastStartRecordValue}."); " is 168.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,AbortTransaction,The length of the statement  "            if(this.logger.IsEnabled(LogLevel.Debug)) this.logger.LogDebug($"Abort transaction {transactionId} due to reason {reason}"); " is 124.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,CommitTransaction,The length of the statement  "                                if(this.logger.IsEnabled(LogLevel.Debug)) this.logger.LogDebug($"Will abort transaction {transactionInfo.TransactionId} because it doesn't exist in the transaction table"); " is 172.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,CommitTransaction,The length of the statement  "                                    if(this.logger.IsEnabled(LogLevel.Debug)) this.logger.LogDebug($"Will abort transaction {transactionInfo.TransactionId} because one of its dependent transaction {dependentTx.TransactionId} has aborted"); " is 203.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,CommitTransaction,The length of the statement  "                            AbortTransaction(transactionInfo.TransactionId' new OrleansCascadingAbortException(transactionInfo.TransactionId' cascadingDependentId)); " is 137.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,Checkpoint,The length of the statement  "            // Rather than continue processing forever' only process the number of transactions which were waiting at invocation time. " is 122.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,MaintainTransactionLog,The length of the statement  "                    this.logger.Error(OrleansTransactionsErrorCode.TransactionManager_TransactionLogMaintenanceError' $"Error while maintaining transaction log."' ex); " is 147.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionLogMaintenance,The length of the statement  "                    this.logger.Error(OrleansTransactionsErrorCode.TransactionManager_TransactionLogTruncationError' $"Failed to truncate log. LSN: {checkpointedLSN}"' e); " is 151.
Long Statement,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionLogMaintenance,The length of the statement  "                        if (txRecord.Value.HighestActiveTransactionIdAtCheckpoint < activeTransactionsTracker.GetSmallestActiveTransactionId() && " is 121.
Long Statement,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,ReportMetrics,The length of the statement  "            var abortedTransactionDueToMissingInfoInTransactionTableTPS = AbortedTransactionDueToMissingInfoInTransactionTableCounter / timeSinceLastReportInSeconds; " is 153.
Long Statement,Orleans.Transactions,TransactionManagerMetrics,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManagerMetrics.cs,ReportMetrics,The length of the statement  "            this.telemetryProducer.TrackMetric(AbortedTransactionDueToMissingInfoInTransactionTableTPS' abortedTransactionDueToMissingInfoInTransactionTableTPS); " is 149.
Long Statement,Orleans.Transactions,NamedTransactionalStateStorageFactory,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\NamedTransactionalStateStorageFactory.cs,Create,The length of the statement  "                ? new InvalidOperationException($"No default {nameof(ITransactionalStateStorageFactory)} nor {nameof(IStorageProvider)} was found while attempting to create transactional state storage.") " is 187.
Long Statement,Orleans.Transactions,NamedTransactionalStateStorageFactory,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\NamedTransactionalStateStorageFactory.cs,Create,The length of the statement  "                : new InvalidOperationException($"No {nameof(ITransactionalStateStorageFactory)} nor {nameof(IStorageProvider)} with the name {storageName} was found while attempting to create transactional state storage."); " is 208.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,Prepare,The length of the statement  "                return await this.storageExecutor.AddNext(() => GuardState(() => PersistPrepare(wlb' transactionId' writeVersion' readVersion))); " is 129.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,Prepare,The length of the statement  "                this.logger.Error(OrleansTransactionsErrorCode.Transactions_PrepareFailed' $"Prepare of transaction {transactionId} failed."' ex); " is 130.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,Commit,The length of the statement  "                    this.logger.Info(OrleansTransactionsErrorCode.Transactions_CommitFailed' "Commit {0} failed.  Recovering.  Exception: {1}"' transactionId' ex); " is 143.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,PersistPrepare,The length of the statement  "            if (this.logger.IsEnabled(LogLevel.Debug)) this.logger.Debug("PersistPrepare. WLB: {0}' transactionId: {1}"' wlb' transactionId); " is 129.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,PersistPrepare,The length of the statement  "                if (this.logger.IsEnabled(LogLevel.Debug)) this.logger.Debug("PersistPrepare TransactionId {1} ignored. Already persisted"' transactionId); " is 139.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,PersistPrepare,The length of the statement  "            List<PendingTransactionState<TState>> pending = this.log.Select(kvp => new PendingTransactionState<TState>(kvp.Value.Version.ToString()' kvp.Key' kvp.Value.NewVal)).ToList(); " is 174.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,PersistPrepare,The length of the statement  "            if (this.logger.IsEnabled(LogLevel.Debug)) this.logger.Debug("PersistPrepare TransactionId {1} succeded"' transactionId); " is 121.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateWrite,The length of the statement  "            var validate  = this.log.TryGetValue(writeVersion.Value.TransactionId' out LogRecord<TState> logRecord) && logRecord.Version == writeVersion.Value; " is 147.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateWrite,The length of the statement  "                this.logger.Debug($"ValidateWrite failed' because version is not the same as recorded in state log record of the same transaction' write version in the log record is {logRecord.Version}' version to be validated is {writeVersion.Value}"); " is 237.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateRead,The length of the statement  "                        this.logger.Debug($"ValidateRead failed' due to one of the log record has larger transaction Id than the one in read version {readVersion.Value.TransactionId}' and smaller than transaction {transactionId}"); " is 207.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateRead,The length of the statement  "                    this.logger.Debug("ValidateRead failed' due to invalid write count. TransactionId: {0}' ReadVersion: {1}' StableVersion {3}"' transactionId' readVersion.Value' this.metadata.StableVersion); " is 189.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateRead,The length of the statement  "                    this.logger.Debug("ValidateRead failed' due to version read by the transaction lost. TransactionId: {0}' ReadVersion: {1}"' transactionId' readVersion.Value); " is 158.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,ValidateRead,The length of the statement  "                    this.logger.Debug("ValidateRead failed' because version is not same as recorded by state log record of the same transaction. TransactionId: {0}' ReadVersion: {1}' logVersion {2}"' transactionId' readVersion.Value' logRecord.Version); " is 233.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,DoLoad,The length of the statement  "                    Version = (TransactionalResourceVersion.TryParse(pendingState.TransactionId' out TransactionalResourceVersion version)) ? version : default(TransactionalResourceVersion) " is 169.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,OnSetupState,The length of the statement  "            Tuple<TransactionalExtension' ITransactionalExtension> boundExtension = await this.runtime.BindExtension<TransactionalExtension' ITransactionalExtension>(() => new TransactionalExtension()); " is 190.
Long Statement,Orleans.Transactions,TransactionalState<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,OnSetupState,The length of the statement  "            INamedTransactionalStateStorageFactory storageFactory = this.context.ActivationServices.GetRequiredService<INamedTransactionalStateStorageFactory>(); " is 149.
Long Statement,Orleans.Transactions,Metadata,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalState.cs,FromString,The length of the statement  "                return (!string.IsNullOrEmpty(metadataString)) ? JsonConvert.DeserializeObject<Metadata>(metadataString' settings) : new Metadata(); " is 132.
Long Statement,Orleans.Transactions,TransactionalStateFactory,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateFactory.cs,Create,The length of the statement  "            TransactionalState<TState> transactionalState = ActivatorUtilities.CreateInstance<TransactionalState<TState>>(this.context.ActivationServices' config' this.context); " is 165.
Long Statement,Orleans.Transactions,TransactionalStateStorageProviderWrapper<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateStorageProviderWrapper.cs,Load,The length of the statement  "            return new TransactionalStorageLoadResponse<TState>(stateStorage.Etag' stateStorage.State.CommittedState' stateStorage.State.Metadata' stateStorage.State.PendingStates); " is 169.
Long Statement,Orleans.Transactions,TransactionalStateStorageProviderWrapper<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateStorageProviderWrapper.cs,Persist,The length of the statement  "            foreach(PendingTransactionState<TState> pendingState in statesToPrepare.Where(s => !stateStorage.State.PendingStates.Contains(s))) " is 130.
Long Statement,Orleans.Transactions,TransactionalStateStorageProviderWrapper<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateStorageProviderWrapper.cs,Confirm,The length of the statement  "            PendingTransactionState<TState> committedState = stateStorage.State.PendingStates.FirstOrDefault(pending => transactionIdToCommit == pending.TransactionId); " is 156.
Long Statement,Orleans.Transactions,TransactionalStateStorageProviderWrapper<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateStorageProviderWrapper.cs,Confirm,The length of the statement  "                stateStorage.State.PendingStates = stateStorage.State.PendingStates.Where(pending => pending.SequenceId > committedState.SequenceId).ToList(); " is 142.
Long Statement,Orleans.Transactions,TransactionalStateStorageProviderWrapper<TState>,C:\repos\dotnet_orleans\src\Orleans.Transactions\State\TransactionalStateStorageProviderWrapper.cs,GetStateStorage,The length of the statement  "            return this.stateStorages.GetOrAdd(stateName' name => new StateStorageBridge<TransactionalStateRecord<TState>>(name' this.context.GrainInstance.GrainReference' storageProvider)); " is 178.
Magic Number,Orleans.Transactions.Abstractions,TransactionalResourceExtensionWrapper,C:\repos\dotnet_orleans\src\Orleans.Transactions\Abstractions\TransactionalExtensionExtensions.cs,GetHashCode,The following statement contains a magic number: unchecked                  {                      return ((extension?.GetHashCode() ?? 0) * 397) ^ (resourceId?.GetHashCode() ?? 0);                  }
Magic Number,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionManager,The following statement contains a magic number: transactionsTable = new ConcurrentDictionary<long' Transaction>(2' 1000000);
Magic Number,Orleans.Transactions,TransactionManager,C:\repos\dotnet_orleans\src\Orleans.Transactions\InClusterTM\TransactionManager.cs,TransactionManager,The following statement contains a magic number: transactionsTable = new ConcurrentDictionary<long' Transaction>(2' 1000000);
Magic Number,Orleans.Transactions.Development,InMemoryTransactionLogStorage,C:\repos\dotnet_orleans\src\Orleans.Transactions\Development\InMemoryTransactionLogStorage.cs,GetStartRecord,The following statement contains a magic number: startRecordValue = 50000;
