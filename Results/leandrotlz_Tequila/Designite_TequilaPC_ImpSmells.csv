Implementation smell,Namespace,Class,File,Method,Description
Complex Method,Tequila,DirCopy,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\DirCopy.cs,DirectoryCopyStep,Cyclomatic complexity of the method is 9
Complex Method,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,Cyclomatic complexity of the method is 14
Complex Method,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,ManifestDownloadComplete,Cyclomatic complexity of the method is 12
Complex Method,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,Cyclomatic complexity of the method is 15
Complex Method,Tequila,Preferences,C:\repos\leandrotlz_Tequila\TequilaPC\Preferences.cs,SelfRelocate,Cyclomatic complexity of the method is 8
Complex Method,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ScanParameters,Cyclomatic complexity of the method is 14
Complex Method,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,Cyclomatic complexity of the method is 12
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,AddToDownloadQueue,The length of the statement  "		Error = "The following file has an invalid checksum. You will need to obtain it from a valid game installation:\r\n" + file.FileName + "\r\n"; " is 142.
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,The length of the statement  "				if (client.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' DownloadURL' file.FullName + ".download")) { " is 179.
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadManifest,The length of the statement  "	client.StartDownload (new AsyncCompletedEventHandler (ManifestDownloadComplete)' new DownloadProgressChangedEventHandler (dlProgress)' ManifestURL' LocalManifest); " is 163.
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,ManifestDownloadComplete,The length of the statement  "		MyToolkit.ActivityLog ("Error downloading manifest' downloaded file not the right size. Expected: " + dlInfo.Length + " received: " + client.Length); " is 149.
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The length of the statement  "					if (selfPatcherClient.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' downloadURL' remoteLauncher.FullName + ".download")) { " is 200.
Long Statement,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The length of the statement  "						error += "\r\n" + remoteLauncher.FileName + "\r\n md5: " + remoteLauncher.Checksum + " vs " + downloadedFile.Checksum + "\r\n size: " + remoteLauncher.Size + " vs " + downloadedFile.Size; " is 187.
Long Statement,Tequila,Preferences,C:\repos\leandrotlz_Tequila\TequilaPC\Preferences.cs,btnInstallPathBrowse_Click,The length of the statement  "		FileBox.Description = "Select a location where you would like to install Tequila; preferably under My Documents or Application Data. Do not use a folder under Program Files."; " is 175.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,Setup,The length of the statement  "				FileBox.Description = "Select a location where you would like to install Tequila; preferably under My Documents or Application Data. Do not use a folder under Program Files."; " is 175.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,Setup,The length of the statement  "					MessageBox.Show ("You must select a valid install directory to continue.\nTequila will now quit. Restart Tequila once you have a valid installation path."); " is 156.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ScanParameters,The length of the statement  "		else if (MyToolkit.args [i].Trim () == "-noselfpatch" || MyToolkit.args [i].Trim () == "-noselfupdate" || MyToolkit.args [i].Trim () == "-nodisassemblejohnny5") { " is 162.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ScanParameters,The length of the statement  "			Fingerprint myFingerprint = new Fingerprint (Application.StartupPath' Application.ExecutablePath.Replace (Application.StartupPath + "\\"' "")); " is 143.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ProcessKiller,The length of the statement  "			MessageBox.Show (null' "Found a running instance of Tequila but was not able to terminate it."' "Warning!"' MessageBoxButtons.OK' MessageBoxIcon.Warning); " is 154.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The length of the statement  "		if (myWorker.ForumURL != "" && myWorker.ForumURL != webBrowser1.Tag && myWorker.ForumURL != webBrowser1.Url.AbsoluteUri && !webBrowser1.IsBusy) { " is 145.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The length of the statement  "					items.Add (new LaunchProfile (profile.Value.ToString ().Replace ("My App: "' "").Trim ()' profile.Attribute ("exec").Value' profile.Attribute ("params").Value)); " is 161.
Long Statement,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The length of the statement  "						items.Add (new LaunchProfile (profile.Value.ToString ().Replace ("My App: "' "").Trim ()' profile.Attribute ("exec").Value' profile.Attribute ("params").Value)); " is 161.
Complex Conditional,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The conditional expression  "myWorker.ForumURL != "" && myWorker.ForumURL != webBrowser1.Tag && myWorker.ForumURL != webBrowser1.Url.AbsoluteUri && !webBrowser1.IsBusy"  is complex.
Empty Catch Block,Tequila,DirCopy,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\DirCopy.cs,DirectoryCopyStep,The method has an empty catch block.
Empty Catch Block,Tequila,DirCopy,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\DirCopy.cs,DirectoryCount,The method has an empty catch block.
Empty Catch Block,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,Cancel,The method has an empty catch block.
Empty Catch Block,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The method has an empty catch block.
Empty Catch Block,Tequila,Preferences,C:\repos\leandrotlz_Tequila\TequilaPC\Preferences.cs,Preferences_Load,The method has an empty catch block.
Empty Catch Block,Tequila,Preferences,C:\repos\leandrotlz_Tequila\TequilaPC\Preferences.cs,btnAddManifest_Click,The method has an empty catch block.
Empty Catch Block,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ProcessKiller,The method has an empty catch block.
Empty Catch Block,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,Form_FormClosing,The method has an empty catch block.
Empty Catch Block,Tequila,Settings,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\Settings.cs,FixRegistryPolution,The method has an empty catch block.
Magic Number,Tequila,ShellLink,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\ShellLink.cs,Open,The following statement contains a magic number: if ((resolveFlags & EShellLinkResolveFlags.SLR_NO_UI) == EShellLinkResolveFlags.SLR_NO_UI) {  	flags = (uint)((int)resolveFlags | (timeOut << 16));  }  else {  	flags = (uint)resolveFlags;  }  
Magic Number,Tequila,ShellLink,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\ShellLink.cs,Open,The following statement contains a magic number: flags = (uint)((int)resolveFlags | (timeOut << 16));  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,FlagVerified,The following statement contains a magic number: try {  	FileInfo fi = new FileInfo (Path.Combine (Settings.GamePath' file));  	XElement e = new XElement ("file");  	e.Add (new XAttribute ("name"' file));  	e.Add (new XAttribute ("size"' size));  	e.Add (new XAttribute ("md5"' md5));  	e.Add (new XAttribute ("ModDate"' fi.LastWriteTime.ToString (fi.LastWriteTime.ToString ("yyyy.MM.dd.HH.mm.ss"))));  	LogNew.Add (e);  	// Sometimes we may run this through too fast and the file may be locked      	// we will retry a save attempt for up to 3 seconds' if we are not able       	// to save without errors by then we do one final save attempt and            	// report error.                                                              	bool saveSuccessful = false;  	Stopwatch sw = new Stopwatch ();  	sw.Start ();  	while (sw.ElapsedMilliseconds < 3000 && !saveSuccessful) {  		try {  			LogNew.Save (LogPath);  			saveSuccessful = true;  		}  		catch (Exception ex) {  			saveSuccessful = false;  		}  	}  	// OK' if we did not save' here is our last attempt!                          	if (!saveSuccessful)  		LogNew.Save (LogPath);  }  catch (Exception ex) {  	MyToolkit.ErrorReporter (ex' "WorkThread.FlagVerified");  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,FlagVerified,The following statement contains a magic number: while (sw.ElapsedMilliseconds < 3000 && !saveSuccessful) {  	try {  		LogNew.Save (LogPath);  		saveSuccessful = true;  	}  	catch (Exception ex) {  		saveSuccessful = false;  	}  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,The following statement contains a magic number: foreach (Fingerprint file in m_DownloadQueue) {  	if (Kill)  		return;  	HTTP client = new HTTP ();  	bool keepTrying = true;  	string DownloadURL = file.DownloadURL;  	;  	while (keepTrying) {  		try {  			MyToolkit.ActivityLog ("Downloading file \"" + file.FullName + "\" from \"" + DownloadURL + "\"");  			if (client.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' DownloadURL' file.FullName + ".download")) {  				m_Status = "Downloading";  				m_DownloadActive = true;  			}  		}  		catch (Exception ex) {  			string er = ex.Message;  		}  		m_current = file.FullName;  		while (client.Active) {  			if (Kill) {  				client.CancelDownload ();  				return;  			}  			System.Threading.Thread.Sleep (10);  		}  		Fingerprint Downloaded = new Fingerprint (file.RootPath' file.FileName + ".download");  		if (!Downloaded.Equals (file)) {  			// OK this file is no good' delete it.                    			File.Delete (file.FullName + ".download");  			// lets try a different url...                            			DownloadURL = file.DownloadURL;  			// Did we get a blank URL?                                			if (DownloadURL == "") {  				MyToolkit.ActivityLog ("Download failed' no more URL's to try from");  				// OK stop trying and report error...                 				keepTrying = false;  				string Msg = "Download error: " + file.FileName;  				if (Downloaded.Size == 0)  					Msg += "\r\nWas unable to download file";  				else {  					if (Downloaded.Size != file.Size)  						Msg += "\r\nSize mismatch (" + Downloaded.Size + " vs " + file.Size + ")";  					if (Downloaded.Checksum != file.Checksum)  						Msg += "\r\nChecksum Mismatch (" + Downloaded.Checksum + " vs " + file.Checksum + ")";  				}  				if (file.Warn)  					m_ErrorLog.Add (Msg);  				else  					m_WarningLog.Add (Msg);  			}  			else {  				MyToolkit.ActivityLog ("Download failed' trying from a different URL");  			}  		}  		else {  			if (File.Exists (file.FullName)) {  				File.SetAttributes (file.FullName' File.GetAttributes (file.FullName) & ~FileAttributes.ReadOnly);  				File.Delete (file.FullName);  			}  			// We are done' we dont need to keep trying (infinite loop if we dont set this)  			keepTrying = false;  			File.Move (file.FullName + ".download"' file.FullName);  			FlagVerified (file.FullName' file.Size' file.Checksum);  		}  	}  	m_Downloaded += file.Size;  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,The following statement contains a magic number: while (keepTrying) {  	try {  		MyToolkit.ActivityLog ("Downloading file \"" + file.FullName + "\" from \"" + DownloadURL + "\"");  		if (client.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' DownloadURL' file.FullName + ".download")) {  			m_Status = "Downloading";  			m_DownloadActive = true;  		}  	}  	catch (Exception ex) {  		string er = ex.Message;  	}  	m_current = file.FullName;  	while (client.Active) {  		if (Kill) {  			client.CancelDownload ();  			return;  		}  		System.Threading.Thread.Sleep (10);  	}  	Fingerprint Downloaded = new Fingerprint (file.RootPath' file.FileName + ".download");  	if (!Downloaded.Equals (file)) {  		// OK this file is no good' delete it.                    		File.Delete (file.FullName + ".download");  		// lets try a different url...                            		DownloadURL = file.DownloadURL;  		// Did we get a blank URL?                                		if (DownloadURL == "") {  			MyToolkit.ActivityLog ("Download failed' no more URL's to try from");  			// OK stop trying and report error...                 			keepTrying = false;  			string Msg = "Download error: " + file.FileName;  			if (Downloaded.Size == 0)  				Msg += "\r\nWas unable to download file";  			else {  				if (Downloaded.Size != file.Size)  					Msg += "\r\nSize mismatch (" + Downloaded.Size + " vs " + file.Size + ")";  				if (Downloaded.Checksum != file.Checksum)  					Msg += "\r\nChecksum Mismatch (" + Downloaded.Checksum + " vs " + file.Checksum + ")";  			}  			if (file.Warn)  				m_ErrorLog.Add (Msg);  			else  				m_WarningLog.Add (Msg);  		}  		else {  			MyToolkit.ActivityLog ("Download failed' trying from a different URL");  		}  	}  	else {  		if (File.Exists (file.FullName)) {  			File.SetAttributes (file.FullName' File.GetAttributes (file.FullName) & ~FileAttributes.ReadOnly);  			File.Delete (file.FullName);  		}  		// We are done' we dont need to keep trying (infinite loop if we dont set this)  		keepTrying = false;  		File.Move (file.FullName + ".download"' file.FullName);  		FlagVerified (file.FullName' file.Size' file.Checksum);  	}  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,The following statement contains a magic number: while (client.Active) {  	if (Kill) {  		client.CancelDownload ();  		return;  	}  	System.Threading.Thread.Sleep (10);  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,DownloadFiles,The following statement contains a magic number: System.Threading.Thread.Sleep (10);  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: try {  	Fingerprint myFingerprint = new Fingerprint (Settings.GamePath' "Tequila.exe");  	if (DontSelfUpdate)  		return;  	MyToolkit.ActivityLog ("Starting self-patch process.");  	// Before we go far... lets see if there are any old temp files hanging around and get rid of them    	string[] oldFiles = Directory.GetFiles (Settings.GamePath' "*.old");  	foreach (string oldFile in oldFiles) {  		try {  			File.Delete (oldFile);  		}  		catch (Exception ex) {  		}  	}  	// OK now thats out of the way' lets determine if we need to self patch or not!!                      	IEnumerable<XElement> launchers = m_manifest.Descendants ("launcher");  	m_Status = "Self patching";  	foreach (XElement launcher in launchers) {  		if (launcher.Attribute ("id").Value == "tequila") {  			long size = 0;  			long.TryParse (launcher.Attribute ("size").Value.ToString ()' out size);  			string md5 = launcher.Attribute ("md5").Value;  			Fingerprint remoteLauncher = new Fingerprint (Settings.GamePath' "Tequila.exe"' md5' size);  			if (!myFingerprint.Equals (remoteLauncher)) {  				MyToolkit.ActivityLog ("Patcher out of date...");  				// We need to update!!! yay...                                            				IEnumerable<XElement> urls = launcher.Descendants ("url");  				// Get every possible download URL into the remoteLauncher fingerprint    				foreach (XElement url in urls)  					remoteLauncher.AddDownloadURL (url.Value);  				// Start the download process                                             				HTTP selfPatcherClient = new HTTP ();  				m_DownloadSize = remoteLauncher.Size;  				string downloadURL = remoteLauncher.DownloadURL;  				MyToolkit.ActivityLog ("Downloading new version from \"" + downloadURL + "\"");  				if (selfPatcherClient.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' downloadURL' remoteLauncher.FullName + ".download")) {  					m_Status = "Downloading";  					m_DownloadActive = true;  				}  				m_current = remoteLauncher.FullName;  				// Wait until download is complete                                        				MyToolkit.ActivityLog ("Waiting for patcher download to complete...");  				while (selfPatcherClient.Active) {  					if (Kill) {  						selfPatcherClient.CancelDownload ();  						return;  					}  					System.Threading.Thread.Sleep (10);  				}  				m_DownloadActive = false;  				MyToolkit.ActivityLog ("New patcher version downloaded...");  				// Make sure the downloaded file is not corrupted                         				Fingerprint downloadedFile = new Fingerprint (remoteLauncher.RootPath' remoteLauncher.FileName + ".download");  				if (!downloadedFile.Equals (remoteLauncher)) {  					string error = "Was unable to self patch. Downloaded file did not match expected checksum.";  					error += "\r\n" + remoteLauncher.FileName + "\r\n md5: " + remoteLauncher.Checksum + " vs " + downloadedFile.Checksum + "\r\n size: " + remoteLauncher.Size + " vs " + downloadedFile.Size;  					MyToolkit.ActivityLog (error);  					File.Delete (downloadedFile.FullName + ".download");  					m_ErrorLog.Add (error);  					m_Status = "Done";  					return;  				}  				else {  					// Find an available _#.old file name                                                                     					long i = 0;  					string TrashName = myFingerprint.FullName + "_";  					while (File.Exists (TrashName + i.ToString () + ".old"))  						i++;  					TrashName = TrashName + i.ToString () + ".old";  					File.Move (myFingerprint.FullName' TrashName);  					File.Move (myFingerprint.FullName + ".download"' myFingerprint.FullName);  					var startInfo = new ProcessStartInfo ();  					startInfo.FileName = myFingerprint.FullName;  					startInfo.Arguments = MyToolkit.AllArgs ();  					MyToolkit.ActivityLog ("Tequila has been patched successfuly. Restarting.");  					Process.Start (startInfo);  					Application.Exit ();  					return;  				}  			}  		}  	}  	MyToolkit.ActivityLog ("Self patching process complete.");  }  catch (Exception ex) {  	MessageBox.Show (ex.Message' "WorkThread.SelfPatch()");  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: foreach (XElement launcher in launchers) {  	if (launcher.Attribute ("id").Value == "tequila") {  		long size = 0;  		long.TryParse (launcher.Attribute ("size").Value.ToString ()' out size);  		string md5 = launcher.Attribute ("md5").Value;  		Fingerprint remoteLauncher = new Fingerprint (Settings.GamePath' "Tequila.exe"' md5' size);  		if (!myFingerprint.Equals (remoteLauncher)) {  			MyToolkit.ActivityLog ("Patcher out of date...");  			// We need to update!!! yay...                                            			IEnumerable<XElement> urls = launcher.Descendants ("url");  			// Get every possible download URL into the remoteLauncher fingerprint    			foreach (XElement url in urls)  				remoteLauncher.AddDownloadURL (url.Value);  			// Start the download process                                             			HTTP selfPatcherClient = new HTTP ();  			m_DownloadSize = remoteLauncher.Size;  			string downloadURL = remoteLauncher.DownloadURL;  			MyToolkit.ActivityLog ("Downloading new version from \"" + downloadURL + "\"");  			if (selfPatcherClient.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' downloadURL' remoteLauncher.FullName + ".download")) {  				m_Status = "Downloading";  				m_DownloadActive = true;  			}  			m_current = remoteLauncher.FullName;  			// Wait until download is complete                                        			MyToolkit.ActivityLog ("Waiting for patcher download to complete...");  			while (selfPatcherClient.Active) {  				if (Kill) {  					selfPatcherClient.CancelDownload ();  					return;  				}  				System.Threading.Thread.Sleep (10);  			}  			m_DownloadActive = false;  			MyToolkit.ActivityLog ("New patcher version downloaded...");  			// Make sure the downloaded file is not corrupted                         			Fingerprint downloadedFile = new Fingerprint (remoteLauncher.RootPath' remoteLauncher.FileName + ".download");  			if (!downloadedFile.Equals (remoteLauncher)) {  				string error = "Was unable to self patch. Downloaded file did not match expected checksum.";  				error += "\r\n" + remoteLauncher.FileName + "\r\n md5: " + remoteLauncher.Checksum + " vs " + downloadedFile.Checksum + "\r\n size: " + remoteLauncher.Size + " vs " + downloadedFile.Size;  				MyToolkit.ActivityLog (error);  				File.Delete (downloadedFile.FullName + ".download");  				m_ErrorLog.Add (error);  				m_Status = "Done";  				return;  			}  			else {  				// Find an available _#.old file name                                                                     				long i = 0;  				string TrashName = myFingerprint.FullName + "_";  				while (File.Exists (TrashName + i.ToString () + ".old"))  					i++;  				TrashName = TrashName + i.ToString () + ".old";  				File.Move (myFingerprint.FullName' TrashName);  				File.Move (myFingerprint.FullName + ".download"' myFingerprint.FullName);  				var startInfo = new ProcessStartInfo ();  				startInfo.FileName = myFingerprint.FullName;  				startInfo.Arguments = MyToolkit.AllArgs ();  				MyToolkit.ActivityLog ("Tequila has been patched successfuly. Restarting.");  				Process.Start (startInfo);  				Application.Exit ();  				return;  			}  		}  	}  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: if (launcher.Attribute ("id").Value == "tequila") {  	long size = 0;  	long.TryParse (launcher.Attribute ("size").Value.ToString ()' out size);  	string md5 = launcher.Attribute ("md5").Value;  	Fingerprint remoteLauncher = new Fingerprint (Settings.GamePath' "Tequila.exe"' md5' size);  	if (!myFingerprint.Equals (remoteLauncher)) {  		MyToolkit.ActivityLog ("Patcher out of date...");  		// We need to update!!! yay...                                            		IEnumerable<XElement> urls = launcher.Descendants ("url");  		// Get every possible download URL into the remoteLauncher fingerprint    		foreach (XElement url in urls)  			remoteLauncher.AddDownloadURL (url.Value);  		// Start the download process                                             		HTTP selfPatcherClient = new HTTP ();  		m_DownloadSize = remoteLauncher.Size;  		string downloadURL = remoteLauncher.DownloadURL;  		MyToolkit.ActivityLog ("Downloading new version from \"" + downloadURL + "\"");  		if (selfPatcherClient.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' downloadURL' remoteLauncher.FullName + ".download")) {  			m_Status = "Downloading";  			m_DownloadActive = true;  		}  		m_current = remoteLauncher.FullName;  		// Wait until download is complete                                        		MyToolkit.ActivityLog ("Waiting for patcher download to complete...");  		while (selfPatcherClient.Active) {  			if (Kill) {  				selfPatcherClient.CancelDownload ();  				return;  			}  			System.Threading.Thread.Sleep (10);  		}  		m_DownloadActive = false;  		MyToolkit.ActivityLog ("New patcher version downloaded...");  		// Make sure the downloaded file is not corrupted                         		Fingerprint downloadedFile = new Fingerprint (remoteLauncher.RootPath' remoteLauncher.FileName + ".download");  		if (!downloadedFile.Equals (remoteLauncher)) {  			string error = "Was unable to self patch. Downloaded file did not match expected checksum.";  			error += "\r\n" + remoteLauncher.FileName + "\r\n md5: " + remoteLauncher.Checksum + " vs " + downloadedFile.Checksum + "\r\n size: " + remoteLauncher.Size + " vs " + downloadedFile.Size;  			MyToolkit.ActivityLog (error);  			File.Delete (downloadedFile.FullName + ".download");  			m_ErrorLog.Add (error);  			m_Status = "Done";  			return;  		}  		else {  			// Find an available _#.old file name                                                                     			long i = 0;  			string TrashName = myFingerprint.FullName + "_";  			while (File.Exists (TrashName + i.ToString () + ".old"))  				i++;  			TrashName = TrashName + i.ToString () + ".old";  			File.Move (myFingerprint.FullName' TrashName);  			File.Move (myFingerprint.FullName + ".download"' myFingerprint.FullName);  			var startInfo = new ProcessStartInfo ();  			startInfo.FileName = myFingerprint.FullName;  			startInfo.Arguments = MyToolkit.AllArgs ();  			MyToolkit.ActivityLog ("Tequila has been patched successfuly. Restarting.");  			Process.Start (startInfo);  			Application.Exit ();  			return;  		}  	}  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: if (!myFingerprint.Equals (remoteLauncher)) {  	MyToolkit.ActivityLog ("Patcher out of date...");  	// We need to update!!! yay...                                            	IEnumerable<XElement> urls = launcher.Descendants ("url");  	// Get every possible download URL into the remoteLauncher fingerprint    	foreach (XElement url in urls)  		remoteLauncher.AddDownloadURL (url.Value);  	// Start the download process                                             	HTTP selfPatcherClient = new HTTP ();  	m_DownloadSize = remoteLauncher.Size;  	string downloadURL = remoteLauncher.DownloadURL;  	MyToolkit.ActivityLog ("Downloading new version from \"" + downloadURL + "\"");  	if (selfPatcherClient.StartDownload (new AsyncCompletedEventHandler (DownloadFileComplete)' new DownloadProgressChangedEventHandler (dlProgress)' downloadURL' remoteLauncher.FullName + ".download")) {  		m_Status = "Downloading";  		m_DownloadActive = true;  	}  	m_current = remoteLauncher.FullName;  	// Wait until download is complete                                        	MyToolkit.ActivityLog ("Waiting for patcher download to complete...");  	while (selfPatcherClient.Active) {  		if (Kill) {  			selfPatcherClient.CancelDownload ();  			return;  		}  		System.Threading.Thread.Sleep (10);  	}  	m_DownloadActive = false;  	MyToolkit.ActivityLog ("New patcher version downloaded...");  	// Make sure the downloaded file is not corrupted                         	Fingerprint downloadedFile = new Fingerprint (remoteLauncher.RootPath' remoteLauncher.FileName + ".download");  	if (!downloadedFile.Equals (remoteLauncher)) {  		string error = "Was unable to self patch. Downloaded file did not match expected checksum.";  		error += "\r\n" + remoteLauncher.FileName + "\r\n md5: " + remoteLauncher.Checksum + " vs " + downloadedFile.Checksum + "\r\n size: " + remoteLauncher.Size + " vs " + downloadedFile.Size;  		MyToolkit.ActivityLog (error);  		File.Delete (downloadedFile.FullName + ".download");  		m_ErrorLog.Add (error);  		m_Status = "Done";  		return;  	}  	else {  		// Find an available _#.old file name                                                                     		long i = 0;  		string TrashName = myFingerprint.FullName + "_";  		while (File.Exists (TrashName + i.ToString () + ".old"))  			i++;  		TrashName = TrashName + i.ToString () + ".old";  		File.Move (myFingerprint.FullName' TrashName);  		File.Move (myFingerprint.FullName + ".download"' myFingerprint.FullName);  		var startInfo = new ProcessStartInfo ();  		startInfo.FileName = myFingerprint.FullName;  		startInfo.Arguments = MyToolkit.AllArgs ();  		MyToolkit.ActivityLog ("Tequila has been patched successfuly. Restarting.");  		Process.Start (startInfo);  		Application.Exit ();  		return;  	}  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: while (selfPatcherClient.Active) {  	if (Kill) {  		selfPatcherClient.CancelDownload ();  		return;  	}  	System.Threading.Thread.Sleep (10);  }  
Magic Number,Tequila,WorkThread,C:\repos\leandrotlz_Tequila\TequilaPC\Classes\WorkThread.cs,SelfPatch,The following statement contains a magic number: System.Threading.Thread.Sleep (10);  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ProcessKiller,The following statement contains a magic number: try {  	Process[] prs = Process.GetProcessesByName ("tequila");  	Process me = Process.GetCurrentProcess ();  	int killcount = 0;  	int killfailcount = 0;  	foreach (Process pr in prs) {  		if (pr.Id != me.Id) {  			MyToolkit.ActivityLog ("Shutting down previous instance of patcher...");  			killcount++;  			try {  				pr.Kill ();  			}  			catch (Exception ex) {  				killfailcount++;  			}  		}  	}  	if (killcount > 0)  		Thread.Sleep (2000);  	if (killfailcount > 0)  		MessageBox.Show (null' "Found a running instance of Tequila but was not able to terminate it."' "Warning!"' MessageBoxButtons.OK' MessageBoxIcon.Warning);  }  catch (Exception ex) {  }  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ProcessKiller,The following statement contains a magic number: if (killcount > 0)  	Thread.Sleep (2000);  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,ProcessKiller,The following statement contains a magic number: Thread.Sleep (2000);  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,Finish,The following statement contains a magic number: try {  	MyToolkit.ActivityLog ("Finished patching.");  	Progress.Value = 100;  	timer1.Enabled = false;  	if (myWorker.ErrorMessage != "") {  		txtErrors.Text = myWorker.ErrorMessage;  		webBrowser1.Visible = false;  		pnlErrors.Visible = true;  	}  	else {  		btnPlay.Enabled = true;  		cbManifest.Enabled = true;  		btnPlay.Text = "Play";  	}  }  catch (Exception ex) {  	MyToolkit.ErrorReporter (ex' this.Name + ".Finish");  }  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,Finish,The following statement contains a magic number: Progress.Value = 100;  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The following statement contains a magic number: try {  	if (myCopyObj != null) {  		if (myCopyObj.Active) {  			Progress.Value = myCopyObj.Progress;  			return;  		}  	}  	if (myWorker == null) {  		StartUp ();  		return;  	}  	if (myWorker.ForumURL != "" && myWorker.ForumURL != webBrowser1.Tag && myWorker.ForumURL != webBrowser1.Url.AbsoluteUri && !webBrowser1.IsBusy) {  		MyToolkit.ActivityLog ("Loading Web Browser URL to: \"" + myWorker.ForumURL + "\"");  		webBrowser1.Tag = myWorker.ForumURL;  		webBrowser1.Navigate (myWorker.ForumURL);  	}  	if (myWorker.Manifest != null)  		if (ListBox1.Items.Count <= 1) {  			IEnumerable<XElement> Profiles = myWorker.Manifest.Descendants ("launch");  			List<object> items = new List<object> ();  			foreach (XElement profile in Profiles) {  				items.Add (new LaunchProfile (profile.Value.ToString ().Replace ("My App: "' "").Trim ()' profile.Attribute ("exec").Value' profile.Attribute ("params").Value));  			}  			if (DevMode) {  				Profiles = myWorker.Manifest.Descendants ("devlaunch");  				foreach (XElement profile in Profiles) {  					items.Add (new LaunchProfile (profile.Value.ToString ().Replace ("My App: "' "").Trim ()' profile.Attribute ("exec").Value' profile.Attribute ("params").Value));  				}  			}  			ListBox1.DisplayMember = "Text";  			ListBox1.DataSource = items;  			ListBox1.SelectedIndex = 0;  		}  	Progress.Value = MyToolkit.MinMax (myWorker.CurProgress' 0' 100);  	lblStatus.Text = myWorker.Status + "... " + myWorker.CurFile;  	if (myWorker.Status == "Done")  		Finish ();  }  catch (Exception ex) {  	MyToolkit.ErrorReporter (ex' this.Name + ".Form_Load");  }  
Magic Number,Tequila,Tequila,C:\repos\leandrotlz_Tequila\TequilaPC\Tequila.cs,timer_Tick,The following statement contains a magic number: Progress.Value = MyToolkit.MinMax (myWorker.CurProgress' 0' 100);  
