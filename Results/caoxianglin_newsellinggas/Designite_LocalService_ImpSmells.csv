Implementation smell,Namespace,Class,File,Method,Description
Long Parameter List,service,WebServerInterface,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WebServerInterface.cs,WriteNewCard,The method has 23 parameters.
Long Parameter List,service,WebServerInterface,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WebServerInterface.cs,WriteGasCard,The method has 18 parameters.
Long Parameter List,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,WriteNewCard,The method has 23 parameters.
Long Parameter List,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,WriteGasCard,The method has 18 parameters.
Long Statement,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,WriteNewCard,The length of the statement  "	Log.Debug ("发卡或者补卡 start" + "cardid-" + kh + "sqrq-" + sqrq + "czsx-" + czsx + "bjql-" + bjql + "gmje-" + ql + "buyprice-" + oldprice); " is 135.
Long Statement,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,WriteNewCard,The length of the statement  "		int r = card.WriteNewCard (Port' Baud' ref kmm' kzt' kh' dqdm' yhh' tm' ql' csql' ccsql' cs' ljgql' bkcs' ljyql' bjql' czsx' tzed' sqrq' cssqrq' oldprice' newprice' sxrq' sxbj); " is 177.
Long Statement,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,WriteGasCard,The length of the statement  "		int r = card.WriteGasCard (Port' Baud' ref kmm' kh' dqdm' ql' csql' ccsql' cs' ljgql' bjql' czsx' tzed' sqrq' cssqrq' oldprice' newprice' sxrq' sxbj); " is 150.
Long Statement,LocalService,MainWindow,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\MainWindow.xaml.cs,MainWindow_Closing,The length of the statement  "	if (System.Windows.MessageBox.Show ("确定要退出托盘应用程序吗？"' "托盘应用程序"' MessageBoxButton.YesNo' MessageBoxImage.Question' MessageBoxResult.No) == MessageBoxResult.Yes) { " is 160.
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,worker_DoWork,The following statement contains a magic number: try {  	//获取本地端口号，波特率  	Port = short.Parse (Config.GetConfig ("Port"));  	Baud = int.Parse (Config.GetConfig ("Baud"));  	Log.Debug ("Port'Baud" + Port + Baud);  	//获取后台ip地址  	string ip = Config.GetConfig ("RemoteIP");  	//从后台获取所有文件信息  	WebClient client = new WebClient ();  	string str = client.DownloadString (ip + "/rs/card");  	Log.Debug ("download str" + str);  	string[] infos = str.Split ('|');  	//对于每一个文件，检查时间是否一致，不一致则到后台获取文件  	foreach (string item in infos) {  		string[] items = item.Split (''');  		string fpath = items [0];  		Log.Debug ("find fpath is " + fpath);  		long ftime = long.Parse (items [1]);  		DateTime from1970 = new DateTime (1970' 1' 1' 8' 0' 0' DateTimeKind.Local);  		DateTime time = from1970.AddMilliseconds (ftime);  		//如果与本地文件时间不同，去后台获取文件  		int index = fpath.LastIndexOf ('\\');  		string fname = fpath.Substring (index + 1);  		Log.Debug ("find fname is " + fname);  		DateTime local = File.GetLastWriteTime (fname);  		Log.Debug ("time = " + time.ToString ());  		Log.Debug ("local = " + local.ToString ());  		if (local != time) {  			Log.Debug ("load file " + fname);  			client.DownloadFile (ip + "/rs/card/" + fpath.Replace ("\\"' "^")' fname);  			File.SetLastWriteTime (fname' time);  		}  	}  	//加载xaml文件  	StreamReader reader = new StreamReader ("Card.xaml");  	string s = reader.ReadToEnd ();  	ResourceDictionary dic = (ResourceDictionary)XamlServices.Parse (s);  	Cards = (CardInfos)dic ["CardInfos"];  	Log.Debug (Cards.Count + "");  }  catch (Exception ex) {  	Log.Debug (ex.Message);  }  
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,worker_DoWork,The following statement contains a magic number: try {  	//获取本地端口号，波特率  	Port = short.Parse (Config.GetConfig ("Port"));  	Baud = int.Parse (Config.GetConfig ("Baud"));  	Log.Debug ("Port'Baud" + Port + Baud);  	//获取后台ip地址  	string ip = Config.GetConfig ("RemoteIP");  	//从后台获取所有文件信息  	WebClient client = new WebClient ();  	string str = client.DownloadString (ip + "/rs/card");  	Log.Debug ("download str" + str);  	string[] infos = str.Split ('|');  	//对于每一个文件，检查时间是否一致，不一致则到后台获取文件  	foreach (string item in infos) {  		string[] items = item.Split (''');  		string fpath = items [0];  		Log.Debug ("find fpath is " + fpath);  		long ftime = long.Parse (items [1]);  		DateTime from1970 = new DateTime (1970' 1' 1' 8' 0' 0' DateTimeKind.Local);  		DateTime time = from1970.AddMilliseconds (ftime);  		//如果与本地文件时间不同，去后台获取文件  		int index = fpath.LastIndexOf ('\\');  		string fname = fpath.Substring (index + 1);  		Log.Debug ("find fname is " + fname);  		DateTime local = File.GetLastWriteTime (fname);  		Log.Debug ("time = " + time.ToString ());  		Log.Debug ("local = " + local.ToString ());  		if (local != time) {  			Log.Debug ("load file " + fname);  			client.DownloadFile (ip + "/rs/card/" + fpath.Replace ("\\"' "^")' fname);  			File.SetLastWriteTime (fname' time);  		}  	}  	//加载xaml文件  	StreamReader reader = new StreamReader ("Card.xaml");  	string s = reader.ReadToEnd ();  	ResourceDictionary dic = (ResourceDictionary)XamlServices.Parse (s);  	Cards = (CardInfos)dic ["CardInfos"];  	Log.Debug (Cards.Count + "");  }  catch (Exception ex) {  	Log.Debug (ex.Message);  }  
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,worker_DoWork,The following statement contains a magic number: foreach (string item in infos) {  	string[] items = item.Split (''');  	string fpath = items [0];  	Log.Debug ("find fpath is " + fpath);  	long ftime = long.Parse (items [1]);  	DateTime from1970 = new DateTime (1970' 1' 1' 8' 0' 0' DateTimeKind.Local);  	DateTime time = from1970.AddMilliseconds (ftime);  	//如果与本地文件时间不同，去后台获取文件  	int index = fpath.LastIndexOf ('\\');  	string fname = fpath.Substring (index + 1);  	Log.Debug ("find fname is " + fname);  	DateTime local = File.GetLastWriteTime (fname);  	Log.Debug ("time = " + time.ToString ());  	Log.Debug ("local = " + local.ToString ());  	if (local != time) {  		Log.Debug ("load file " + fname);  		client.DownloadFile (ip + "/rs/card/" + fpath.Replace ("\\"' "^")' fname);  		File.SetLastWriteTime (fname' time);  	}  }  
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,worker_DoWork,The following statement contains a magic number: foreach (string item in infos) {  	string[] items = item.Split (''');  	string fpath = items [0];  	Log.Debug ("find fpath is " + fpath);  	long ftime = long.Parse (items [1]);  	DateTime from1970 = new DateTime (1970' 1' 1' 8' 0' 0' DateTimeKind.Local);  	DateTime time = from1970.AddMilliseconds (ftime);  	//如果与本地文件时间不同，去后台获取文件  	int index = fpath.LastIndexOf ('\\');  	string fname = fpath.Substring (index + 1);  	Log.Debug ("find fname is " + fname);  	DateTime local = File.GetLastWriteTime (fname);  	Log.Debug ("time = " + time.ToString ());  	Log.Debug ("local = " + local.ToString ());  	if (local != time) {  		Log.Debug ("load file " + fname);  		client.DownloadFile (ip + "/rs/card/" + fpath.Replace ("\\"' "^")' fname);  		File.SetLastWriteTime (fname' time);  	}  }  
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,ReadCard,The following statement contains a magic number: try {  	//检查卡的初始状态  	int result = MingHua.CheckCard (Port' Baud);  	Log.Debug ("check card result" + result);  	//有错误，显示错误内容，不是新卡不当做错误  	if (result != 0 && result != -15) {  		//获取错误代码  		ret.Err = FindErrorInfo (result);  		return ret;  	}  	if (Cards == null) {  		throw new Exception ("Cards is null");  	}  	//循环调用所有厂家的  	foreach (CardConfig info in Cards) {  		ICard card = info.Card;  		//如果不是本厂家的，看下一个  		int r = card.CheckGasCard (Port' Baud);  		Log.Debug ("check " + info.Name + " is " + r);  		if (r != 0) {  			continue;  		}  		//读卡  		string kh = "";  		Int32 ql = 0;  		decimal money = 0;  		Int16 cs = 0;  		Int16 bkcs = 0;  		string dqdm = "";  		r = card.ReadGasCard (Port' Baud' ref kh' ref ql' ref money' ref cs' ref bkcs' ref dqdm);  		if (r < 0) {  			//获取错误代码  			ret.Err = FindErrorInfo (r);  		}  		else {  			//返回读取结果  			ret.Factory = info.Name;  			ret.CardID = kh;  			ret.Gas = ql;  			ret.Money = money;  			ret.Times = cs;  			ret.RenewTimes = bkcs;  			ret.Dqdm = dqdm;  			Log.Debug ("WorkService中地区代码 " + dqdm + " is " + ret.Dqdm);  		}  		return ret;  	}  	//一个都没有找到  	ret.Err = "未知厂家";  	return ret;  }  catch (Exception e) {  	Log.Debug ("ReadCard exception");  	ret.Exception = e.Message;  	return ret;  }  
Magic Number,service,WorkService,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\service\WorkService.cs,ReadCard,The following statement contains a magic number: if (result != 0 && result != -15) {  	//获取错误代码  	ret.Err = FindErrorInfo (result);  	return ret;  }  
Magic Number,LocalService,MainWindow,C:\repos\caoxianglin_newsellinggas\LocalService\LocalService\MainWindow.xaml.cs,MainWindow,The following statement contains a magic number: this.notifyIcon.ShowBalloonTip (1000);  
